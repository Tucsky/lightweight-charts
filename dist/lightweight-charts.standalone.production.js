/*!
 * @license
 * TradingView Lightweight Charts v2.1.0-dev+202005021212
 * Copyright (c) 2019 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */
!function(){"use strict";var t,i;function n(t,i){var n,s=((n={})[0]=[],n[1]=[t.lineWidth,t.lineWidth],n[2]=[2*t.lineWidth,2*t.lineWidth],n[3]=[6*t.lineWidth,6*t.lineWidth],n[4]=[t.lineWidth,4*t.lineWidth],n)[i];t.setLineDash(s)}function s(t,i,n,s){t.beginPath();var h=t.lineWidth%2?.5:0;t.moveTo(n,i+h),t.lineTo(s,i+h),t.stroke()}!function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps"}(t||(t={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(i||(i={}));var h=function(t,i){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(t,i)};function r(t,i){function n(){this.constructor=t}h(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var u=function(){return(u=Object.assign||function(t){for(var i,n=1,s=arguments.length;n<s;n++)for(var h in i=arguments[n])Object.prototype.hasOwnProperty.call(i,h)&&(t[h]=i[h]);return t}).apply(this,arguments)};function e(){for(var t=0,i=0,n=arguments.length;i<n;i++)t+=arguments[i].length;var s=Array(t),h=0;for(i=0;i<n;i++)for(var r=arguments[i],u=0,e=r.length;u<e;u++,h++)s[h]=r[u];return s}function o(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function f(t){if(void 0===t)throw new Error("Value is undefined");return t}function a(t){if(null===t)throw new Error("Value is null");return t}function c(t){return a(f(t))}function l(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var s=0,h=i;s<h.length;s++){var r=h[s];for(var u in r)void 0!==r[u]&&("object"!=typeof r[u]||void 0===t[u]?t[u]=r[u]:l(t[u],r[u]))}return t}function v(t){return"number"==typeof t&&isFinite(t)}function d(t){return"number"==typeof t&&t%1==0}function w(t){return"string"==typeof t}function M(t){return!(t<=0||t>0)}function b(t){return"boolean"==typeof t}function m(t){var i,n,s,h=t;if(!h||"object"!=typeof h)return h;for(n in i=Array.isArray(h)?[]:{},h)h.hasOwnProperty(n)&&(s=h[n],i[n]=s&&"object"==typeof s?m(s):s);return i}function p(t){return null!==t}function g(t){return null===t?void 0:t}var y=function(){function t(){this.t=[]}return t.prototype.setRenderers=function(t){this.t=t},t.prototype.draw=function(t,i,n,s){this.t.forEach((function(h){t.save(),h.draw(t,i,n,s),t.restore()}))},t}(),k=function(){function t(){}return t.prototype.draw=function(t,i,n,s){t.save(),t.scale(i,i),this._drawImpl(t,n,s),t.restore()},t.prototype.drawBackground=function(t,i,n,s){t.save(),t.scale(i,i),this._drawBackgroundImpl(t,n,s),t.restore()},t.prototype._drawBackgroundImpl=function(t,i,n){},t}(),N=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._data=null,i}return r(i,t),i.prototype.setData=function(t){this._data=t},i.prototype._drawImpl=function(t){if(null!==this._data&&null!==this._data.visibleRange){var i=this._data.visibleRange,n=this._data,s=function(s){t.beginPath();for(var h=i.to-1;h>=i.from;--h){var r=n.items[h];t.moveTo(r.x,r.y),t.arc(r.x,r.y,s,0,2*Math.PI)}t.fill()};t.fillStyle=n.backColor,s(n.radius+2),t.fillStyle=n.lineColor,s(n.radius)}},i}(k);var x,S,D,C,T={from:0,to:1},E=function(){function t(t,i){this.i=new y,this.s=[],this.u=[],this.o=!0,this.l=t,this.v=i,this.i.setRenderers(this.s)}return t.prototype.update=function(t){var i=this,n=this.l.serieses();n.length!==this.s.length&&(this.u=n.map((function(){return{items:[{x:0,y:0,time:0,price:0}],lineColor:"",backColor:i.l.options().layout.backgroundColor,radius:0,visibleRange:null}})),this.s=this.u.map((function(t){var i=new N;return i.setData(t),i})),this.i.setRenderers(this.s)),this.o=!0},t.prototype.renderer=function(t,i,n){return this.o&&(this.M(),this.o=!1),this.i},t.prototype.M=function(){var t=this,i=this.l.serieses(),n=this.v.appliedIndex(),s=this.l.timeScale();i.forEach((function(i,h){var r=t.u[h],u=i.markerDataAtIndex(n);if(null!==u){var e=a(i.firstValue());r.lineColor=i.barColorer().barStyle(n).barColor,r.backColor=t.l.options().layout.backgroundColor,r.radius=u.radius,r.items[0].price=u.price,r.items[0].y=i.priceScale().priceToCoordinate(u.price,e.value),r.items[0].time=n,r.items[0].x=s.indexToCoordinate(n),r.visibleRange=T}else r.visibleRange=null}))},t}(),L=function(){function t(t){this.m=t}return t.prototype.draw=function(t,i,h,r){if(null!==this.m){var u=this.m.vertLine.visible,e=this.m.horzLine.visible;if(u||e){t.save();var o=Math.round(this.m.x*i),f=Math.round(this.m.y*i),a=Math.ceil(this.m.w*i),c=Math.ceil(this.m.h*i);t.lineCap="butt",u&&o>=0&&(t.lineWidth=Math.floor(this.m.vertLine.lineWidth*i),t.strokeStyle=this.m.vertLine.color,t.fillStyle=this.m.vertLine.color,n(t,this.m.vertLine.lineStyle),function(t,i,n,s){t.beginPath();var h=t.lineWidth%2?.5:0;t.moveTo(i+h,n),t.lineTo(i+h,s),t.stroke()}(t,o,0,c)),e&&f>=0&&(t.lineWidth=Math.floor(this.m.horzLine.lineWidth*i),t.strokeStyle=this.m.horzLine.color,t.fillStyle=this.m.horzLine.color,n(t,this.m.horzLine.lineStyle),s(t,f,0,a)),t.restore()}}},t}(),A=function(){function t(t){this.o=!0,this.p={vertLine:{lineWidth:1,lineStyle:0,color:"",visible:!1},horzLine:{lineWidth:1,lineStyle:0,color:"",visible:!1},w:0,h:0,x:0,y:0},this.g=new L(this.p),this.k=t}return t.prototype.update=function(){this.o=!0},t.prototype.renderer=function(t,i){return this.o&&this.M(),this.g},t.prototype.M=function(){var t=this.k.visible(),i=a(this.k.pane()),n=i.model().options().crosshair,s=this.p;s.horzLine.visible=t&&this.k.horzLineVisible(i),s.vertLine.visible=t&&this.k.vertLineVisible(),s.horzLine.lineWidth=n.horzLine.width,s.horzLine.lineStyle=n.horzLine.style,s.horzLine.color=n.horzLine.color,s.vertLine.lineWidth=n.vertLine.width,s.vertLine.lineStyle=n.vertLine.style,s.vertLine.color=n.vertLine.color,s.w=i.width(),s.h=i.height(),s.x=this.k.appliedX(),s.y=this.k.appliedY()},t}(),B={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function z(t){return function(t,i,n){return M(i)||i<t?t:i>n?n:Math.round(i)}(0,t,255)}function V(t){return function(t,i,n){return M(i)||i<t?t:i>n?n:Math.round(1e4*i)/1e4}(0,t,1)}function F(t){(t=t.toLowerCase())in B&&(t=B[t]);var i,n,s=(i=t,null!==(n=D.re.exec(i))?D.parse(n):null);if(null!==s)return s;var h=function(t){var i=S.re.exec(t);return null!==i?S.parse(i):null}(t);if(null!==h)return h;var r=function(t){var i=x.re.exec(t);return null!==i?x.parse(i):null}(t);if(null!==r)return r;var u=function(t){var i=C.re.exec(t);return null!==i?C.parse(i):null}(t);return null!==u?[u[0],u[1],u[2]]:null}function P(t){var i=F(t);if(null!==i)return i;throw new Error("Passed color string "+t+" does not match any of the known color representations")}function O(t,i){if(i<0||i>255)throw new Error("invalid threshold value, valid values are [0, 255]");return function(t){return.199*t[0]+.687*t[1]+.114*t[2]}(t)>=i?"white":"black"}function I(t){return function(t){return 0===t.indexOf("#")}(t)?t:(n=P(t),s=1,"rgba("+(i=[n[0],n[1],n[2],V(s)])[0]+", "+i[1]+", "+i[2]+", "+i[3]+")");var i,n,s}function R(t){return"black"===O(P(t),160)?"white":"black"}function W(t,i,n,s,h,r){t.fillRect(i,n,r,h),t.fillRect(i+r,n,s-2*r,r),t.fillRect(i+r,n+h-r,s-2*r,r),t.fillRect(i+s-r,n,r,h)}function U(t,i,n){t.save(),t.scale(i,i),n(),t.restore()}function j(t,i,n,s,h,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(i,n,s,h),t.restore()}!function(t){t.re=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/,t.parse=function(t){return[z(parseInt(t[1]+t[1],16)),z(parseInt(t[2]+t[2],16)),z(parseInt(t[3]+t[3],16))]}}(x||(x={})),function(t){t.re=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,t.parse=function(t){return[z(parseInt(t[1],16)),z(parseInt(t[2],16)),z(parseInt(t[3],16))]}}(S||(S={})),function(t){t.re=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,t.parse=function(t){return[z(parseInt(t[1],10)),z(parseInt(t[2],10)),z(parseInt(t[3],10))]}}(D||(D={})),function(t){t.re=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/,t.parse=function(t){return[z(parseInt(t[1],10)),z(parseInt(t[2],10)),z(parseInt(t[3],10)),V(parseFloat(t[4]))]}}(C||(C={}));var q,H=function(){function t(t,i){this.setData(t,i)}return t.prototype.setData=function(t,i){this.m=t,this.N=i},t.prototype.draw=function(t,i,n,s,h,r){if(this.m.visible){t.font=i.font;var u=this.m.tickVisible?i.tickLength:0,e=i.borderSize,o=i.paddingTop,f=i.paddingBottom,a=i.paddingInner,c=i.paddingOuter,l=this.m.text,v=Math.ceil(n.measureText(t,l)),d=i.baselineOffset,w=i.fontSize+o+f,M=Math.ceil(.5*w),b=e+v+a+c+u,m=this.N.coordinate;this.N.fixedCoordinate&&(m=this.N.fixedCoordinate);var p,g,y=(m=Math.round(m))-M,k=y+w,N="right"===h,x=N?s:0,S=Math.ceil(s*r),D=x;if(t.fillStyle=I(this.N.background),t.lineWidth=1,t.lineCap="butt",l){N?(p=x-u,g=(D=x-b)+c):(D=x+b,p=x+u,g=x+e+u+a);var C=Math.max(1,Math.floor(r)),T=Math.max(1,Math.floor(e*r)),E=N?S:0,L=Math.round(y*r),A=Math.round(D*r),B=Math.round(m*r)-Math.floor(.5*r),z=B+C+(B-L),V=Math.round(p*r);t.save(),t.beginPath(),t.moveTo(E,L),t.lineTo(A,L),t.lineTo(A,z),t.lineTo(E,z),t.fill(),t.fillStyle=this.m.borderColor,t.fillRect(N?S-T:0,L,T,z-L),this.m.tickVisible&&(t.fillStyle=this.N.color,t.fillRect(E,B,V-E,C)),t.textAlign="left",t.fillStyle=this.N.color,U(t,r,(function(){t.fillText(l,g,k-f-d)})),t.restore()}}},t.prototype.height=function(t,i){return this.m.visible?t.fontSize+t.paddingTop+t.paddingBottom:0},t}(),Y=function(){function t(t){this.S={coordinate:0,color:"#FFF",background:"#000"},this.D={text:"",visible:!1,tickVisible:!0,borderColor:""},this.C={text:"",visible:!1,tickVisible:!1,borderColor:""},this.o=!0,this.T=new(t||H)(this.D,this.S),this.L=new(t||H)(this.C,this.S)}return t.prototype.text=function(){return this.D.text},t.prototype.background=function(){return this.S.background},t.prototype.color=function(){return R(this.background())},t.prototype.coordinate=function(){return this.A(),this.S.coordinate},t.prototype.update=function(){this.o=!0},t.prototype.height=function(t,i){return void 0===i&&(i=!1),Math.max(this.T.height(t,i),this.L.height(t,i))},t.prototype.getFixedCoordinate=function(){return this.S.fixedCoordinate||0},t.prototype.setFixedCoordinate=function(t){this.S.fixedCoordinate=t},t.prototype.isVisible=function(){return this.A(),this.D.visible||this.C.visible},t.prototype.isAxisLabelVisible=function(){return this.A(),this.D.visible},t.prototype.isPaneLabelVisible=function(){return this.A(),this.C.visible},t.prototype.renderer=function(){return this.A(),this.T.setData(this.D,this.S),this.L.setData(this.C,this.S),this.T},t.prototype.paneRenderer=function(){return this.A(),this.T.setData(this.D,this.S),this.L.setData(this.C,this.S),this.L},t.prototype.A=function(){this.o&&(this._updateRendererData(this.D,this.C,this.S),this.o=!1)},t}(),_=function(t){function i(i,n,s){var h=t.call(this)||this;return h.k=i,h.B=n,h.V=s,h}return r(i,t),i.prototype._updateRendererData=function(t,i,n){t.visible=!1;var s=this.k.options().horzLine;if(s.labelVisible){var h=this.B.firstValue();if(this.k.visible()&&!this.B.isEmpty()&&null!==h){n.background=s.labelBackgroundColor,n.color=R(s.labelBackgroundColor);var r=this.V(this.B);n.coordinate=r.coordinate,t.text=this.B.formatPrice(r.price,h),t.visible=!0}}},i}(Y),K=/[1-9]/g,$=function(){function t(){this.m=null}return t.prototype.setData=function(t){this.m=t},t.prototype.draw=function(t,i,n){var s=this;if(null!==this.m&&!1!==this.m.visible&&0!==this.m.text.length){t.font=i.font;var h=Math.round(i.widthCache.measureText(t,this.m.text,K));if(!(h<=0)){t.save();var r=i.paddingHorizontal,u=h+2*r,e=u/2,o=this.m.width,f=this.m.coordinate,c=Math.floor(f-e)+.5;c<0?(f+=Math.abs(0-c),c=Math.floor(f-e)+.5):c+u>o&&(f-=Math.abs(o-(c+u)),c=Math.floor(f-e)+.5);var l=c+u,v=0+i.borderSize+i.paddingTop+i.fontSize+i.paddingBottom;t.fillStyle=this.m.background;var d=Math.round(c*n),w=Math.round(0*n),M=Math.round(l*n),b=Math.round(v*n);t.fillRect(d,w,M-d,b-w);var m=Math.round(this.m.coordinate*n),p=w,g=Math.round((p+i.borderSize+i.tickLength)*n);t.fillStyle=this.m.color;var y=Math.max(1,Math.floor(n)),k=Math.floor(.5*n);t.fillRect(m-k,p,y,g-p);var N=v-i.baselineOffset-i.paddingBottom;t.textAlign="left",t.fillStyle=this.m.color,U(t,n,(function(){t.fillText(a(s.m).text,c+r,N)})),t.restore()}}},t}(),X=function(t){function i(i,n,s){var h=t.call(this)||this;return h.o=!0,h.g=new $,h.p={visible:!1,background:"#4c525e",color:"white",text:"",width:0,coordinate:NaN},h.v=i,h.F=n,h.V=s,h}return r(i,t),i.prototype.update=function(){this.o=!0},i.prototype.renderer=function(){return this.o&&(this.M(),this.o=!1),this.g.setData(this.p),this.g},i.prototype.M=function(){var t=this.p;t.visible=!1;var i=this.v.options().vertLine;if(i.labelVisible){var n=this.F.timeScale();if(!n.isEmpty()){var s=n.indexToUserTime(this.v.appliedIndex());t.width=n.width();var h=this.V();h.time&&(t.coordinate=h.coordinate,t.text=n.formatDateTime(a(s)),t.visible=!0,t.background=i.labelBackgroundColor,t.color=R(i.labelBackgroundColor))}}},i}(function(){function t(){this._text="",this._background="#585858",this._coordinate=0}return t.prototype.text=function(){return this._text},t.prototype.background=function(){return this._background},t.prototype.color=function(){return"black"===O(P(this._background),150)?"white":"black"},t.prototype.coordinate=function(){return this._coordinate},t}()),Z=function(){function t(){this._priceScale=null,this.P=0}return t.prototype.zorder=function(){return this.P},t.prototype.setZorder=function(t){this.P=t},t.prototype.priceScale=function(){return this._priceScale},t.prototype.setPriceScale=function(t){this._priceScale=t},t.prototype.priceAxisViews=function(t,i){return[]},t.prototype.paneViews=function(t){return[]},t.prototype.timeAxisViews=function(){return[]},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(q||(q={}));var J=function(t){function i(i,n){var s=t.call(this)||this;s.O=null,s.I=NaN,s.R=0,s.W=!0,s.U=new Map,s.j=!1,s.q=NaN,s.H=NaN,s.Y=NaN,s._=NaN,s.F=i,s.K=n,s.$=new E(i,s);var h,r;s.X=(h=function(){return s.I},r=function(){return s.H},function(t){var i=r(),n=h();if(t===a(s.O).defaultPriceScale())return{price:n,coordinate:i};var u=a(t.firstValue());return{price:t.coordinateToPrice(i,u),coordinate:i}});var u=function(t,i){return function(){return{time:s.F.timeScale().indexToUserTime(t()),coordinate:i()}}}((function(){return s.R}),(function(){return s.appliedX()}));return s.Z=new X(s,i,u),s.J=new A(s),s}return r(i,t),i.prototype.index=function(){return this.R},i.prototype.options=function(){return this.K},i.prototype.saveOriginCoord=function(t,i){this.Y=t,this._=i},i.prototype.clearOriginCoord=function(){this.Y=NaN,this._=NaN},i.prototype.originCoordX=function(){return this.Y},i.prototype.originCoordY=function(){return this._},i.prototype.setPosition=function(t,i,n){this.j||(this.j=!0),this.W=!0,this.G(t,i,n)},i.prototype.appliedIndex=function(){return this.R},i.prototype.appliedX=function(){return this.q},i.prototype.appliedY=function(){return this.H},i.prototype.visible=function(){return this.W},i.prototype.clearPosition=function(){this.W=!1,this.tt(),this.I=NaN,this.q=NaN,this.H=NaN,this.O=null,this.clearOriginCoord()},i.prototype.paneViews=function(t){return null!==this.O?[this.J,this.$]:[]},i.prototype.horzLineVisible=function(t){return t===this.O&&this.K.horzLine.visible},i.prototype.vertLineVisible=function(){return this.K.vertLine.visible},i.prototype.priceAxisViews=function(t,i){this.W&&this.O===t||this.U.clear();var n=[];return this.O===t&&n.push(this.it(this.U,i,this.X)),n},i.prototype.timeAxisViews=function(){return this.W?[this.Z]:[]},i.prototype.pane=function(){return this.O},i.prototype.updateAllViews=function(){this.U.forEach((function(t){return t.update()})),this.Z.update(),this.$.update()},i.prototype.nt=function(t){return t&&!t.defaultPriceScale().isEmpty()?t.defaultPriceScale():null},i.prototype.G=function(t,i,n){this.st(t,i,n)&&this.updateAllViews()},i.prototype.st=function(t,i,n){var s=this.q,h=this.H,r=this.I,u=this.R,e=this.O,o=this.nt(n);this.R=t,this.q=isNaN(t)?NaN:this.F.timeScale().indexToCoordinate(t),this.O=n;var f=null!==o?o.firstValue():null;return null!==o&&null!==f?(this.I=i,this.H=o.priceToCoordinate(i,f)):(this.I=NaN,this.H=NaN),s!==this.q||h!==this.H||u!==this.R||r!==this.I||e!==this.O},i.prototype.tt=function(){var t=this.F.serieses().map((function(t){return t.bars().lastIndex()})).filter(p),i=0===t.length?null:Math.max.apply(Math,t);this.R=null!==i?i:NaN},i.prototype.it=function(t,i,n){var s=t.get(i);return void 0===s&&(s=new _(this,i,n),t.set(i,s)),s},i}(Z),G=".",Q="'";function tt(t,i){if(!v(t))return"n/a";if(!d(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");if(0===i)return t.toString();return("0000000000000000"+t.toString()).slice(-i)}var it,nt=function(){function t(t,i,n,s){if(i||(i=1),v(t)&&d(t)||(t=100),t<0)throw new TypeError("invalid base");this.B=t,this.ht=i,this.rt=s,n&&void 0!==s&&s>0&&2!==s&&4!==s&&8!==s||(this.ut=n,this.et())}return t.prototype.format=function(t){var i=t<0?"−":"";return t=Math.abs(t),this.ut?i+this.ot(t):i+this.ft(t)},t.prototype.et=function(){if(this._fractionalLength=0,this.B>0&&this.ht>0){var t=this.B;for(this.ut&&this.rt&&(t/=this.rt);t>1;)t/=10,this._fractionalLength++}},t.prototype.ft=function(t){var i;i=this.ut?Math.pow(10,this._fractionalLength||0):this.B/this.ht;var n=Math.floor(t),s="",h=void 0!==this._fractionalLength?this._fractionalLength:NaN;if(i>1){var r=+(Math.round(t*i)-n*i).toFixed(this._fractionalLength);r>=i&&(r-=i,n+=1),s=G+tt(+r.toFixed(this._fractionalLength)*this.ht,h)}else n=Math.round(n*i)/i,h>0&&(s=G+tt(0,h));return n.toFixed(0)+s},t.prototype.ot=function(t){var i=this.B/this.ht,n=Math.floor(t),s=Math.round(t*i)-n*i;if(s===i&&(s=0,n+=1),!this._fractionalLength)throw new Error("_fractionalLength is not calculated");var h="";if(this.rt){var r=s%this.rt,u=tt(s=(s-r)/this.rt,this._fractionalLength),e=2===this.rt?["0","5"][r]:8===this.rt?["0","1","2","3","4","5","6","7"][r]:["0","2","5","7"][r];h=u+Q+e}else h=tt(s*this.ht,this._fractionalLength);return n.toString()+Q+h},t}(),st=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return r(i,t),i.prototype.format=function(i){return t.prototype.format.call(this,i)+"%"},i}(nt),ht=function(){function t(){this.at=[]}return t.prototype.subscribe=function(t,i,n){var s={callback:t,linkedObject:i,singleshot:!0===n};this.at.push(s)},t.prototype.unsubscribe=function(t){var i=this.at.findIndex((function(i){return t===i.callback}));i>-1&&this.at.splice(i,1)},t.prototype.unsubscribeAll=function(t){this.at=this.at.filter((function(i){return i.linkedObject===t}))},t.prototype.fire=function(t,i){var n=e(this.at);this.at=this.at.filter((function(t){return!t.singleshot})),n.forEach((function(n){return n.callback(t,i)}))},t.prototype.hasListeners=function(){return this.at.length>0},t.prototype.destroy=function(){this.at=[]},t}(),rt=function(t){function i(i){var n=t.call(this)||this;return n.F=i,n}return r(i,t),i.prototype.model=function(){return this.F},i.prototype.minMove=function(){return 0},i.prototype.autoscaleInfo=function(t,i){return null},i}(Z),ut=function(){function t(t,i){this.ct=t,this.lt=i}return t.prototype.equals=function(t){return null!==t&&(this.ct===t.ct&&this.lt===t.lt)},t.prototype.clone=function(){return new t(this.ct,this.lt)},t.prototype.minValue=function(){return this.ct},t.prototype.setMinValue=function(t){this.ct=t},t.prototype.maxValue=function(){return this.lt},t.prototype.setMaxValue=function(t){this.lt=t},t.prototype.length=function(){return this.lt-this.ct},t.prototype.isEmpty=function(){return this.lt===this.ct||Number.isNaN(this.lt)||Number.isNaN(this.ct)},t.prototype.merge=function(i){return null===i?this:new t(Math.min(this.minValue(),i.minValue()),Math.max(this.maxValue(),i.maxValue()))},t.prototype.apply=function(t,i){this.ct=Math.min(this.ct,t),this.lt=Math.max(this.lt,i)},t.prototype.set=function(t,i){this.ct=t,this.lt=i},t.prototype.scaleAroundCenter=function(t){if(v(t)&&0!==this.lt-this.ct){var i=.5*(this.lt+this.ct),n=this.lt-i,s=this.ct-i;n*=t,s*=t,this.lt=i+n,this.ct=i+s}},t.prototype.shift=function(t){v(t)&&(this.lt+=t,this.ct+=t)},t.prototype.containsStrictly=function(t){return t.minValue()>this.ct&&t.maxValue()<this.lt},t}();function et(t,i,n){return Math.min(Math.max(t,i),n)}function ot(t,i,n){return i-t<=n}function ft(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function at(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function ct(t){var i=Math.ceil(t);return i%2==0?i-1:i}function lt(t,i){var n=100*(t-i)/i;return i<0?-n:n}function vt(t,i){var n=lt(t.minValue(),i),s=lt(t.maxValue(),i);return new ut(n,s)}function dt(t,i){var n=100*(t-i)/i+100;return i<0?-n:n}function wt(t,i){var n=dt(t.minValue(),i),s=dt(t.maxValue(),i);return new ut(n,s)}function Mt(t){var i=Math.abs(t);if(i<1e-8)return 0;var n=ft(i+1e-4)+4;return t<0?-n:n}function bt(t){var i=Math.abs(t);if(i<1e-8)return 0;var n=Math.pow(10,i-4)-1e-4;return t<0?-n:n}function mt(t){if(null===t)return null;var i=Mt(t.minValue()),n=Mt(t.maxValue());return new ut(i,n)}!function(t){t[t.LogicalOffset=4]="LogicalOffset",t[t.CoordOffset=1e-4]="CoordOffset"}(it||(it={}));var pt=function(){function t(t,i){if(this.vt=t,this.dt=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.vt))this.wt=[2,2.5,2];else{this.wt=[];for(var n=this.vt;1!==n;){if(n%2==0)this.wt.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.wt.push(2),this.wt.push(2.5),n/=5}if(this.wt.length>100)throw new Error("something wrong with base")}}}return t.prototype.tickSpan=function(t,i,n){for(var s,h,r,u=0===this.vt?0:1/this.vt,e=Math.pow(10,Math.max(0,Math.ceil(ft(t-i)))),o=0,f=this.dt[0];;){var a=ot(e,u,1e-9)&&e>u+1e-9,c=ot(e,n*f,1e-9),l=ot(e,1,1e-9);if(!(a&&c&&l))break;e/=f,f=this.dt[++o%this.dt.length]}if(e<=u+1e-9&&(e=u),e=Math.max(1,e),this.wt.length>0&&(s=e,h=1,r=1e-9,Math.abs(s-h)<r))for(o=0,f=this.wt[0];ot(e,n*f,1e-9)&&e>u+1e-9;)e/=f,f=this.wt[++o%this.wt.length];return e},t}(),gt=function(){function t(t,i,n,s){this.Mt=[],this.B=t,this.vt=i,this.bt=n,this.pt=s}return t.prototype.setBase=function(t){if(t<0)throw new Error("base < 0");this.vt=t},t.prototype.tickSpan=function(t,i){if(t<i)throw new Error("high < low");var n=this.B.height(),s=(t-i)*this.gt()/n,h=new pt(this.vt,[2,2.5,2]),r=new pt(this.vt,[2,2,2.5]),u=new pt(this.vt,[2.5,2,2]),e=[];return e.push(h.tickSpan(t,i,s)),e.push(r.tickSpan(t,i,s)),e.push(u.tickSpan(t,i,s)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(e)},t.prototype.rebuildTickMarks=function(){var t=this.B,i=t.firstValue();if(null!==i){var n=t.height(),s=this.bt(n-1,i),h=this.bt(0,i),r=this.B.options().entireTextOnly?this.yt()/2:0,u=r,e=n-1-r,o=Math.max(s,h),f=Math.min(s,h);if(o!==f){for(var a=this.tickSpan(o,f),c=o%a,l=o>=f?1:-1,v=null,d=0,w=o-(c+=c<0?a:0);w>f;w-=a){var M=this.pt(w,i,!0);null!==v&&Math.abs(M-v)<this.gt()||(M<u||M>e||(d<this.Mt.length?(this.Mt[d].coord=M,this.Mt[d].label=t.formatLogical(w)):this.Mt.push({coord:M,label:t.formatLogical(w)}),d++,v=M,t.isLog()&&(a=this.tickSpan(w*l,f))))}this.Mt.length=d}else this.Mt=[]}else this.Mt=[]},t.prototype.marks=function(){return this.Mt},t.prototype.yt=function(){return this.B.fontSize()},t.prototype.gt=function(){return Math.ceil(2.5*this.yt())},t}(),yt=function(){function t(t){this.kt=t}return t.prototype.format=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.Nt(t):t<999995?i+this.Nt(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.Nt(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.Nt(t/1e9)+"B")},t.prototype.Nt=function(t){var i=Math.pow(10,this.kt);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.kt).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))},t}();function kt(t,i,n,s){if(0!==i.length){var h=i[s.from].x,r=i[s.from].y;t.moveTo(h,r);for(var u=s.from+1;u<s.to;++u){var e=i[u];if(1===n){var o=i[u-1].y,f=e.x;t.lineTo(f,o)}t.lineTo(e.x,e.y)}}}var Nt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._data=null,i}return r(i,t),i.prototype.setData=function(t){this._data=t},i.prototype._drawImpl=function(t){if(null!==this._data&&0!==this._data.items.length&&null!==this._data.visibleRange){t.lineCap="butt",t.strokeStyle=this._data.lineColor,t.lineWidth=this._data.lineWidth,n(t,this._data.lineStyle),t.lineWidth=1,t.beginPath(),t.moveTo(this._data.items[this._data.visibleRange.from].x,this._data.bottom),t.lineTo(this._data.items[this._data.visibleRange.from].x,this._data.items[this._data.visibleRange.from].y),kt(t,this._data.items,this._data.lineType,this._data.visibleRange),this._data.visibleRange.to>this._data.visibleRange.from&&(t.lineTo(this._data.items[this._data.visibleRange.to-1].x,this._data.bottom),t.lineTo(this._data.items[this._data.visibleRange.from].x,this._data.bottom)),t.closePath();var i=t.createLinearGradient(0,0,0,this._data.bottom);i.addColorStop(0,this._data.topColor),i.addColorStop(1,this._data.bottomColor),t.fillStyle=i,t.fill()}},i}(k),xt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._data=null,i}return r(i,t),i.prototype.setData=function(t){this._data=t},i.prototype._drawImpl=function(t){null!==this._data&&0!==this._data.items.length&&null!==this._data.visibleRange&&(t.lineCap="square",t.lineWidth=this._data.lineWidth,n(t,this._data.lineStyle),t.strokeStyle=this._data.lineColor,t.lineJoin="miter",t.beginPath(),kt(t,this._data.items,this._data.lineType,this._data.visibleRange),t.stroke())},i}(k);function St(t,i,n,s,h){void 0===s&&(s=0),void 0===h&&(h=t.length);for(var r=h-s;0<r;){var u=r>>1,e=s+u;n(t[e],i)?(s=e+1,r-=u+1):r=u}return s}function Dt(t,i,n,s,h){void 0===s&&(s=0),void 0===h&&(h=t.length);for(var r=h-s;0<r;){var u=r>>1,e=s+u;n(i,t[e])?r=u:(s=e+1,r-=u+1)}return s}function Ct(t,i){return t.time<i}function Tt(t,i){return t<i.time}function Et(t,i,n){var s=i.firstBar(),h=i.lastBar(),r=St(t,s,Ct),u=Dt(t,h,Tt);if(!n)return{from:r,to:u};var e=r,o=u;return r>0&&r<t.length&&t[r].time>=s&&(e=r-1),u>0&&u<t.length&&t[u-1].time<=h&&(o=u+1),{from:e,to:o}}var Lt=function(){function t(t,i,n){this._invalidated=!0,this._dataInvalidated=!0,this._items=[],this._itemsVisibleRange=null,this._series=t,this._model=i,this.xt=n}return t.prototype.update=function(t){this._invalidated=!0,"data"===t&&(this._dataInvalidated=!0)},t.prototype._makeValid=function(){this._dataInvalidated&&(this._fillRawPoints(),this._dataInvalidated=!1),this._invalidated&&(this._updatePoints(),this._invalidated=!1)},t.prototype._clearVisibleRange=function(){this._itemsVisibleRange=null},t.prototype._updatePoints=function(){var t=this._series.priceScale(),i=this._model.timeScale();if(this._clearVisibleRange(),!i.isEmpty()&&!t.isEmpty()){var n=i.visibleBars();if(null!==n&&0!==this._series.data().bars().size()){var s=this._series.firstValue();null!==s&&(this._itemsVisibleRange=Et(this._items,n,this.xt),this._convertToCoordinates(t,i,s.value))}}},t}(),At=function(t){function i(i,n){return t.call(this,i,n,!0)||this}return r(i,t),i.prototype._convertToCoordinates=function(t,i,n){i.indexesToCoordinates(this._items,g(this._itemsVisibleRange)),t.pointsArrayToCoordinates(this._items,n,g(this._itemsVisibleRange))},i.prototype._createRawItemBase=function(t,i){return{time:t,price:i,x:NaN,y:NaN}},i.prototype._fillRawPoints=function(){var t=this,i=this._series.barFunction(),n=[],s=this._series.barColorer();this._series.bars().each((function(h,r){var u=i(r.value),e=t._createRawItem(h,u,s);return n.push(e),!1})),this._items=n},i}(Lt),Bt=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.g=new y,s.St=new Nt,s.Dt=new xt,s.g.setRenderers([s.St,s.Dt]),s}return r(i,t),i.prototype.renderer=function(t,i){this._makeValid();var n=this._series.options(),s={lineType:n.lineType,items:this._items,lineColor:n.lineColor,lineStyle:n.lineStyle,lineWidth:n.lineWidth,topColor:n.topColor,bottomColor:n.bottomColor,bottom:t,visibleRange:this._itemsVisibleRange};return this.St.setData(s),this.Dt.setData(s),this.g},i.prototype._createRawItem=function(t,i){return this._createRawItemBase(t,i)},i}(At);var zt,Vt=function(){function t(){this.m=null,this.Ct=0,this.Tt=0}return t.prototype.setData=function(t){this.m=t},t.prototype.draw=function(t,i,n,s){if(null!==this.m&&0!==this.m.bars.length&&null!==this.m.visibleRange){if(this.Ct=Math.max(1,Math.floor(function(t,i){return Math.floor(.3*t*i)}(this.m.barSpacing,i))),this.Ct>=2)Math.floor(i)%2!=this.Ct%2&&this.Ct--;this.Tt=this.m.thinBars?Math.min(this.Ct,Math.floor(i)):this.Ct;for(var h=null,r=this.m.visibleRange.from;r<this.m.visibleRange.to;++r){var u=this.m.bars[r];h!==u.color&&(t.fillStyle=u.color,h=u.color);var e=Math.floor(.5*this.Tt),o=Math.round(u.x*i),f=o-e,a=this.Tt,c=f+a-1,l=Math.round(u.highY*i)-e,v=Math.round(u.lowY*i)+e,d=Math.max(v-l,this.Tt);t.fillRect(f,l,a,d);var w=Math.ceil(1.5*this.Ct);if(this.Tt<=this.Ct){if(this.m.openVisible){var M=o-w,b=Math.max(l,Math.round(u.openY*i)-e),m=b+a-1;m>l+d-1&&(b=(m=l+d-1)-a+1),t.fillRect(M,b,f-M,m-b+1)}var p=o+w,g=Math.max(l,Math.round(u.closeY*i)-e),y=g+a-1;y>l+d-1&&(g=(y=l+d-1)-a+1),t.fillRect(c+1,g,p-c,y-g+1)}}}},t}(),Ft=function(t){function i(i,n){return t.call(this,i,n,!1)||this}return r(i,t),i.prototype._convertToCoordinates=function(t,i,n){i.indexesToCoordinates(this._items,g(this._itemsVisibleRange)),t.barPricesToCoordinates(this._items,n,g(this._itemsVisibleRange))},i.prototype._createDefaultItem=function(t,i,n){return{time:t,open:i.value[0],high:i.value[1],low:i.value[2],close:i.value[3],x:NaN,openY:NaN,highY:NaN,lowY:NaN,closeY:NaN}},i.prototype._fillRawPoints=function(){var t=this,i=[],n=this._series.barColorer();this._series.bars().each((function(s,h){var r=t._createRawItem(s,h,n);return i.push(r),!1})),this._items=i},i}(Lt),Pt=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.g=new Vt,s}return r(i,t),i.prototype.renderer=function(t,i){this._makeValid();var n=this._series.options(),s={bars:this._items,barSpacing:this._model.timeScale().barSpacing(),openVisible:n.openVisible,thinBars:n.thinBars,visibleRange:this._itemsVisibleRange};return this.g.setData(s),this.g},i.prototype._createRawItem=function(t,i,n){return u(u({},this._createDefaultItem(t,i,n)),{color:n.barStyle(t).barColor})},i}(Ft);!function(t){t[t.BarBorderWidth=1]="BarBorderWidth"}(zt||(zt={}));var Ot=function(){function t(){this.m=null,this.Ct=0}return t.prototype.setData=function(t){this.m=t},t.prototype.draw=function(t,i,n,s){if(null!==this.m&&0!==this.m.bars.length&&null!==this.m.visibleRange){if(this.Ct=function(t,i){var n=Math.floor(.8*t*i),s=Math.floor(t*i),h=Math.min(n,s-1);return Math.max(1,h)}(this.m.barSpacing,i),this.Ct>=2)Math.floor(i)%2!=this.Ct%2&&this.Ct--;var h=this.m.bars;this.m.wickVisible&&this.Et(t,h,this.m.visibleRange,i),this.m.borderVisible&&this.Lt(t,h,this.m.visibleRange,this.m.barSpacing,i);var r=this.At(i);(!this.m.borderVisible||this.Ct>2*r)&&this.Bt(t,h,this.m.visibleRange,i)}},t.prototype.Et=function(t,i,n,s){if(null!==this.m){var h="",r=Math.min(Math.floor(s),Math.floor(this.m.barSpacing*s));r=Math.min(r,this.Ct);for(var u=Math.floor(.5*r),e=n.from;e<n.to;e++){var o=i[e];o.wickColor!==h&&(t.fillStyle=o.wickColor,h=o.wickColor);var f=Math.round(Math.min(o.openY,o.closeY)*s),a=Math.round(Math.max(o.openY,o.closeY)*s),c=Math.round(o.highY*s),l=Math.round(o.lowY*s),v=Math.round(s*o.x);t.fillRect(v-u,c,r,f-c),t.fillRect(v-u,a+1,r,l-a)}}},t.prototype.At=function(t){var i=Math.floor(1*t);this.Ct<=2*i&&(i=Math.floor(.5*(this.Ct-1)));var n=Math.max(1,i);return this.Ct<=2*n?Math.floor(1*t):n},t.prototype.Lt=function(t,i,n,s,h){for(var r="",u=this.At(h),e=n.from;e<n.to;e++){var o=i[e];o.borderColor!==r&&(t.fillStyle=o.borderColor,r=o.borderColor);var f=Math.round(o.x*h)-Math.floor(.5*this.Ct),a=f+this.Ct-1,c=Math.round(Math.min(o.openY,o.closeY)*h),l=Math.round(Math.max(o.openY,o.closeY)*h);s>2*u?W(t,f,c,a-f+1,l-c+1,u):t.fillRect(f,c,a-f+1,l-c+1)}},t.prototype.Bt=function(t,i,n,s){if(null!==this.m)for(var h="",r=this.At(s),u=n.from;u<n.to;u++){var e=i[u],o=Math.round(Math.min(e.openY,e.closeY)*s),f=Math.round(Math.max(e.openY,e.closeY)*s),a=Math.round(e.x*s)-Math.floor(.5*this.Ct),c=a+this.Ct-1;if(this.m.borderVisible&&(a+=r,o+=r,c-=r,f-=r),!(o>f)){if(e.color!==h){var l=e.color;t.fillStyle=l,h=l}t.fillRect(a,o,c-a+1,f-o+1)}}},t}(),It=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.g=new Ot,s}return r(i,t),i.prototype.renderer=function(t,i){this._makeValid();var n=this._series.options(),s={bars:this._items,barSpacing:this._model.timeScale().barSpacing(),wickVisible:n.wickVisible,borderVisible:n.borderVisible,visibleRange:this._itemsVisibleRange};return this.g.setData(s),this.g},i.prototype._createRawItem=function(t,i,n){var s=n.barStyle(t);return u(u({},this._createDefaultItem(t,i,n)),{color:s.barColor,wickColor:s.barWickColor,borderColor:s.barBorderColor})},i}(Ft),Rt=function(){function t(){this.m=null,this.zt=[]}return t.prototype.setData=function(t){this.m=t,this.zt=[]},t.prototype.draw=function(t,i,n,s){if(null!==this.m&&0!==this.m.items.length&&null!==this.m.visibleRange){this.zt.length||this.Vt(i);for(var h=Math.round(this.m.histogramBase*i),r=Math.max(1,Math.floor(i)),u=this.m.visibleRange.from;u<this.m.visibleRange.to;u++){var e=this.m.items[u],o=this.zt[u-this.m.visibleRange.from],f=Math.round(e.y*i);t.fillStyle=e.color,t.fillRect(o.left,f,o.right-o.left+1,h-f+r)}}},t.prototype.Vt=function(t){if(null!==this.m&&0!==this.m.items.length&&null!==this.m.visibleRange){var i=Math.ceil(this.m.barSpacing*t)<=3?0:Math.max(1,Math.floor(t)),n=Math.round(this.m.barSpacing*t)-i;this.zt=new Array(this.m.visibleRange.to-this.m.visibleRange.from);for(var s=this.m.visibleRange.from;s<this.m.visibleRange.to;s++){var h,r=this.m.items[s],u=Math.round(r.x*t),e=void 0,o=void 0;if(n%2)e=u-(h=(n-1)/2),o=u+h;else e=u-(h=n/2),o=u+h-1;this.zt[s-this.m.visibleRange.from]={left:e,right:o,roundedCenter:u,center:r.x*t,time:r.time}}for(s=this.m.visibleRange.from+1;s<this.m.visibleRange.to;s++){var f=this.zt[s-this.m.visibleRange.from],a=this.zt[s-this.m.visibleRange.from-1];f.time===a.time+1&&(f.left-a.right!==i+1&&(a.roundedCenter>a.center?a.right=f.left-i-1:f.left=a.right+i+1))}var c=Math.ceil(this.m.barSpacing*t);for(s=this.m.visibleRange.from;s<this.m.visibleRange.to;s++){(f=this.zt[s-this.m.visibleRange.from]).right<f.left&&(f.right=f.left);var l=f.right-f.left+1;c=Math.min(l,c)}if(i>0&&c<4)for(s=this.m.visibleRange.from;s<this.m.visibleRange.to;s++){(l=(f=this.zt[s-this.m.visibleRange.from]).right-f.left+1)>c&&(f.roundedCenter>f.center?f.right-=1:f.left+=1)}}else this.zt=[]},t}();function Wt(t){return{items:[],barSpacing:t,histogramBase:NaN,visibleRange:null}}var Ut,jt=function(t){function i(i,n){var s=t.call(this,i,n,!1)||this;return s.i=new y,s.Ft=Wt(0),s.Pt=new Int32Array(0),s.g=new Rt,s}return r(i,t),i.prototype.renderer=function(t,i){return this._makeValid(),this.i},i.prototype._fillRawPoints=function(){var t=this,i=this._model.timeScale().barSpacing(),n=this._series.palette();this.Ft=Wt(i);var s=this._series.barFunction();this.Pt=new Int32Array(this._series.bars().size());var h=0,r=0,u=0,e=this._series.options().color;this._series.bars().each((function(i,o){var f=s(o.value),a=o.value[4],c=function(t,i,n){return{time:t,price:i,x:NaN,y:NaN,color:n}}(i,f,null!=a?n.colorByIndex(a):e),l=null==a?0:a+1;return++r<t.Ft.items.length?t.Ft.items[r]=c:t.Ft.items.push(c),t._items[u++]={time:i,x:0},t.Pt[h++]=l,!1})),this.g.setData(this.Ft),this.i.setRenderers([this.g])},i.prototype._clearVisibleRange=function(){t.prototype._clearVisibleRange.call(this),this.Ft.visibleRange=null},i.prototype._convertToCoordinates=function(t,i,n){if(null!==this._itemsVisibleRange){var s=i.barSpacing(),h=a(i.visibleBars()),r=t.priceToCoordinate(this._series.options().base,n);i.indexesToCoordinates(this.Ft.items),t.pointsArrayToCoordinates(this.Ft.items,n),this.Ft.histogramBase=r,this.Ft.visibleRange=Et(this.Ft.items,h,!1),this.Ft.barSpacing=s,this.g.setData(this.Ft)}},i}(Lt),qt=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Dt=new xt,s}return r(i,t),i.prototype.renderer=function(t,i){this._makeValid();var n=this._series.options(),s={items:this._items,lineColor:n.color,lineStyle:n.lineStyle,lineType:n.lineType,lineWidth:n.lineWidth,visibleRange:this._itemsVisibleRange};return this.Dt.setData(s),this.Dt},i.prototype._createRawItem=function(t,i){return this._createRawItemBase(t,i)},i}(At),Ht=/[2-9]/g,Yt=function(){function t(t){void 0===t&&(t=50),this.Ot=0,this.It=1,this.Rt=1,this.Wt={},this.Ut={},this.jt=t}return t.prototype.reset=function(){this.Ot=0,this.Ut={},this.It=1,this.Rt=1,this.Wt={}},t.prototype.measureText=function(t,i,n){var s=n||Ht,h=String(i).replace(s,"0");if(this.Ut[h])return this.Ut[h].width;if(this.Ot===this.jt){var r=this.Wt[this.Rt];delete this.Wt[this.Rt],delete this.Ut[r],this.Rt++,this.Ot--}var u=t.measureText(h).width;return 0===u&&i.length?0:(this.Ut[h]={width:u,tick:this.It},this.Wt[this.It]=h,this.Ot++,this.It++,u)},t}(),_t=function(){function t(t){this.qt=null,this.Ht=null,this.Yt="right",this._t=0,this.Kt=t}return t.prototype.setParams=function(t,i,n,s){this.qt=t,this.Ht=i,this._t=n,this.Yt=s},t.prototype.draw=function(t,i){null!==this.Ht&&null!==this.qt&&this.qt.draw(t,this.Ht,this.Kt,this._t,this.Yt,i)},t}(),Kt=function(){function t(t,i,n){this.$t=t,this.Kt=new Yt(50),this.Xt=i,this.l=n,this.Zt=-1,this.g=new _t(this.Kt)}return t.prototype.update=function(){this.$t.update()},t.prototype.renderer=function(t,i){var n=this.l.paneForSource(this.Xt);if(null===n)return null;if(null===this.Xt.priceScale())return null;var s=n.priceScalePosition();if("overlay"===s)return null;var h=this.l.priceAxisRendererOptions();return h.fontSize!==this.Zt&&(this.Zt=h.fontSize,this.Kt.reset()),this.g.setParams(this.$t.paneRenderer(),h,i,s),this.g},t}(),$t=function(){function t(){this.m=null}return t.prototype.setData=function(t){this.m=t},t.prototype.draw=function(t,i,h,r){if(null!==this.m&&!1!==this.m.visible){var u=Math.round(this.m.y*i);if(!(u<0||u>Math.ceil(this.m.height*i))){var e=Math.ceil(this.m.width*i);t.lineCap="butt",t.strokeStyle=this.m.color,t.lineWidth=Math.floor(this.m.lineWidth*i),n(t,this.m.lineStyle),s(t,u,0,e)}}},t}(),Xt=function(){function t(t){this._lineRendererData={width:0,height:0,y:0,color:"rgba(0, 0, 0, 0)",lineWidth:1,lineStyle:0,visible:!1},this._lineRenderer=new $t,this.o=!0,this._series=t,this._model=t.model(),this._lineRenderer.setData(this._lineRendererData)}return t.prototype.update=function(){this.o=!0},t.prototype.renderer=function(t,i){return this.o&&(this._updateImpl(t,i),this.o=!1),this._lineRenderer},t}(),Zt=function(t){function i(i){return t.call(this,i)||this}return r(i,t),i.prototype._updateImpl=function(t,i){this._lineRendererData.visible=!1;var n=this._series.priceScale(),s=n.mode().mode;if(2===s||3===s){var h=this._series.options();if(h.baseLineVisible){var r=this._series.firstValue();null!==r&&(this._lineRendererData.visible=!0,this._lineRendererData.y=n.priceToCoordinate(r.value,r.value),this._lineRendererData.width=i,this._lineRendererData.height=t,this._lineRendererData.color=h.baseLineColor,this._lineRendererData.lineWidth=h.baseLineWidth,this._lineRendererData.lineStyle=h.baseLineStyle)}}},i}(Xt);function Jt(t,i,n){return void 0!==n?n+=" ":n="",void 0===i&&(i="'Trebuchet MS', Roboto, Ubuntu, sans-serif"),""+n+t+"px "+i}function Gt(t,i){return ct(Math.min(Math.max(t,12),30)*i)}function Qt(t,i){switch(t){case"arrowDown":case"arrowUp":return Gt(i,1);case"circle":return Gt(i,.8);case"square":return Gt(i,.7)}}function ti(t){return at(Gt(t,1))}function ii(t){return Math.max(Gt(t,.1),3)}function ni(t,i,n,s,h){var r=Qt("square",n),u=(r-1)/2,e=t-u,o=i-u;return s>=e&&s<=e+r&&h>=o&&h<=o+r}function si(t,i,n,s,h){var r=(Qt("arrowUp",h)-1)/2,u=(ct(h/2)-1)/2;i.beginPath(),t?(i.moveTo(n-r,s),i.lineTo(n,s-r),i.lineTo(n+r,s),i.lineTo(n+u,s),i.lineTo(n+u,s+r),i.lineTo(n-u,s+r),i.lineTo(n-u,s)):(i.moveTo(n-r,s),i.lineTo(n,s+r),i.lineTo(n+r,s),i.lineTo(n+u,s),i.lineTo(n+u,s-r),i.lineTo(n-u,s-r),i.lineTo(n-u,s)),i.fill()}function hi(t,i,n,s,h,r){return ni(i,n,s,h,r)}!function(t){t[t.MinShapeSize=12]="MinShapeSize",t[t.MaxShapeSize=30]="MaxShapeSize",t[t.MinShapeMargin=3]="MinShapeMargin"}(Ut||(Ut={}));var ri,ui=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.m=null,i.Kt=new Yt,i.Zt=-1,i.Jt="",i.Gt="",i}return r(i,t),i.prototype.setData=function(t){this.m=t},i.prototype.setParams=function(t,i){this.Zt===t&&this.Jt===i||(this.Zt=t,this.Jt=i,this.Gt=Jt(t,i),this.Kt.reset())},i.prototype.hitTest=function(t,i){if(null===this.m||null===this.m.visibleRange)return null;for(var n=this.m.visibleRange.from;n<this.m.visibleRange.to;n++){var s=this.m.items[n];if(oi(s,t,i))return{hitTestData:s.internalId,externalId:s.externalId}}return null},i.prototype._drawImpl=function(t,i,n){if(null!==this.m&&null!==this.m.visibleRange){t.textBaseline="middle",t.font=this.Gt;for(var s=this.m.visibleRange.from;s<this.m.visibleRange.to;s++){var h=this.m.items[s];void 0!==h.text&&(h.text.width=this.Kt.measureText(t,h.text.content),h.text.height=this.Zt,h.text.x=h.text.x-h.text.width/2),ei(h,t)}}},i}(k);function ei(t,i){i.fillStyle=t.color,void 0!==t.text&&function(t,i){t.fillText(i.content,i.x,i.y)}(i,t.text),function(t,i){if(0===t.size)return;switch(t.shape){case"arrowDown":return void si(!1,i,t.x,t.y,t.size);case"arrowUp":return void si(!0,i,t.x,t.y,t.size);case"circle":return void function(t,i,n,s){var h=(Qt("circle",s)-1)/2;t.beginPath(),t.arc(i,n,h,0,2*Math.PI,!1),t.fill()}(i,t.x,t.y,t.size);case"square":return void function(t,i,n,s){var h=Qt("square",s),r=(h-1)/2,u=i-r,e=n-r;t.fillRect(u,e,h,h)}(i,t.x,t.y,t.size)}t.shape}(t,i)}function oi(t,i,n){return!(void 0===t.text||!function(t,i,n){var s=t.height/2;return i>=t.x&&i<=t.x+t.width&&n>=t.y-s&&n<=t.y+s}(t.text,i,n))||function(t,i,n){if(0===t.size)return!1;switch(t.shape){case"arrowDown":case"arrowUp":return hi(0,t.x,t.y,t.size,i,n);case"circle":return function(t,i,n,s,h){var r=2+Qt("circle",n)/2,u=t-s,e=i-h;return Math.sqrt(u*u+e*e)<=r}(t.x,t.y,t.size,i,n);case"square":return ni(t.x,t.y,t.size,i,n)}t.shape}(t,i,n)}function fi(t,i,n,s,h,r,u,e,o){var f=v(n)?n:n.close,a=v(n)?n:n.high,c=v(n)?n:n.low,l=v(i.size)?Math.max(i.size,0):1,d=ti(e.barSpacing())*l,w=d/2;switch(t.size=d,i.position){case"inBar":return t.y=u.priceToCoordinate(f,o),void(void 0!==t.text&&(t.text.y=t.y+w+r+.6*h));case"aboveBar":return t.y=u.priceToCoordinate(a,o)-w-s.aboveBar,void 0!==t.text&&(t.text.y=t.y-w-.6*h,s.aboveBar+=1.2*h),void(s.aboveBar+=d+r);case"belowBar":return t.y=u.priceToCoordinate(c,o)+w+s.belowBar,void 0!==t.text&&(t.text.y=t.y+w+r+.6*h,s.belowBar+=1.2*h),void(s.belowBar+=d+r)}i.position}!function(t){t[t.TextMargin=.1]="TextMargin"}(ri||(ri={}));var ai,ci=function(){function t(t,i){this.o=!0,this.Qt=!0,this.ti=!0,this.ii=null,this.g=new ui,this.ni=t,this.F=i,this.m={items:[],visibleRange:null}}return t.prototype.update=function(t){this.o=!0,this.ti=!0,"data"===t&&(this.Qt=!0)},t.prototype.renderer=function(t,i,n){this.o&&this._makeValid();var s=this.F.options().layout;return this.g.setParams(s.fontSize,s.fontFamily),this.g.setData(this.m),this.g},t.prototype.autoScaleMargins=function(){if(this.ti){if(this.ni.indexedMarkers().length>0){var t=this.F.timeScale().barSpacing(),i=ii(t),n=1.5*ti(t)+2*i;this.ii={above:n,below:n}}else this.ii=null;this.ti=!1}return this.ii},t.prototype._makeValid=function(){var t=this.ni.priceScale(),i=this.F.timeScale(),n=this.ni.indexedMarkers();this.Qt&&(this.m.items=n.map((function(t){return{time:t.time,x:0,y:0,size:0,shape:t.shape,color:t.color,internalId:t.internalId,externalId:t.id,text:void 0}})),this.Qt=!1);var s=this.F.options().layout;this.m.visibleRange=null;var h=i.visibleBars();if(null!==h){var r=this.ni.firstValue();if(null!==r&&0!==this.m.items.length){var u=NaN,e=ii(i.barSpacing()),o={aboveBar:e,belowBar:e};this.m.visibleRange=Et(this.m.items,h,!0);for(var f=this.m.visibleRange.from;f<this.m.visibleRange.to;f++){var a=n[f];a.time!==u&&(o.aboveBar=e,o.belowBar=e,u=a.time);var c=this.m.items[f];c.x=i.indexToCoordinate(a.time),void 0!==a.text&&a.text.length>0&&(c.text={content:a.text,x:c.x,y:0,width:0,height:0});var l=this.ni.dataAt(a.time);null!==l&&fi(c,a,l,o,s.fontSize,e,t,i,r.value)}this.o=!1}}},t}(),li=function(t){function i(i){return t.call(this,i)||this}return r(i,t),i.prototype._updateImpl=function(t,i){var n=this._lineRendererData;n.visible=!1;var s=this._series.options();if(s.priceLineVisible){var h=this._series.lastValueData(void 0,0===s.priceLineSource);h.noData||(n.visible=!0,n.y=h.coordinate,n.color=this._series.priceLineColor(h.color),n.width=i,n.height=t,n.lineWidth=s.priceLineWidth,n.lineStyle=s.priceLineStyle)}},i}(Xt),vi=function(t){function i(i,n){var s=t.call(this)||this;return s.k=i,s.m=n,s}return r(i,t),i.prototype._getSource=function(){return this.k},i.prototype._getData=function(){return this.m},i.prototype._updateRendererData=function(t,i,n){t.visible=!1,i.visible=!1;var s=this.k.options(),h=s.lastValueVisible,r=""!==this.k.title(),u=0===s.seriesLastValueMode,e=this.k.lastValueData(void 0,!1);e.noData||(h&&(t.text=this._axisText(e,h,u),t.visible=0!==t.text.length),(r||u)&&(i.text=this._paneText(e,h,r,u),i.visible=i.text.length>0),n.background=this.k.priceLineColor(e.color),n.color=R(n.background),n.coordinate=e.coordinate,i.borderColor=this.k.model().options().layout.backgroundColor,t.borderColor=n.background)},i.prototype._paneText=function(t,i,n,s){var h="",r=this.k.title();return n&&0!==r.length&&(h+=r+" "),i&&s&&(h+=this.k.priceScale().isPercentage()?t.formattedPriceAbsolute:t.formattedPricePercentage),h.trim()},i.prototype._axisText=function(t,i,n){return i?n?this.k.priceScale().isPercentage()?t.formattedPricePercentage:t.formattedPriceAbsolute:t.text:""},i}(Y),di=function(t){function i(i,n){var s=t.call(this,i)||this;return s.si=n,s}return r(i,t),i.prototype._updateImpl=function(t,i){var n=this._lineRendererData;n.visible=!1;var s=this.si.yCoord();if(null!==s){var h=this.si.options();n.visible=!0,n.y=s,n.color=h.color,n.width=i,n.height=t,n.lineWidth=h.lineWidth,n.lineStyle=h.lineStyle}},i}(Xt),wi=function(t){function i(i,n){var s=t.call(this)||this;return s.ni=i,s.si=n,s}return r(i,t),i.prototype._updateRendererData=function(t,i,n){t.visible=!1,i.visible=!1;var s=this.si.options();if(s.axisLabelVisible){var h=this.si.yCoord();null!==h&&(t.text=this.ni.priceScale().formatPriceAbsolute(s.price),t.visible=!0,n.background=s.color,n.color=R(s.color),n.coordinate=h)}},i}(Y),Mi=function(){function t(t,i){this.ni=t,this.K=i,this.hi=new di(t,this),this.$t=new wi(t,this)}return t.prototype.applyOptions=function(t){l(this.K,t),this.update(),this.ni.model().lightUpdate()},t.prototype.options=function(){return this.K},t.prototype.paneView=function(){return this.hi},t.prototype.priceAxisView=function(){return this.$t},t.prototype.update=function(){this.hi.update(),this.$t.update()},t.prototype.yCoord=function(){var t=this.ni,i=t.priceScale();if(t.model().timeScale().isEmpty()||i.isEmpty())return null;var n=t.firstValue();return null===n?null:i.priceToCoordinate(this.K.price,n.value)},t}(),bi=function(){function t(){this.ri=0,this.ui=new Map,this.ei=new Map}return t.prototype.colorByIndex=function(t){return f(this.ei.get(t))},t.prototype.addColor=function(t){var i=this.ui.get(t);return void 0===i&&(i=this.ri++,this.ui.set(t,i),this.ei.set(i,t)),i},t.prototype.clear=function(){this.ri=0,this.ui.clear(),this.ei.clear()},t.prototype.size=function(){return this.ei.size},t}(),mi={barColor:"",barBorderColor:"",barWickColor:""},pi=function(){function t(t){this.ni=t}return t.prototype.barStyle=function(t,i){var n=this.ni.seriesType(),s=this.ni.options();switch(n){case"Line":return this.oi(s);case"Area":return this.fi(s);case"Bar":return this.ai(s,t,i);case"Candlestick":return this.ci(s,t,i);case"Histogram":return this.li(s,t,i)}throw new Error("Unknown chart style")},t.prototype.ai=function(t,i,n){var s=u({},mi),h=t.upColor,r=t.downColor,e=h,o=r,f=a(this.vi(i,n)),l=c(f.value[0])<=c(f.value[3]);return s.barColor=l?h:r,s.barBorderColor=l?e:o,s},t.prototype.ci=function(t,i,n){var s=u({},mi),h=t.upColor,r=t.downColor,e=t.borderUpColor,o=t.borderDownColor,f=t.wickUpColor,l=t.wickDownColor,v=a(this.vi(i,n)),d=c(v.value[0])<=c(v.value[3]);return s.barColor=d?h:r,s.barBorderColor=d?e:o,s.barWickColor=d?f:l,s},t.prototype.fi=function(t){return u(u({},mi),{barColor:t.lineColor})},t.prototype.oi=function(t){return u(u({},mi),{barColor:t.color})},t.prototype.li=function(t,i,n){var s=u({},mi),h=a(this.vi(i,n)).value[4];if(null!=h){var r=a(this.ni.palette());s.barColor=r.colorByIndex(h)}else s.barColor=t.color;return s},t.prototype.di=function(){return this.ni.bars()},t.prototype.vi=function(t,i){return void 0!==i?i.value:this.di().valueAt(t)},t}();!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.Exact=0]="Exact",t[t.NearestRight=1]="NearestRight"}(ai||(ai={}));var gi,yi=function(){function t(t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.wi=[],this.Mi=0,this.bi=0,this.mi=!1,this.pi=new Map,this.gi=new Map,this.yi=new Map,this.ki=t||new Map,this.Ni=i}return t.prototype.clear=function(){this.wi=[],this.Mi=0,this.bi=0,this.mi=!1,this.pi.clear(),this.gi.clear(),this.yi.clear()},t.prototype.first=function(){return this.size()>0?this.wi[this.Mi]:null},t.prototype.last=function(){return this.size()>0?this.wi[this.bi-1]:null},t.prototype.firstIndex=function(){return this.size()>0?this.xi(this.Mi):null},t.prototype.lastIndex=function(){return this.size()>0?this.xi(this.bi-1):null},t.prototype.size=function(){return this.bi-this.Mi},t.prototype.isEmpty=function(){return 0===this.size()},t.prototype.contains=function(t){return null!==this.Si(t,0)},t.prototype.valueAt=function(t){return this.search(t)},t.prototype.add=function(t,i,n){if(this.mi)return!1;var s={index:t,value:n,time:i},h=this.Si(t,0);return this.gi.clear(),this.yi.clear(),null===h?(this.wi.splice(this.Di(t),0,s),this.Mi=0,this.bi=this.wi.length,!0):(this.wi[h]=s,!1)},t.prototype.search=function(t,i,n){void 0===i&&(i=0);var s=this.Si(t,i,n);if(null===s)return null;var h=this.Ci(s);return{index:this.xi(s),time:h.time,value:h.value}},t.prototype.each=function(t){for(var i=this.Mi;i<this.bi;++i){if(t(this.xi(i),this.Ci(i)))break}},t.prototype.range=function(i,n){var s=new t(this.ki,this.Ni);return s.wi=this.wi,s.Mi=this.Di(i),s.bi=this.Ti(n),s.mi=!0,s},t.prototype.minMaxOnRangeCached=function(t,i,n){if(this.isEmpty())return null;for(var s=null,h=0,r=n;h<r.length;h++){var u=r[h];s=ki(s,this.Ei(t,i,u))}return s},t.prototype.merge=function(t){return this.mi||0===t.length?null:this.isEmpty()||t[t.length-1].index<this.wi[0].index?this.Li(t):t[0].index>this.wi[this.wi.length-1].index?this.Ai(t):1===t.length&&t[0].index===this.wi[this.wi.length-1].index?(this.Bi(t[0]),t[0]):this.zi(t)},t.prototype.remove=function(t){if(this.mi)return null;var i=this.Si(t,1);if(null===i)return null;var n=this.wi.splice(i);return this.bi=this.wi.length,this.pi.clear(),this.gi.clear(),this.yi.clear(),n.length>0?n[0]:null},t.prototype.xi=function(t){return this.wi[t].index},t.prototype.Ci=function(t){return this.wi[t]},t.prototype.Si=function(t,i,n){var s=this.Vi(t);if(null===s&&0!==i)switch(i){case-1:return this.Fi(t,n);case 1:return this.Pi(t,n);default:throw new TypeError("Unknown search mode")}if(!n||null===s||0===i)return s;switch(i){case-1:return this.Oi(s);case 1:return this.Ii(s);default:throw new TypeError("Unknown search mode")}},t.prototype.Ii=function(t){for(var i=a(this.Ni);t<this.bi&&i(this.Ci(t).value);)t+=1;return t===this.bi?null:t},t.prototype.Oi=function(t){for(var i=a(this.Ni);t>=this.Mi&&i(this.Ci(t).value);)t-=1;return t<this.Mi?null:t},t.prototype.Fi=function(t,i){var n=this.Di(t);n>this.Mi&&(n-=1);var s=n!==this.bi&&this.xi(n)<t?n:null;return i&&null!==s?this.Oi(s):s},t.prototype.Pi=function(t,i){var n=this.Ti(t),s=n!==this.bi&&t<this.xi(n)?n:null;return i&&null!==s?this.Ii(s):s},t.prototype.Vi=function(t){var i=this.Di(t);return i===this.bi||t<this.wi[i].index?null:i},t.prototype.Di=function(t){return St(this.wi,t,(function(t,i){return t.index<i}),this.Mi,this.bi)},t.prototype.Ti=function(t){return Dt(this.wi,t,(function(t,i){return i.index>t}),this.Mi,this.bi)},t.prototype.Ri=function(t,i,n){var s=null,h=this.ki.get(n.name);if(void 0===h)throw new Error('Plot "'+n.name+'" is not registered');for(var r=t;r<i;r++){var u=h(this.wi[r].value);null==u||Number.isNaN(u)||(null===s?s={min:u,max:u}:(u<s.min&&(s.min=u),u>s.max&&(s.max=u)))}return s},t.prototype.Wi=function(t){var i=Math.floor(t.index/30);this.pi.forEach((function(t){return t.delete(i)}))},t.prototype.Li=function(t){return o(!this.mi,"collection should not be readonly"),o(0!==t.length,"plotRows should not be empty"),this.gi.clear(),this.yi.clear(),this.pi.clear(),this.wi=t.concat(this.wi),this.Mi=0,this.bi=this.wi.length,t[0]},t.prototype.Ai=function(t){return o(!this.mi,"collection should not be readonly"),o(0!==t.length,"plotRows should not be empty"),this.gi.clear(),this.yi.clear(),this.pi.clear(),this.wi=this.wi.concat(t),this.Mi=0,this.bi=this.wi.length,t[0]},t.prototype.Bi=function(t){o(!this.isEmpty(),"plot list should not be empty"),o(this.wi[this.bi-1].index===t.index,"last row index should match new row index"),this.Wi(t),this.gi.delete(t.index),this.yi.delete(t.index),this.wi[this.bi-1]=t},t.prototype.zi=function(t){return o(0!==t.length,"plot rows should not be empty"),this.gi.clear(),this.yi.clear(),this.pi.clear(),this.wi=function(t,i){var n=function(t,i){var n=t.length,s=i.length,h=n+s,r=0,u=0;for(;r<n&&u<s;)t[r].index<i[u].index?r++:t[r].index>i[u].index?u++:(r++,u++,h--);return h}(t,i),s=new Array(n),h=0,r=0,u=t.length,e=i.length,o=0;for(;h<u&&r<e;)t[h].index<i[r].index?(s[o]=t[h],h++):t[h].index>i[r].index?(s[o]=i[r],r++):(s[o]=i[r],h++,r++),o++;for(;h<u;)s[o]=t[h],h++,o++;for(;r<e;)s[o]=i[r],r++,o++;return s}(this.wi,t),this.Mi=0,this.bi=this.wi.length,t[0]},t.prototype.Ei=function(t,i,n){if(this.isEmpty())return null;var s=null,h=a(this.firstIndex()),r=a(this.lastIndex()),u=t-n.offset,e=i-n.offset;u=Math.max(u,h),e=Math.min(e,r);var o=30*Math.ceil(u/30),f=Math.max(o,30*Math.floor(e/30)),c=this.Di(u),l=this.Ti(Math.min(e,o,i));s=ki(s,this.Ri(c,l,n));var v=this.pi.get(n.name);void 0===v&&(v=new Map,this.pi.set(n.name,v));for(var d=Math.max(o+1,u);d<f;d+=30){var w=Math.floor(d/30),M=v.get(w);if(void 0===M){var b=this.Di(30*w),m=this.Ti(30*(w+1)-1);M=this.Ri(b,m,n),v.set(w,M)}s=ki(s,M)}c=this.Di(f),l=this.Ti(e);return s=ki(s,this.Ri(c,l,n))},t}();function ki(t,i){return null===t?i:null===i?t:{min:Math.min(t.min,i.min),max:Math.max(t.max,i.max)}}!function(t){t[t.Open=0]="Open",t[t.High=1]="High",t[t.Low=2]="Low",t[t.Close=3]="Close",t[t.Color=4]="Color"}(gi||(gi={}));var Ni={open:function(t){return t[0]},high:function(t){return t[1]},low:function(t){return t[2]},close:function(t){return t[3]},hl2:function(t){return(t[1]+t[2])/2},hlc3:function(t){return(t[1]+t[2]+t[3])/3},ohlc4:function(t){return(t[0]+t[1]+t[2]+t[3])/4}},xi=["open","high","low","close","hl2","hlc3","ohlc4"];function Si(t){return Ni[t]}var Di,Ci=function(){function t(){var t;this.Ui=new yi((t=new Map,xi.forEach((function(i,n){t.set(i,Si(i))})),t))}return t.prototype.bars=function(){return this.Ui},t.prototype.size=function(){return this.Ui.size()},t.prototype.each=function(t){this.Ui.each(t)},t.prototype.clear=function(){this.Ui.clear()},t.prototype.isEmpty=function(){return this.Ui.isEmpty()},t.prototype.first=function(){return this.Ui.first()},t.prototype.last=function(){return this.Ui.last()},t.prototype.search=function(t,i){return this.bars().search(t,i)},t.prototype.valueAt=function(t){return this.search(t)},t}(),Ti=function(t){function i(i,n,s){var h=t.call(this,i)||this;h.m=new Ci,h.hi=new li(h),h.ji=[],h.qi=new Zt(h),h.Hi=!1,h.Yi=null,h._i=new bi,h.Ki=[],h.$i=[],h.K=n,h.Xi=s;var r=new vi(h,{model:i});return h.U=[r],h.Zi=new Kt(r,h,i),h.Ji(),h.Gi(),h.Qi=h.barFunction(),h.tn(),h}return r(i,t),i.prototype.destroy=function(){},i.prototype.endOfData=function(){return this.Hi},i.prototype.priceLineColor=function(t){return this.K.priceLineColor||t},i.prototype.lastValueData=function(t,i,n){var s={noData:!0},h=this.priceScale();if(this.model().timeScale().isEmpty()||h.isEmpty()||this.data().isEmpty())return s;var r,u,e=this.model().timeScale().visibleBars(),o=this.firstValue();if(null===e||null===o)return s;if(i){var f=this.data().bars().last();if(null===f)return s;r=f,u=f.index}else{var a=this.data().bars().search(e.lastBar(),-1);if(null===a)return s;if(null===(r=this.data().bars().valueAt(a.index)))return s;u=a.index}var c=void 0!==t?r.value[t]:this.Qi(r.value),l=this.barColorer().barStyle(u,{value:r}),v=h.priceToCoordinate(c,o.value);return{noData:!1,price:n?c:void 0,text:h.formatPrice(c,o.value),formattedPriceAbsolute:h.formatPriceAbsolute(c),formattedPricePercentage:h.formatPricePercentage(c,o.value),color:l.barColor,coordinate:v,index:u}},i.prototype.data=function(){return this.m},i.prototype.barColorer=function(){return null!==this.Yi||(this.Yi=new pi(this)),this.Yi},i.prototype.options=function(){return this.K},i.prototype.applyOptions=function(t){var i=this.K.overlay;l(this.K,t),this.K.overlay=i,i&&null!==this._priceScale&&void 0!==t.scaleMargins&&this._priceScale.applyOptions({scaleMargins:this.K.scaleMargins}),void 0!==t.priceFormat&&this.Ji(),this.model().updateSource(this)},i.prototype.clearData=function(){this.m.clear(),this._i.clear(),this.tn()},i.prototype.updateData=function(t,i){void 0===i&&(i=!1),i&&this.m.clear(),this.m.bars().merge(t),this.in(),this.J.update("data"),this.$.update("data");var n=this.model().paneForSource(this);this.model().recalculatePane(n),this.model().updateSource(this),this.model().updateCrosshair(),this.model().lightUpdate()},i.prototype.setMarkers=function(t){this.Ki=t.map((function(t){return u({},t)})),this.in();var i=this.model().paneForSource(this);this.$.update("data"),this.model().recalculatePane(i),this.model().updateSource(this),this.model().updateCrosshair(),this.model().lightUpdate()},i.prototype.markers=function(){return this.Ki},i.prototype.indexedMarkers=function(){return this.$i},i.prototype.createPriceLine=function(t){var i=new Mi(this,t);return this.ji.push(i),this.model().updateSource(this),i},i.prototype.removePriceLine=function(t){var i=this.ji.indexOf(t);-1!==i&&this.ji.splice(i,1),this.model().updateSource(this)},i.prototype.palette=function(){return this._i},i.prototype.seriesType=function(){return this.Xi},i.prototype.firstValue=function(){var t=this.firstBar();return null===t?null:{value:this.Qi(t.value),timePoint:t.time}},i.prototype.firstBar=function(){var t=this.model().timeScale().visibleBars();if(null===t)return null;var i=t.firstBar();return this.data().search(i,1)},i.prototype.bars=function(){return this.m.bars()},i.prototype.nearestIndex=function(t,i){var n=this.nearestData(t,i);return n?n.index:null},i.prototype.nearestData=function(t,i){return d(t)?this.data().search(t,i):null},i.prototype.dataAt=function(t){var i=this.data().valueAt(t);return null===i?null:"Bar"===this.Xi||"Candlestick"===this.Xi?{open:i.value[0],high:i.value[1],low:i.value[2],close:i.value[3]}:this.barFunction()(i.value)},i.prototype.paneViews=function(){var t=[];this.priceScale()===this.model().mainPriceScale()&&t.push(this.qi);for(var i=0,n=this.ji;i<n.length;i++){var s=n[i];t.push(s.paneView())}return t.push(this.J),t.push(this.hi),t.push(this.Zi),t.push(this.$),t},i.prototype.priceAxisViews=function(t,i){for(var n=e(this.U),s=0,h=this.ji;s<h.length;s++){var r=h[s];n.push(r.priceAxisView())}return n},i.prototype.autoscaleInfo=function(t,i){if(!d(t)||!d(i)||this.data().isEmpty())return null;var n,s="Line"===this.Xi||"Area"===this.Xi||"Histogram"===this.Xi?"close":null,h=null!==(n=null!==s?this.data().bars().minMaxOnRangeCached(t,i,[{name:s,offset:0}]):this.data().bars().minMaxOnRangeCached(t,i,[{name:"low",offset:0},{name:"high",offset:0}]))?new ut(n.min,n.max):null;if("Histogram"===this.seriesType()){var r=this.K.base,u=new ut(r,r);h=null!==h?h.merge(u):u}return{priceRange:h,margins:this.$.autoScaleMargins()}},i.prototype.minMove=function(){return this.K.priceFormat.minMove},i.prototype.formatter=function(){return this.nn},i.prototype.barFunction=function(){return this.Qi},i.prototype.updateAllViews=function(){this.J.update(),this.$.update();for(var t=0,i=this.U;t<i.length;t++){i[t].update()}for(var n=0,s=this.ji;n<s.length;n++){s[n].update()}this.hi.update(),this.qi.update()},i.prototype.setPriceScale=function(t){this._priceScale!==t&&(this._priceScale=t)},i.prototype.priceScale=function(){return a(this._priceScale)},i.prototype.markerDataAtIndex=function(t){if(!(("Line"===this.Xi||"Area"===this.Xi)&&this.K.crosshairMarkerVisible))return null;var i=this.m.valueAt(t);return null===i?null:{price:this.Qi(i.value),radius:this.sn()}},i.prototype.title=function(){return this.K.title},i.prototype.sn=function(){switch(this.Xi){case"Line":case"Area":return this.K.crosshairMarkerRadius}return 0},i.prototype.Ji=function(){switch(this.K.priceFormat.type){case"custom":this.nn={format:this.K.priceFormat.formatter};break;case"volume":this.nn=new yt(this.K.priceFormat.precision);break;case"percent":this.nn=new st(this.K.priceFormat.precision);break;default:var t=Math.pow(10,this.K.priceFormat.precision);this.nn=new nt(t,this.K.priceFormat.minMove*t,!1,void 0)}null!==this._priceScale&&this._priceScale.updateFormatter()},i.prototype.Gi=function(){this.Qi=Si("close")},i.prototype.in=function(){var t=this.model().timeScale().points();this.$i=this.Ki.map((function(i,n){return{time:a(t.indexOf(i.time.timestamp,!0)),position:i.position,shape:i.shape,color:i.color,id:i.id,internalId:n,text:i.text,size:i.size}}))},i.prototype.tn=function(){switch(this.$=new ci(this,this.model()),this.Xi){case"Bar":this.J=new Pt(this,this.model());break;case"Candlestick":this.J=new It(this,this.model());break;case"Line":this.J=new qt(this,this.model());break;case"Area":this.J=new Bt(this,this.model());break;case"Histogram":this.J=new jt(this,this.model());break;default:throw Error("Unknown chart style assigned: "+this.Xi)}},i}(rt);function Ei(t){return t.slice().sort((function(t,i){return a(t.zorder())-a(i.zorder())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(Di||(Di={}));var Li,Ai,Bi=new st,zi=new nt(100,1),Vi=function(){function t(t,i,n){this.hn=0,this.rn=null,this.un=new ht,this.en=null,this.on=null,this.fn=new ht,this.an={isValid:!1,visibleBars:null},this.cn=0,this.ln=0,this.vn=new ht,this.dn=new ht,this.wn=[],this.Mn=null,this.bn=!1,this.mn=null,this.pn=null,this.gn=null,this.yn=null,this.nn=zi,this.kn=new ht,this.K=t,this.Nn=i,this.xn=n,this.Sn=new gt(this,100,this.Dn.bind(this),this.Cn.bind(this))}return t.prototype.options=function(){return this.K},t.prototype.applyOptions=function(t){if(l(this.K,t),this.updateFormatter(),void 0!==t.mode&&this.setMode({mode:t.mode}),this.kn.fire(),void 0!==t.scaleMargins){var i=f(t.scaleMargins.top),n=f(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given="+i);if(n<0||n>1||i+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given="+n);if(i+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given="+(i+n));this.Tn(),this.pn=null}},t.prototype.optionsChanged=function(){return this.kn},t.prototype.isAutoScale=function(){return this.K.autoScale},t.prototype.isLog=function(){return 1===this.K.mode},t.prototype.isPercentage=function(){return 2===this.K.mode},t.prototype.isIndexedTo100=function(){return 3===this.K.mode},t.prototype.mode=function(){return{autoScale:this.K.autoScale,isInverted:this.K.invertScale,mode:this.K.mode}},t.prototype.setMode=function(t){var i=this.mode(),n=null;void 0!==t.autoScale&&(this.K.autoScale=t.autoScale),void 0!==t.mode&&(this.K.mode=t.mode,2!==t.mode&&3!==t.mode||(this.K.autoScale=!0),this.an.isValid=!1),1===i.mode&&t.mode!==i.mode&&(!function(t){if(null===t)return!1;var i=bt(t.minValue()),n=bt(t.maxValue());return isFinite(i)&&isFinite(n)}(this.en)?this.K.autoScale=!0:null!==(n=function(t){if(null===t)return null;var i=bt(t.minValue()),n=bt(t.maxValue());return new ut(i,n)}(this.en))&&this.setPriceRange(n)),1===t.mode&&t.mode!==i.mode&&null!==(n=mt(this.en))&&this.setPriceRange(n);var s=i.mode!==this.K.mode;s&&(2===i.mode||this.isPercentage())&&this.updateFormatter(),s&&(3===i.mode||this.isIndexedTo100())&&this.updateFormatter(),void 0!==t.isInverted&&i.isInverted!==t.isInverted&&(this.K.invertScale=t.isInverted,this.En()),this.dn.fire(i,this.mode())},t.prototype.modeChanged=function(){return this.dn},t.prototype.fontSize=function(){return this.Nn.fontSize},t.prototype.height=function(){return this.hn},t.prototype.setHeight=function(t){this.hn!==t&&(this.hn=t,this.Tn(),this.pn=null)},t.prototype.internalHeight=function(){if(this.rn)return this.rn;var t=this.height()-this.Ln()-this.An();return this.rn=t,t},t.prototype.internalHeightChanged=function(){return this.un},t.prototype.priceRange=function(){return this.Bn(),this.en},t.prototype.priceRangeChanged=function(){return this.fn},t.prototype.setPriceRange=function(t,i,n){var s=this.en;(i||null===s&&null!==t||null!==s&&!s.equals(t))&&(this.pn=null,this.en=t,n||this.fn.fire(s,t))},t.prototype.isEmpty=function(){return this.Bn(),0===this.hn||!this.en||this.en.isEmpty()},t.prototype.invertedCoordinate=function(t){return this.isInverted()?t:this.height()-1-t},t.prototype.priceToCoordinate=function(t,i){return this.isPercentage()?t=lt(t,i):this.isIndexedTo100()&&(t=dt(t,i)),this.Cn(t,i)},t.prototype.pointsArrayToCoordinates=function(t,i,n){this.Bn();for(var s=this.An(),h=a(this.priceRange()),r=h.minValue(),u=h.maxValue(),e=this.internalHeight()-1,o=this.isInverted(),f=e/(u-r),c=void 0===n?0:n.from,l=void 0===n?t.length:n.to,v=this.zn(),d=c;d<l;d++){var w=t[d],M=w.price;if(!isNaN(M)){var b=M;null!==v&&(b=v(w.price,i));var m=s+f*(b-r),p=o?m:this.hn-1-m;w.y=p}}},t.prototype.barPricesToCoordinates=function(t,i,n){this.Bn();for(var s=this.An(),h=a(this.priceRange()),r=h.minValue(),u=h.maxValue(),e=this.internalHeight()-1,o=this.isInverted(),f=e/(u-r),c=void 0===n?0:n.from,l=void 0===n?t.length:n.to,v=this.zn(),d=c;d<l;d++){var w=t[d],M=w.open,b=w.high,m=w.low,p=w.close;null!==v&&(M=v(w.open,i),b=v(w.high,i),m=v(w.low,i),p=v(w.close,i));var g=s+f*(M-r),y=o?g:this.hn-1-g;w.openY=y,g=s+f*(b-r),y=o?g:this.hn-1-g,w.highY=y,g=s+f*(m-r),y=o?g:this.hn-1-g,w.lowY=y,g=s+f*(p-r),y=o?g:this.hn-1-g,w.closeY=y}},t.prototype.coordinateToPrice=function(t,i){var n=this.Dn(t,i);return this.logicalToPrice(n,i)},t.prototype.logicalToPrice=function(t,i){var n=t;return this.isPercentage()?n=function(t,i){return i<0&&(t=-t),t/100*i+i}(n,i):this.isIndexedTo100()&&(n=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(n,i)),n},t.prototype.dataSources=function(){return this.wn},t.prototype.orderedSources=function(){if(this.Mn)return this.Mn;for(var t=[],i=0;i<this.wn.length;i++){var n=this.wn[i];null===n.zorder()&&n.setZorder(i+1),t.push(n)}return t=Ei(t),this.Mn=t,this.Mn},t.prototype.hasSeries=function(){return this.bn},t.prototype.addDataSource=function(t){-1===this.wn.indexOf(t)&&(t instanceof Ti&&(this.bn=!0),this.wn.push(t),this.mn=null,this.updateFormatter(),this.invalidateSourcesCache())},t.prototype.removeDataSource=function(t){var i=this.wn.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.wn.splice(i,1),t instanceof Ti&&(this.bn=!1),this.mainSource()||this.setMode({autoScale:!0}),this.mn=null,this.updateFormatter(),this.invalidateSourcesCache()},t.prototype.mainSource=function(){if(null!==this.mn)return this.mn;for(var t=null,i=0;i<this.wn.length;i++){var n=this.wn[i];if(n instanceof Ti){t=n;break}null===t&&n instanceof rt&&(t=n)}return this.mn=t,this.mn},t.prototype.firstValue=function(){for(var t=null,i=0,n=this.wn;i<n.length;i++){var s=n[i];if(s instanceof rt){var h=s.firstValue();if(null===h)continue;(null===t||h.timePoint<t.timePoint)&&(t=h)}}return null===t?null:t.value},t.prototype.isInverted=function(){return this.K.invertScale},t.prototype.marks=function(){return this.pn||(this.Sn.rebuildTickMarks(),this.pn=this.Sn.marks(),this.vn.fire()),this.pn},t.prototype.onMarksChanged=function(){return this.vn},t.prototype.startScale=function(t){this.isPercentage()||this.isIndexedTo100()||null===this.gn&&null===this.on&&(this.isEmpty()||(this.gn=this.hn-t,this.on=a(this.priceRange()).clone()))},t.prototype.scaleTo=function(t){if(!this.isPercentage()&&!this.isIndexedTo100()&&null!==this.gn){this.setMode({autoScale:!1}),(t=this.hn-t)<0&&(t=0);var i=(this.gn+.2*(this.hn-1))/(t+.2*(this.hn-1)),n=a(this.on).clone();i=Math.max(i,.1),n.scaleAroundCenter(i),this.setPriceRange(n)}},t.prototype.endScale=function(){this.isPercentage()||this.isIndexedTo100()||(this.gn=null,this.on=null)},t.prototype.startScroll=function(t){this.isAutoScale()||null===this.yn&&null===this.on&&(this.isEmpty()||(this.yn=t,this.on=a(this.priceRange()).clone()))},t.prototype.scrollTo=function(t){if(!this.isAutoScale()&&null!==this.yn){var i=a(this.priceRange()).length()/(this.internalHeight()-1),n=t-this.yn;this.isInverted()&&(n*=-1);var s=n*i,h=a(this.on).clone();h.shift(s),this.setPriceRange(h,!0),this.pn=null}},t.prototype.endScroll=function(){this.isAutoScale()||null!==this.yn&&(this.yn=null,this.on=null)},t.prototype.formatter=function(){return this.nn||this.updateFormatter(),this.nn},t.prototype.formatPrice=function(t,i){switch(this.K.mode){case 2:return this.formatter().format(lt(t,i));case 3:return this.formatter().format(dt(t,i));default:return this.Vn(t)}},t.prototype.formatLogical=function(t){switch(this.K.mode){case 2:case 3:return this.formatter().format(t);default:return this.Vn(t)}},t.prototype.formatPriceAbsolute=function(t){return this.Vn(t,this.Fn())},t.prototype.formatPricePercentage=function(t,i){return t=lt(t,i),Bi.format(t)},t.prototype.sourcesForAutoScale=function(){return this.wn.filter((function(t){return t instanceof rt}))},t.prototype.recalculatePriceRange=function(t){this.an={visibleBars:t,isValid:!1}},t.prototype.updateAllViews=function(){this.wn.forEach((function(t){return t.updateAllViews()}))},t.prototype.updateFormatter=function(){this.pn=null;var t=this.mainSource(),i=100;null!==t&&(i=Math.round(1/t.minMove())),this.nn=zi,this.isPercentage()?(this.nn=Bi,i=100):this.isIndexedTo100()?(this.nn=new nt(100,1),i=100):null!==t&&(this.nn=t.formatter()),this.Sn=new gt(this,i,this.Dn.bind(this),this.Cn.bind(this)),this.Sn.rebuildTickMarks()},t.prototype.invalidateSourcesCache=function(){this.Mn=null},t.prototype.Ln=function(){return this.isInverted()?this.K.scaleMargins.bottom*this.height()+this.ln:this.K.scaleMargins.top*this.height()+this.cn},t.prototype.An=function(){return this.isInverted()?this.K.scaleMargins.top*this.height()+this.cn:this.K.scaleMargins.bottom*this.height()+this.ln},t.prototype.Bn=function(){this.an.isValid||(this.an.isValid=!0,this.Pn())},t.prototype.Tn=function(){this.rn=null,this.un.fire()},t.prototype.Cn=function(t,i){if(this.Bn(),this.isEmpty())return 0;t=this.isLog()&&t?Mt(t):t;var n=a(this.priceRange()),s=this.An()+(this.internalHeight()-1)*(t-n.minValue())/n.length();return this.invertedCoordinate(s)},t.prototype.Dn=function(t,i){if(this.Bn(),this.isEmpty())return 0;var n=this.invertedCoordinate(t),s=a(this.priceRange()),h=s.minValue()+s.length()*((n-this.An())/(this.internalHeight()-1));return this.isLog()?bt(h):h},t.prototype.En=function(){this.pn=null,this.Sn.rebuildTickMarks()},t.prototype.Fn=function(){return a(this.mainSource()).formatter()},t.prototype.Pn=function(){var t=this.an.visibleBars;if(null!==t){for(var i=null,n=0,s=0,h=0,r=this.sourcesForAutoScale();h<r.length;h++){var u=r[h],e=u.firstValue();if(null!==e){var o=u.autoscaleInfo(t.firstBar(),t.lastBar()),f=o&&o.priceRange;if(null!==f){switch(this.K.mode){case 1:f=mt(f);break;case 2:f=vt(f,e.value);break;case 3:f=wt(f,e.value)}i=null===i?f:i.merge(a(f)),null!==o&&null!==o.margins&&(n=Math.max(n,o.margins.above),s=Math.max(n,o.margins.below))}}}if(n===this.cn&&s===this.ln||(this.cn=n,this.ln=s,this.pn=null,this.Tn()),null!==i){if(i.minValue()===i.maxValue()){var c=this.mainSource(),l=5*(null===c||this.isPercentage()||this.isIndexedTo100()?1:c.minMove());i=new ut(i.minValue()-l,i.maxValue()+l)}this.setPriceRange(i)}else null===this.en&&this.setPriceRange(new ut(-.5,.5));this.an.isValid=!0}},t.prototype.zn=function(){return this.isPercentage()?lt:this.isIndexedTo100()?dt:this.isLog()?Mt:null},t.prototype.Vn=function(t,i){return void 0===this.xn.priceFormatter?(void 0===i&&(i=this.formatter()),i.format(t)):this.xn.priceFormatter(t)},t}();function Fi(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}!function(t){t[t.LastPriceAndPercentageValue=0]="LastPriceAndPercentageValue",t[t.LastValueAccordingToScale=1]="LastValueAccordingToScale"}(Li||(Li={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Ai||(Ai={}));var Pi=function(t){return t.getUTCFullYear()};function Oi(t,i,n){return i.replace(/yyyy/g,function(t){return tt(Pi(t),4)}(t)).replace(/yy/g,function(t){return tt(Pi(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,n)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,n)).replace(/MM/g,function(t){return tt(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return tt(function(t){return t.getUTCDate()}(t),2)}(t))}var Ii=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this.On=t,this.In=i}return t.prototype.format=function(t){return Oi(t,this.On,this.In)},t}(),Ri=function(){function t(t){this.Rn=t||"%h:%m:%s"}return t.prototype.format=function(t){return this.Rn.replace("%h",tt(t.getUTCHours(),2)).replace("%m",tt(t.getUTCMinutes(),2)).replace("%s",tt(t.getUTCSeconds(),2))},t}(),Wi={dateFormat:"yyyy-MM-dd",timeFormat:"%h:%m:%s",dateTimeSeparator:" ",locale:"default"},Ui=function(){function t(t){void 0===t&&(t={});var i=u(u({},Wi),t);this.Wn=new Ii(i.dateFormat,i.locale),this.Un=new Ri(i.timeFormat),this.jn=i.dateTimeSeparator}return t.prototype.format=function(t){return""+this.Wn.format(t)+this.jn+this.Un.format(t)},t}(),ji=function(){function t(t,i){o(t<=i,"The last bar in the bars range should be greater than or equal to the first bar"),this.qn=t,this.Hn=i}return t.prototype.firstBar=function(){return this.qn},t.prototype.lastBar=function(){return this.Hn},t.prototype.count=function(){return this.Hn-this.qn+1},t.prototype.contains=function(t){return this.qn<=t&&t<=this.Hn},t.prototype.equals=function(t){return this.qn===t.firstBar()&&this.Hn===t.lastBar()},t}(),qi=function(){function t(t,i){void 0===i&&(i=50),this.Ot=0,this.It=1,this.Rt=1,this.Ut=new Map,this.Wt=new Map,this.Yn=t,this.jt=i}return t.prototype.format=function(t){var i=void 0===t.businessDay?new Date(1e3*t.timestamp).getTime():new Date(Date.UTC(t.businessDay.year,t.businessDay.month-1,t.businessDay.day)).getTime(),n=this.Ut.get(i);if(void 0!==n)return n.string;if(this.Ot===this.jt){var s=this.Wt.get(this.Rt);this.Wt.delete(this.Rt),this.Ut.delete(f(s)),this.Rt++,this.Ot--}var h=this.Yn(t);return this.Ut.set(i,{string:h,tick:this.It}),this.Wt.set(this.It,i),this.Ot++,this.It++,h},t}();function Hi(t,i){return t.index-i.index}var Yi,_i,Ki,$i=function(){function t(){this._n=1/0,this.Kn=-1/0,this.$n=new Map,this.Xn=[],this.Zn=new ht,this.Ut=null,this.Jn=NaN}return t.prototype.reset=function(){this.$n.clear(),this.Xn=[],this._n=1/0,this.Kn=-1/0,this.Ut=null,this.Zn.fire()},t.prototype.merge=function(t){for(var i=this.Xn,n={},s=0,h=t;s<h.length;s++){var r=h[s],u=r.index,e=r.span,o=this.$n.get(r.index);if(o){if(o.index===r.index&&o.span===r.span){o.time=r.time;continue}this.Gn(o)}this.$n.set(u,r),this._n>u&&(this._n=u),this.Kn<u&&(this.Kn=u),void 0===(f=i[e])&&(f=[],i[e]=f),f.push(r),n[e]=!0}for(e=i.length;e--;){var f;void 0!==(f=i[e])&&(0===f.length&&delete i[e],n[e]&&f.sort(Hi))}this.Ut=null,this.Zn.fire()},t.prototype.indexToTime=function(t){var i=this.$n.get(t);return void 0===i?null:i.time},t.prototype.nearestIndex=function(t){for(var i=this._n,n=this.Kn;n-i>2;){if(1e3*f(this.$n.get(i)).time.timestamp===t)return i;if(1e3*f(this.$n.get(n)).time.timestamp===t)return n;var s=Math.round((i+n)/2);1e3*f(this.$n.get(s)).time.timestamp>t?n=s:i=s}return i},t.prototype.build=function(t,i){var n=Math.ceil(i/t);if(this.Jn===n&&this.Ut)return this.Ut;this.Jn=n;for(var s=[],h=this.Xn.length;h--;)if(this.Xn[h]){var r=s;s=[];for(var u=r.length,e=0,o=f(this.Xn[h]),a=o.length,c=1/0,l=-1/0,v=0;v<a;v++){for(var d=o[v],w=d.index;e<u;){var M=r[e],b=M.index;if(!(b<w)){c=b;break}e++,s.push(M),l=b,c=1/0}c-w>=n&&w-l>=n&&(s.push(d),l=w)}for(;e<u;e++)s.push(r[e])}return this.Ut=s,this.Ut},t.prototype.Gn=function(t){var i=t.index;if(this.$n.get(i)===t){this.$n.delete(i),i<=this._n&&this._n++,i>=this.Kn&&this.Kn--,this.Kn<this._n&&(this._n=1/0,this.Kn=-1/0);var n=f(this.Xn[t.span]),s=n.indexOf(t);-1!==s&&n.splice(s,1)}},t}(),Xi=function(){function t(){this.wi=[]}return t.prototype.clear=function(){this.wi=[]},t.prototype.size=function(){return this.wi.length},t.prototype.firstIndex=function(){return this.Qn(0)},t.prototype.lastIndex=function(){return this.Qn(this.wi.length-1)},t.prototype.merge=function(t,i){if(0!==i.length)if(0!==this.wi.length){var n=t;if(n<0){var s=Math.abs(n);if(i.length<s)return;this.wi=new Array(s).concat(this.wi);for(var h=0;h<i.length;++h)this.wi[t+h]=i[h]}else{for(var r=n;r<this.wi.length&&r-n<i.length;++r)this.wi[r]=i[r-n];var u=n+i.length;if(u>this.wi.length){s=u-this.wi.length;for(var e=r;e<r+s;++e)this.wi.push(i[e-n])}}}else this.wi=i},t.prototype.valueAt=function(t){var i=this.ts(t);return null!==i?this.wi[i]:null},t.prototype.indexOf=function(t,i){if(this.wi.length<1)return null;if(t>this.wi[this.wi.length-1].timestamp)return i?this.wi.length-1:null;for(var n=0;n<this.wi.length;++n){if(t===this.wi[n].timestamp)return n;if(t<this.wi[n].timestamp)return i?n:null}return null},t.prototype.closestIndexLeft=function(t){var i=this.wi;if(!i.length)return null;if(Number.isNaN(t.timestamp))return null;var n=i.length-1;if(t>=i[n])return n;var s=0,h=i[s];if(t<h)return null;if(t===h)return s;for(;n>s+1;){var r=s+n>>1,u=i[r];if(u.timestamp>t.timestamp)n=r;else{if(!(u.timestamp<t.timestamp))return u.timestamp===t.timestamp?r:null;s=r}}return s},t.prototype.Qn=function(t){return 0<=t&&t<this.size()?t:null},t.prototype.ts=function(t){return 0<=t&&t<this.size()?t:null},t}();!function(t){t[t.DefaultAnimationDuration=400]="DefaultAnimationDuration",t[t.MinBarSpacing=.5]="MinBarSpacing",t[t.MinVisibleBarsCount=2]="MinVisibleBarsCount"}(Yi||(Yi={})),function(t){t[t.Minute=20]="Minute",t[t.Hour=30]="Hour",t[t.Day=40]="Day",t[t.Week=50]="Week",t[t.Month=60]="Month",t[t.Year=70]="Year"}(_i||(_i={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Ki||(Ki={}));var Zi,Ji=function(){function t(t,i,n){this._t=0,this.ns=null,this.ss=new Xi,this.yn=null,this.gn=null,this.hs=new $i,this.rs=new Map,this.us=null,this.es=!0,this.os=new ht,this.fs=new ht,this.as=null,this.cs=null,this.ls=null,this.vs=[],this.K=i,this.xn=n,this.ds=i.rightOffset,this.ws=i.barSpacing,this.F=t,this.Ms()}return t.prototype.options=function(){return this.K},t.prototype.applyLocalizationOptions=function(t){l(this.xn,t),this.bs(),this.Ms()},t.prototype.applyOptions=function(t,i){l(this.K,t),this.K.fixLeftEdge?this.ms():this.as=null,void 0!==t.barSpacing&&this.setBarSpacing(t.barSpacing),void 0!==t.rightOffset&&this.setRightOffset(t.rightOffset),this.bs(),this.Ms(),this.fs.fire()},t.prototype.isEmpty=function(){return 0===this._t||0===this.ss.size()},t.prototype.visibleBars=function(){return this.es&&(this.es=!1,this.ps()),this.us},t.prototype.tickMarks=function(){return this.hs},t.prototype.points=function(){return this.ss},t.prototype.width=function(){return this._t},t.prototype.setWidth=function(t){if(isFinite(t)&&!(t<=0)&&this._t!==t){if(this.K.lockVisibleTimeRangeOnResize&&this._t){var i=this.ws*t/this._t;this.gs(i)}if(null!==this.as)if(a(this.visibleBars()).firstBar()<=this.as){var n=this._t-t;this.ds-=Math.round(n/this.ws)+1}this._t=t,this.es=!0,this.ys(),this.ks()}},t.prototype.indexToCoordinate=function(t){if(this.isEmpty()||!d(t))return 0;var i=this.baseIndex()+this.ds-t;return this._t-(i+.5)*this.ws},t.prototype.indexesToCoordinates=function(t,i){for(var n=this.baseIndex(),s=void 0===i?0:i.from,h=void 0===i?t.length:i.to,r=s;r<h;r++){var u=t[r].time,e=n+this.ds-u,o=this._t-(e+.5)*this.ws;t[r].x=o}},t.prototype.indexToUserTime=function(t){return this.hs.indexToTime(t)},t.prototype.coordinateToIndex=function(t){return Math.ceil(this.Ns(t))},t.prototype.setRightOffset=function(t){this.es=!0,this.ds=t,this.ks(),this.F.recalculateAllPanes(),this.F.lightUpdate()},t.prototype.barSpacing=function(){return this.ws},t.prototype.setBarSpacing=function(t){this.gs(t),this.ks(),this.F.recalculateAllPanes(),this.F.lightUpdate()},t.prototype.rightOffset=function(){return this.ds},t.prototype.marks=function(){if(this.isEmpty())return null;if(null!==this.ls)return this.ls;for(var t=this.ws,i=5*(this.F.options().layout.fontSize+4),n=Math.round(i/t),s=a(this.visibleBars()),h=Math.max(s.firstBar(),s.firstBar()-n),r=Math.max(s.lastBar(),s.lastBar()-n),u=0,e=0,o=this.hs.build(t,i);e<o.length;e++){var f=o[e];if(h<=f.index&&f.index<=r){var c=this.hs.indexToTime(f.index);if(null!==c){if(u<this.vs.length){var l=this.vs[u];l.coord=this.indexToCoordinate(f.index),l.label=this.xs(c,f.span),l.span=f.span,l.major=!1}else this.vs.push({coord:this.indexToCoordinate(f.index),label:this.xs(c,f.span),span:f.span,major:!1});u++}}}return this.vs.length=u,this.ls=this.vs,this.vs},t.prototype.reset=function(){this.es=!0,this.ss=new Xi,this.yn=null,this.gn=null,this.Ss(),this.hs.reset(),this.as=null},t.prototype.restoreDefault=function(){this.es=!0,this.setBarSpacing(this.K.barSpacing),this.setRightOffset(this.K.rightOffset)},t.prototype.fixLeftEdge=function(){return this.K.fixLeftEdge},t.prototype.setBaseIndex=function(t){this.es=!0,this.ns=t,this.ks(),this.ms()},t.prototype.zoom=function(t,i){var n=this.Ns(t),s=this.barSpacing(),h=s+i*(s/10);this.setBarSpacing(h),this.K.rightBarStaysOnScroll||this.setRightOffset(this.rightOffset()+(n-this.Ns(t)))},t.prototype.startScale=function(t){this.yn&&this.endScroll(),null===this.gn&&null===this.cs&&(this.isEmpty()||(this.gn=t,this.Ds()))},t.prototype.scaleTo=function(t){if(null!==this.cs){var i=et(this._t-t,0,this._t),n=et(this._t-a(this.gn),0,this._t);0!==i&&0!==n&&this.setBarSpacing(this.cs.barSpacing*i/n)}},t.prototype.endScale=function(){null!==this.gn&&(this.gn=null,this.Ss())},t.prototype.startScroll=function(t){null===this.yn&&null===this.cs&&(this.isEmpty()||(this.yn=t,this.Ds()))},t.prototype.scrollTo=function(t){if(this.es=!0,null!==this.yn){var i=(this.yn-t)/this.barSpacing();this.ds=a(this.cs).rightOffset+i,this.es=!0,this.ks()}},t.prototype.endScroll=function(){null!==this.yn&&(this.yn=null,this.Ss())},t.prototype.scrollToRealTime=function(){this.scrollToOffsetAnimated(this.K.rightOffset)},t.prototype.scrollToOffsetAnimated=function(t,i){var n=this;if(void 0===i&&(i=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var s=this.ds,h=(new Date).getTime(),r=function(){var u=((new Date).getTime()-h)/i,e=u>=1,o=e?t:s+(t-s)*u;n.setRightOffset(o),e||setTimeout(r,20)};r()},t.prototype.update=function(t,i,n){if(this.es=!0,i.length>0){var s=this.ss.size();this.ss.merge(t,i),this.ds<0&&this.ss.size()===s+1&&(this.ds-=1,this.es=!0)}this.hs.merge(n),this.ks()},t.prototype.visibleBarsChanged=function(){return this.os},t.prototype.optionsApplied=function(){return this.fs},t.prototype.baseIndex=function(){return this.ns||0},t.prototype.setVisibleRange=function(t){var i=t.count();this.gs(this._t/i),this.ds=t.lastBar()-this.baseIndex(),this.ks(),this.es=!0,this.F.recalculateAllPanes(),this.F.lightUpdate()},t.prototype.fitContent=function(){var t=this.ss.firstIndex(),i=this.ss.lastIndex();null!==t&&null!==i&&this.setVisibleRange(new ji(t,i+this.K.rightOffset))},t.prototype.setTimePointsRange=function(t){var i=this.points(),n=i.firstIndex(),s=i.lastIndex();if(null!==n&&null!==s){var h=a(i.valueAt(n)).timestamp,r=a(i.valueAt(s)).timestamp,u=new ji(a(i.indexOf(Math.max(h,t.from.timestamp),!0)),a(i.indexOf(Math.min(r,t.to.timestamp),!0)));this.setVisibleRange(u)}},t.prototype.formatDateTime=function(t){return void 0!==this.xn.timeFormatter?this.xn.timeFormatter(t.businessDay||t.timestamp):this.Cs.format(new Date(1e3*t.timestamp))},t.prototype.Ts=function(t){return(this._t+1-t)/this.ws},t.prototype.Ns=function(t){var i=this.Ts(t),n=this.baseIndex()+this.ds-i;return Math.round(1e6*n)/1e6},t.prototype.gs=function(t){var i=this.ws;this.ws=t,this.ys(),i!==this.ws&&(this.es=!0,this.Es())},t.prototype.ps=function(){if(this.isEmpty())this.Ls(null);else{var t=this.baseIndex(),i=Math.ceil(this._t/this.ws)-1,n=Math.round(this.ds+t),s=n-i;this.Ls(new ji(s,n))}},t.prototype.ys=function(){if(this.ws<.5&&(this.ws=.5,this.es=!0),0!==this._t){var t=.5*this._t;this.ws>t&&(this.ws=t,this.es=!0)}},t.prototype.ks=function(){var t=this.As();this.ds>t&&(this.ds=t,this.es=!0);var i=this.Bs();null!==i&&this.ds<i&&(this.ds=i,this.es=!0)},t.prototype.Bs=function(){var t=this.ss.firstIndex(),i=this.ns;if(null===t||null===i)return null;if(null!==this.as){var n=this._t/this.ws;return this.as-i+n-1}return t-i-1+Math.min(2,this.ss.size())},t.prototype.As=function(){return this._t/this.ws-Math.min(2,this.ss.size())},t.prototype.Ds=function(){this.cs={barSpacing:this.barSpacing(),rightOffset:this.rightOffset()}},t.prototype.Ss=function(){this.cs=null},t.prototype.xs=function(t,i){var n=this,s=this.rs.get(i);return void 0===s&&(s=new qi((function(t){return n.zs(t,i)})),this.rs.set(i,s)),s.format(t)},t.prototype.zs=function(t,i){var n,s=this.K.timeVisible;return n=i<20&&s?this.K.secondsVisible?4:3:i<40&&s?3:i<50||i<60?2:i<70?1:0,this.K.tickMarkFormatter(t,n,this.xn.locale)},t.prototype.Ls=function(t){if(null!==t||null!==this.us){var i=this.us;this.us=t,(null===this.us||null!==i&&!this.us.equals(i))&&this.os.fire(),this.Es()}},t.prototype.Es=function(){this.ls=null},t.prototype.bs=function(){this.Es(),this.rs.clear()},t.prototype.Ms=function(){var t=this.xn.dateFormat;this.K.timeVisible?this.Cs=new Ui({dateFormat:t,timeFormat:this.K.secondsVisible?"%h:%m:%s":"%h:%m",dateTimeSeparator:"   ",locale:this.xn.locale}):this.Cs=new Ii(t,this.xn.locale)},t.prototype.ms=function(){if(this.K.fixLeftEdge){var t=this.ss.firstIndex();if(null!==t&&this.as!==t){this.as=t;var i=a(this.visibleBars()).firstBar()-t;if(i<0){var n=this.ds-i-1;this.setRightOffset(n)}}}},t}();function Gi(t){return!v(t)&&!w(t)}function Qi(t){return v(t)}!function(t){t[t.BorderSize=1]="BorderSize",t[t.TickLength=4]="TickLength"}(Zi||(Zi={}));var tn,nn=function(){function t(t){this.Ht={borderSize:1,tickLength:4,fontSize:NaN,font:"",fontFamily:"",color:"",paddingBottom:0,paddingInner:0,paddingOuter:0,paddingTop:0,baselineOffset:0},this.l=t}return t.prototype.options=function(){var t=this.Ht,i=this.Zt(),n=this.Jt();return t.fontSize===i&&t.fontFamily===n||(t.fontSize=i,t.fontFamily=n,t.font=Jt(i,n),t.paddingTop=Math.floor(i/3.5),t.paddingBottom=t.paddingTop,t.paddingInner=Math.max(Math.ceil(i/2-t.tickLength/2),0),t.paddingOuter=Math.ceil(i/2+t.tickLength/2),t.baselineOffset=Math.round(i/10)),t.color=this.Vs(),this.Ht},t.prototype.Vs=function(){return this.l.options().layout.textColor},t.prototype.Zt=function(){return this.l.options().layout.fontSize},t.prototype.Jt=function(){return this.l.options().layout.fontFamily},t}(),sn=function(){function t(){this.m=null}return t.prototype.setData=function(t){this.m=t},t.prototype.draw=function(t,i,s,h){var r=this;if(null!==this.m){var u=Math.floor(i);t.lineWidth=u;var e=Math.ceil(this.m.h*i),o=Math.ceil(this.m.w*i);!function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,(function(){var s=a(r.m);if(s.vertLinesVisible){t.strokeStyle=s.vertLinesColor,n(t,s.vertLineStyle),t.beginPath();for(var h=0,f=s.timeMarks;h<f.length;h++){var c=f[h],l=Math.round(c.coord*i);t.moveTo(l,-u),t.lineTo(l,e+u)}t.stroke()}if(s.horzLinesVisible){t.strokeStyle=s.horzLinesColor,n(t,s.horzLineStyle),t.beginPath();for(var v=0,d=s.priceMarks;v<d.length;v++){var w=d[v],M=Math.round(w.coord*i);t.moveTo(-u,M),t.lineTo(o+u,M)}t.stroke()}}))}},t}(),hn=function(){function t(t){this.g=new sn,this.o=!0,this.O=t}return t.prototype.update=function(){this.o=!0},t.prototype.renderer=function(t,i){if(this.o){var n=this.O.model().options().grid,s={h:t,w:i,horzLinesVisible:n.horzLines.visible,vertLinesVisible:n.vertLines.visible,horzLinesColor:n.horzLines.color,vertLinesColor:n.vertLines.color,horzLineStyle:n.horzLines.style,vertLineStyle:n.vertLines.style,priceMarks:this.O.defaultPriceScale().marks(),timeMarks:this.O.model().timeScale().marks()||[]};this.g.setData(s),this.o=!1}return this.g},t}(),rn=function(){function t(){this.Fs=new WeakMap,this.o=!0}return t.prototype.paneViews=function(t){var i=this.Fs.get(t);return void 0===i&&(i=[new hn(t)],this.Fs.set(t,i)),this.o&&(i.forEach((function(t){return t.update()})),this.o=!1),i},t.prototype.invalidate=function(){this.o=!0},t}();!function(t){t[t.None=0]="None",t[t.Cursor=1]="Cursor",t[t.Light=2]="Light",t[t.Full=3]="Full"}(tn||(tn={}));var un=function(){function t(t){this.Ps=new Map,this.Os=!1,this.Is=!1,this.Rs=null,this.Ws=t}return t.prototype.invalidatePane=function(t,i){var n=function(t,i){return void 0===t?i:{level:Math.max(t.level,i.level),autoScale:t.autoScale||i.autoScale}}(this.Ps.get(t),i);this.Ps.set(t,n)},t.prototype.invalidateAll=function(t){this.Ws=Math.max(this.Ws,t)},t.prototype.fullInvalidation=function(){return this.Ws},t.prototype.invalidateForPane=function(t){var i=this.Ps.get(t);return void 0===i?{level:this.Ws}:{level:Math.max(this.Ws,i.level),autoScale:i.autoScale}},t.prototype.setFitContent=function(){this.Is=!0,this.Rs=null},t.prototype.getFitContent=function(){return this.Is},t.prototype.setTargetTimeRange=function(t){this.Rs=t,this.Is=!1},t.prototype.getTargetTimeRange=function(){return this.Rs},t.prototype.merge=function(t){var i=this;this.Os=this.Os||t.Os,t.Is&&this.setFitContent(),t.Rs&&this.setTargetTimeRange(t.Rs),this.Ws=Math.max(this.Ws,t.Ws),t.Ps.forEach((function(t,n){i.invalidatePane(n,t)}))},t}(),en=function(){function t(t){this.K=t}return t.prototype.align=function(t,i,n){var s=t;if(0===this.K.mode)return s;var h=n.defaultPriceScale(),r=h.firstValue();if(null===r)return s;var u=h.priceToCoordinate(t,r),e=n.dataSources().filter((function(t){return t instanceof Ti})).reduce((function(t,s){if(n.isOverlay(s))return t;var h=s.priceScale(),r=s.bars();if(h.isEmpty()||!r.contains(i))return t;var u=r.valueAt(i);if(null===u)return t;var e=[u.value[3]],o=c(s.firstValue());return t.concat(e.map((function(t){return h.priceToCoordinate(t,o.value)})))}),[]);if(0===e.length)return s;e.sort((function(t,i){return Math.abs(t-u)-Math.abs(i-u)}));var o=e[0];return s=h.coordinateToPrice(o,r)},t}(),on=function(){function t(t,i){this.wn=[],this.Us=[],this.hn=0,this._t=0,this.js=1e3,this.qs=null,this.Mn=null,this.Hs={},this.Ys=new ht,this._s=t,this.F=i,this.model().mainPriceScaleOptionsChanged().subscribe(this.onPriceScaleOptionsChanged.bind(this),this),this.Ks=this.$s()}return t.prototype.onPriceScaleOptionsChanged=function(){this.Ks.applyOptions(this.F.options().priceScale)},t.prototype.destroy=function(){this.model().mainPriceScaleOptionsChanged().unsubscribeAll(this),this.Ks.modeChanged().unsubscribeAll(this),this.wn.forEach((function(t){t.destroy&&t.destroy()})),this.Ys.fire()},t.prototype.stretchFactor=function(){return this.js},t.prototype.setStretchFactor=function(t){this.js=t},t.prototype.model=function(){return this.F},t.prototype.width=function(){return this._t},t.prototype.height=function(){return this.hn},t.prototype.setWidth=function(t){this._t=t,this.updateAllViews()},t.prototype.setHeight=function(t){var i=this;this.hn=t,this.Ks.setHeight(t),this.wn.forEach((function(n){if(i.isOverlay(n)){var s=n.priceScale();null!==s&&s.setHeight(t)}})),this.updateAllViews()},t.prototype.dataSources=function(){return this.wn},t.prototype.isOverlay=function(t){var i=t.priceScale();return null===i||this.Ks!==i},t.prototype.addDataSource=function(t,i,n,s){var h=this.Xs().minZOrder-1;this.Zs(t,i,h,s)},t.prototype.removeDataSource=function(t){var i=this.wn.indexOf(t);o(-1!==i,"removeDataSource: invalid data source"),this.wn.splice(i,1),t===this.qs&&(this.qs=null);var n=this.Us.indexOf(t);-1!==n&&this.Us.splice(n,1);var s=t.priceScale();if(s&&s.dataSources().indexOf(t)>=0&&s.removeDataSource(t),s&&null===s.mainSource()){var h=s.dataSources().length;o(0===h,"Invalid priceScale state: empty mainSource but non-empty data sources="+h),s!==this.Ks&&s.modeChanged().unsubscribeAll(this)}t instanceof rt&&this.Js(),s&&t instanceof rt&&(s.invalidateSourcesCache(),this.recalculatePriceScale(s)),this.Mn=null},t.prototype.priceScalePosition=function(){var t=this.F.options().priceScale.position;return"none"===t?"overlay":t},t.prototype.startScalePrice=function(t,i){t.startScale(i)},t.prototype.scalePriceTo=function(t,i){t.scaleTo(i),this.updateAllViews()},t.prototype.endScalePrice=function(t){t.endScale()},t.prototype.startScrollPrice=function(t,i){t.startScroll(i)},t.prototype.scrollPriceTo=function(t,i){t.scrollTo(i),this.updateAllViews()},t.prototype.endScrollPrice=function(t){t.endScroll()},t.prototype.setPriceAutoScale=function(t,i){t.setMode({autoScale:i}),this._s.isEmpty()?t.setPriceRange(null):this.recalculatePriceScale(t)},t.prototype.updateAllViews=function(){this.wn.forEach((function(t){t.updateAllViews()}))},t.prototype.defaultPriceScale=function(){var t=this.mainDataSource(),i=null!==t?t.priceScale():null;return null===i&&(i=this.Ks),i},t.prototype.mainDataSource=function(){return this.qs},t.prototype.recalculatePriceScale=function(t){null!==t&&t.isAutoScale()&&this.Gs(t)},t.prototype.resetPriceScale=function(t){var i=this._s.visibleBars();t.setMode({autoScale:!0}),null!==i&&t.recalculatePriceRange(i),this.updateAllViews()},t.prototype.momentaryAutoScale=function(){this.Gs(this.Ks)},t.prototype.recalculate=function(){var t=this;this.recalculatePriceScale(this.Ks),this.wn.forEach((function(i){t.isOverlay(i)&&t.recalculatePriceScale(i.priceScale())})),this.updateAllViews(),this.F.lightUpdate()},t.prototype.isEmpty=function(){return null===this.qs},t.prototype.containsSeries=function(){return this.wn.some((function(t){return t instanceof Ti}))},t.prototype.orderedSources=function(){return null===this.Mn&&(this.Mn=Ei(this.wn)),this.Mn},t.prototype.onDestroyed=function(){return this.Ys},t.prototype.Qs=function(t,i,n){return"overlay"!==i?this.Ks:n?(this.Hs[n]||(this.Hs[n]=this.$s()),this.Hs[n]):this.$s(!0)},t.prototype.Gs=function(t){var i=t.sourcesForAutoScale();if(i&&i.length>0&&!this._s.isEmpty()){var n=this._s.visibleBars();null!==n&&t.recalculatePriceRange(n)}t.updateAllViews()},t.prototype.Xs=function(){var t=this.orderedSources();if(0===t.length)return{minZOrder:0,maxZOrder:0};for(var i=0,n=0,s=0;s<t.length;s++){var h=t[s].zorder();null!==h&&(h<i&&(i=h),h>n&&(n=h))}return{minZOrder:i,maxZOrder:n}},t.prototype.Zs=function(t,i,n,s){var h="overlay",r=null;if(!i){var u=this.model().options().priceScale.position;h="none"===u?"overlay":u}t instanceof rt&&(r=this.Qs(t,h,s)),this.wn.push(t),i&&this.Us.push(t),null!==r&&(r.addDataSource(t),t.setPriceScale(r)),t.setZorder(n),this.Js(),t instanceof rt&&this.recalculatePriceScale(r),this.Mn=null},t.prototype.th=function(t,i,n){i.mode!==n.mode&&this.Gs(t)},t.prototype.Js=function(){if(null===this.qs||-1!==this.Us.indexOf(this.qs)){for(var t=0,i=this.wn;t<i.length;t++){if((h=i[t])instanceof rt&&!this.isOverlay(h))return void this.ih(h)}for(var n=0,s=this.Us;n<s.length;n++){var h;if((h=s[n])instanceof rt)return void this.ih(h)}}},t.prototype.ih=function(t){var i=a(t.priceScale());this.defaultPriceScale().modeChanged().unsubscribeAll(this),i.modeChanged().subscribe(this.th.bind(this,i),this),this.qs=t},t.prototype.$s=function(t){var i=m(this.F.options().priceScale);t&&(i.autoScale=!0,i.mode=0);var n=new Vi(i,this.F.options().layout,this.F.options().localization);return n.setHeight(this.height()),n},t}(),fn=function(t){function i(i){var n=t.call(this)||this;return n.nh=new Map,n.m=i,n}return r(i,t),i.prototype._drawImpl=function(t){},i.prototype._drawBackgroundImpl=function(t){if(this.m.visible){t.save();for(var i=0,n=0,s=this.m.lines;n<s.length;n++){if(0!==(o=s[n]).text.length){t.font=o.font;var h=this.sh(t,o.text);h>this.m.width?o.zoom=this.m.width/h:o.zoom=1,i+=o.lineHeight*o.zoom}}var r=0;switch(this.m.vertAlign){case"top":r=0;break;case"center":r=Math.max((this.m.height-i)/2,0);break;case"bottom":r=Math.max(this.m.height-i,0)}t.fillStyle=this.m.color;for(var u=0,e=this.m.lines;u<e.length;u++){var o=e[u];t.save();var f=0;switch(this.m.horzAlign){case"left":t.textAlign="left",f=o.lineHeight/2;break;case"center":t.textAlign="center",f=this.m.width/2;break;case"right":t.textAlign="right",f=this.m.width-1-o.lineHeight/2}t.translate(f,r),t.textBaseline="top",t.font=o.font,t.scale(o.zoom,o.zoom),t.fillText(o.text,0,o.vertOffset),t.restore(),r+=o.lineHeight*o.zoom}t.restore()}},i.prototype.sh=function(t,i){var n=this.hh(t.font),s=n.get(i);return void 0===s&&(s=t.measureText(i).width,n.set(i,s)),s},i.prototype.hh=function(t){var i=this.nh.get(t);return void 0===i&&(i=new Map,this.nh.set(t,i)),i},i}(k),an=function(){function t(t){this.o=!0,this.p={visible:!1,color:"",height:0,width:0,lines:[],vertAlign:"center",horzAlign:"center"},this.g=new fn(this.p),this.k=t}return t.prototype.update=function(){this.o=!0},t.prototype.renderer=function(t,i){return this.o&&(this.M(t,i),this.o=!1),this.g},t.prototype.M=function(t,i){var n=this.k.options(),s=this.p;s.visible=n.visible,s.visible&&(s.color=n.color,s.width=i,s.height=t,s.horzAlign=n.horzAlign,s.vertAlign=n.vertAlign,s.lines=[{text:n.text,font:Jt(n.fontSize),lineHeight:1.2*n.fontSize,vertOffset:0,zoom:0}])},t}(),cn=function(t){function i(i,n){var s=t.call(this)||this;return s.K=n,s.J=new an(s),s}return r(i,t),i.prototype.paneViews=function(){return[this.J]},i.prototype.options=function(){return this.K},i.prototype.updateAllViews=function(){this.J.update()},i}(Z),ln=function(){function t(t,i){this.rh=[],this.uh=[],this._t=0,this.eh=null,this.oh=null,this.fh=new ht,this.ah=new ht,this.lh=t,this.K=i,this.vh=new nn(this),this._s=new Ji(this,i.timeScale,this.K.localization),this.dh=new rn,this.v=new J(this,i.crosshair),this.wh=new en(i.crosshair),this.Mh=new cn(this,i.watermark),this.createPane(),this.rh[0].setStretchFactor(2e3),this.rh[0].addDataSource(this.Mh,!0,!1)}return t.prototype.fullUpdate=function(){this.bh(new un(3))},t.prototype.lightUpdate=function(){this.bh(new un(2))},t.prototype.updateSource=function(t){var i=this.mh(t);this.bh(i)},t.prototype.hoveredSource=function(){return this.oh},t.prototype.setHoveredSource=function(t){var i=this.oh;this.oh=t,null!==i&&this.updateSource(i.source),null!==t&&this.updateSource(t.source)},t.prototype.options=function(){return this.K},t.prototype.applyOptions=function(t){l(this.K,t),void 0!==t.priceScale&&(this.mainPriceScale().applyOptions(t.priceScale),this.fh.fire()),void 0!==t.timeScale&&this._s.applyOptions(t.timeScale),void 0!==t.localization&&(this._s.applyLocalizationOptions(t.localization),this.mainPriceScale().updateFormatter()),this.fullUpdate()},t.prototype.updateAllPaneViews=function(){this.rh.forEach((function(t){return t.updateAllViews()})),this.updateCrosshair()},t.prototype.timeScale=function(){return this._s},t.prototype.panes=function(){return this.rh},t.prototype.gridSource=function(){return this.dh},t.prototype.watermarkSource=function(){return this.Mh},t.prototype.crosshairSource=function(){return this.v},t.prototype.crosshairMoved=function(){return this.ah},t.prototype.width=function(){return this._t},t.prototype.setPaneHeight=function(t,i){t.setHeight(i),this.recalculateAllPanes(),this.lightUpdate()},t.prototype.setWidth=function(t){this._t=t,this._s.setWidth(this._t),this.rh.forEach((function(i){return i.setWidth(t)})),this.recalculateAllPanes()},t.prototype.createPane=function(t){var i=new on(this._s,this);void 0!==t?this.rh.splice(t,0,i):this.rh.push(i);var n=void 0===t?this.rh.length-1:t,s=new un(3);return s.invalidatePane(n,{level:0,autoScale:!0}),this.invalidate(s),i},t.prototype.startScalePrice=function(t,i,n){t.startScalePrice(i,n)},t.prototype.scalePriceTo=function(t,i,n){t.scalePriceTo(i,n),this.updateCrosshair(),this.bh(this.ph(t,2))},t.prototype.endScalePrice=function(t,i){t.endScalePrice(i),this.bh(this.ph(t,2))},t.prototype.startScrollPrice=function(t,i,n){i.isAutoScale()||t.startScrollPrice(i,n)},t.prototype.scrollPriceTo=function(t,i,n){i.isAutoScale()||(t.scrollPriceTo(i,n),this.updateCrosshair(),this.bh(this.ph(t,2)))},t.prototype.endScrollPrice=function(t,i){i.isAutoScale()||(t.endScrollPrice(i),this.bh(this.ph(t,2)))},t.prototype.setPriceAutoScale=function(t,i,n){t.setPriceAutoScale(i,n),this.bh(this.ph(t,2))},t.prototype.resetPriceScale=function(t,i){t.resetPriceScale(i),this.bh(this.ph(t,2))},t.prototype.startScaleTime=function(t){this._s.startScale(t)},t.prototype.zoomTime=function(t,i){var n=this.timeScale();if(!n.isEmpty()&&0!==i){var s=n.width();t=Math.max(1,Math.min(t,s)),n.zoom(t,i),this.updateCrosshair(),this.recalculateAllPanes(),this.lightUpdate()}},t.prototype.scrollChart=function(t){this.startScrollTime(0),this.scrollTimeTo(t),this.endScrollTime()},t.prototype.scaleTimeTo=function(t){this._s.scaleTo(t),this.recalculateAllPanes(),this.updateCrosshair(),this.lightUpdate()},t.prototype.endScaleTime=function(){this._s.endScale(),this.lightUpdate()},t.prototype.startScrollTime=function(t){this.eh=t,this._s.startScroll(t)},t.prototype.scrollTimeTo=function(t){var i=!1;return null!==this.eh&&Math.abs(t-this.eh)>20&&(this.eh=null,i=!0),this._s.scrollTo(t),this.recalculateAllPanes(),this.updateCrosshair(),this.lightUpdate(),i},t.prototype.endScrollTime=function(){this._s.endScroll(),this.lightUpdate(),this.eh=null},t.prototype.resetTimeScale=function(){this._s.restoreDefault(),this.recalculateAllPanes(),this.updateCrosshair(),this.lightUpdate()},t.prototype.invalidate=function(t){this.lh&&this.lh(t),this.dh.invalidate(),this.lightUpdate()},t.prototype.dataSources=function(){return this.rh.reduce((function(t,i){return t.concat(i.dataSources())}),[])},t.prototype.serieses=function(){return this.uh},t.prototype.setAndSaveCurrentPosition=function(t,i,n){this.v.saveOriginCoord(t,i);var s=NaN,h=this._s.coordinateToIndex(t),r=this._s.visibleBars();if(null!==r&&(h=Math.min(Math.max(r.firstBar(),h),r.lastBar())),null!==n.mainDataSource()){var u=n.defaultPriceScale(),e=u.firstValue();null!==e&&(s=u.coordinateToPrice(i,e)),s=this.wh.align(s,h,n)}this.v.setPosition(h,s,n),this.gh(),this.ah.fire(this.v.appliedIndex(),{x:t,y:i})},t.prototype.clearCurrentPosition=function(){this.crosshairSource().clearPosition(),this.gh(),this.ah.fire(null,null)},t.prototype.updateCrosshair=function(){var t=this.v.pane();if(null!==t){var i=this.v.originCoordX(),n=this.v.originCoordY();this.setAndSaveCurrentPosition(i,n,t)}},t.prototype.updateTimeScale=function(t,i,n,s){s&&this._s.reset(),this._s.update(t,i,n)},t.prototype.updateTimeScaleBaseIndex=function(t){var i=this.uh.reduce((function(t,i){var n=i.bars();if(n.isEmpty())return t;var s=a(n.lastIndex());return void 0===t?s:Math.max(s,t)}),void 0);if(void 0!==i){var n=this._s,s=n.baseIndex(),h=n.visibleBars();if(null!==h){var r=h.contains(s);if(void 0!==t&&t>0&&!r){var u=i-s;n.setRightOffset(n.rightOffset()-u)}}n.setBaseIndex(i)}this.updateCrosshair(),this.recalculateAllPanes(),this.lightUpdate()},t.prototype.recalculatePane=function(t){null!==t&&t.recalculate()},t.prototype.paneForSource=function(t){var i=this.rh.find((function(i){return i.orderedSources().includes(t)}));return void 0===i?null:i},t.prototype.recalculateAllPanes=function(){this.rh.forEach((function(t){return t.recalculate()})),this.updateAllPaneViews()},t.prototype.destroy=function(){this.rh.forEach((function(t){return t.destroy()})),this.rh.length=0,this.K.localization.priceFormatter=void 0,this.K.localization.timeFormatter=void 0},t.prototype.setPriceAutoScaleForAllMainSources=function(){this.rh.map((function(t){return t.mainDataSource()})).forEach((function(t){null!==t&&a(t.priceScale()).setMode({autoScale:!0})}))},t.prototype.rendererOptionsProvider=function(){return this.vh},t.prototype.priceAxisRendererOptions=function(){return this.vh.options()},t.prototype.mainPriceScaleOptionsChanged=function(){return this.fh},t.prototype.mainPriceScale=function(){return this.rh[0].defaultPriceScale()},t.prototype.createSeries=function(t,i){var n=this.rh[0],s=this.yh(i,t,n);return this.uh.push(s),1===this.uh.length?this.fullUpdate():this.lightUpdate(),s},t.prototype.removeSeries=function(t){var i=this.paneForSource(t),n=this.uh.indexOf(t);o(-1!==n,"Series not found"),this.uh.splice(n,1),a(i).removeDataSource(t),t.destroy&&t.destroy()},t.prototype.fitContent=function(){var t=new un(2);t.setFitContent(),this.bh(t)},t.prototype.setTargetTimeRange=function(t){var i=new un(2);i.setTargetTimeRange(t),this.bh(i)},t.prototype.ph=function(t,i){var n=new un(i);if(null!==t){var s=this.rh.indexOf(t);n.invalidatePane(s,{level:i})}return n},t.prototype.mh=function(t,i){return void 0===i&&(i=2),this.ph(this.paneForSource(t),i)},t.prototype.bh=function(t){this.lh&&this.lh(t),this.dh.invalidate()},t.prototype.gh=function(){this.bh(new un(1))},t.prototype.yh=function(t,i,n){var s=new Ti(this,t,i);return n.addDataSource(s,Boolean(t.overlay),!1,t.scaleGroup),t.overlay&&s.applyOptions(t),s},t}(),vn={allowDownsampling:!0};var dn=function(){function t(t,i){var n=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(t){return n._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=i,this._configureCanvas(),this._installResolutionListener()}return t.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(t.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),t.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");return t.devicePixelRatio>1||this._options.allowDownsampling?t.devicePixelRatio:1},enumerable:!0,configurable:!0}),t.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},t.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter((function(i){return i!=t}))},t.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},t.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach((function(i){return i.call(t)}))},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");var i=t.devicePixelRatio;this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+i+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},t}(),wn=function(){function t(t,i){this.w=t,this.h=i}return t.prototype.equals=function(t){return this.w===t.w&&this.h===t.h},t}();function Mn(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function bn(t){var i=a(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function mn(t){var i=t.createElement("canvas");return function(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.msUserSelect="none",t.style.MozUserSelect="none",t.style.webkitTapHighlightColor="transparent"}(i),i}function pn(t,i){var n=mn(t),s=Mn(n);return n.style.width=i.w+"px",n.style.height=i.h+"px",n.width=i.w*s,n.height=i.h*s,n}function gn(t,i){var n=mn(a(t.ownerDocument));t.appendChild(n);var s=function(t,i){return void 0===i&&(i=vn),new dn(t,i)}(n);return s.resizeCanvas({width:i.w,height:i.h}),s}var yn,kn=!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||"ontouchstart"in window||Boolean(window.DocumentTouch&&document instanceof window.DocumentTouch),Nn="onorientationchange"in window&&kn,xn=/Android/i.test(navigator.userAgent),Sn=/iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent),Dn=xn||Sn;!function(t){t[t.ResetClick=500]="ResetClick",t[t.LongTap=240]="LongTap"}(yn||(yn={}));var Cn=function(){function t(t,i,n){this.kh=0,this.Nh=null,this.xh=null,this.Sh=!1,this.Dh=null,this.Ch=!1,this.Th=!1,this.Eh=null,this.Lh=null,this.Ah=null,this.Bh=null,this.zh=0,this.Vh=!1,this.Fh=!1,this.Ph=!1,this.Oh=t,this.Ih=i,this.K=n,this.Rh()}return t.prototype.destroy=function(){null!==this.Eh&&(this.Eh(),this.Eh=null),null!==this.Lh&&(this.Lh(),this.Lh=null),null!==this.Ah&&(this.Ah(),this.Ah=null),this.Wh(),this.Uh()},t.prototype.jh=function(t){var i=this;this.Lh&&this.Lh();var n=this.qh.bind(this);this.Lh=function(){i.Oh.removeEventListener("mousemove",n)},this.Oh.addEventListener("mousemove",n),Ln(t)&&this.qh(t);var s=this.Hh(t);this.Yh(s,this.Ih.mouseEnterEvent)},t.prototype.Uh=function(){null!==this.Nh&&clearTimeout(this.Nh),this.kh=0,this.Nh=null},t.prototype.qh=function(t){if(!this.Ph||Ln(t)){var i=this.Hh(t);this.Yh(i,this.Ih.mouseMoveEvent)}},t.prototype._h=function(t){if((!("button"in t)||0===t.button)&&null===this.Bh){var i=Ln(t);if(!this.Fh||!i){this.Vh=!0;var n=this.Hh(t),s=c(this.Dh),h=Math.abs(s.x-n.pageX),r=Math.abs(s.y-n.pageY),u=h+r>5;if(u||!i){if(u&&!this.Ch&&i){var e=.5*h,o=r>=e&&!this.K.treatVertTouchDragAsPageScroll,f=e>r&&!this.K.treatHorzTouchDragAsPageScroll;o||f||(this.Fh=!0)}u&&(this.Ch=!0,this.Th=!0,i&&this.Wh()),this.Fh||(this.Yh(n,this.Ih.pressedMouseMoveEvent),i&&An(t))}}}},t.prototype.Kh=function(t){if(!("button"in t)||0===t.button){var i=this.Hh(t);this.Wh(),this.Dh=null,this.Ph=!1,this.Ah&&(this.Ah(),this.Ah=null),Ln(t)&&this.$h(t),this.Yh(i,this.Ih.mouseUpEvent),++this.kh,this.Nh&&this.kh>1?(this.Yh(i,this.Ih.mouseDoubleClickEvent),this.Uh()):this.Th||this.Yh(i,this.Ih.mouseClickEvent),Ln(t)&&(An(t),this.$h(t),0===t.touches.length&&(this.Sh=!1))}},t.prototype.Wh=function(){null!==this.xh&&(clearTimeout(this.xh),this.xh=null)},t.prototype.Xh=function(t){if(!("button"in t)||0===t.button){var i=this.Hh(t);this.Th=!1,this.Ch=!1,this.Fh=!1,Ln(t)&&this.jh(t),this.Dh={x:i.pageX,y:i.pageY},this.Ah&&(this.Ah(),this.Ah=null);var n=this._h.bind(this),s=this.Kh.bind(this),h=this.Oh.ownerDocument.documentElement;this.Ah=function(){h.removeEventListener("touchmove",n),h.removeEventListener("touchend",s),h.removeEventListener("mousemove",n),h.removeEventListener("mouseup",s)},h.addEventListener("touchmove",n,{passive:!1}),h.addEventListener("touchend",s,{passive:!1}),this.Wh(),Ln(t)&&1===t.touches.length?this.xh=setTimeout(this.Zh.bind(this,t),240):(h.addEventListener("mousemove",n),h.addEventListener("mouseup",s)),this.Ph=!0,this.Yh(i,this.Ih.mouseDownEvent),this.Nh||(this.kh=0,this.Nh=setTimeout(this.Uh.bind(this),500))}},t.prototype.Rh=function(){var t=this;this.Oh.addEventListener("mouseenter",this.jh.bind(this)),this.Oh.addEventListener("touchcancel",this.Wh.bind(this));var i=this.Oh.ownerDocument,n=function(i){t.Ih.mouseDownOutsideEvent&&(i.target&&t.Oh.contains(i.target)||t.Ih.mouseDownOutsideEvent())};this.Eh=function(){i.removeEventListener("mousedown",n),i.removeEventListener("touchstart",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),this.Oh.addEventListener("mouseleave",this.$h.bind(this)),this.Oh.addEventListener("touchstart",this.Xh.bind(this),{passive:!0}),Nn||this.Oh.addEventListener("mousedown",this.Xh.bind(this)),this.Jh(),this.Oh.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype.Jh=function(){var t=this;void 0===this.Ih.pinchStartEvent&&void 0===this.Ih.pinchEvent&&void 0===this.Ih.pinchEndEvent||(this.Oh.addEventListener("touchstart",(function(i){return t.Gh(i.touches)}),{passive:!0}),this.Oh.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.Bh&&void 0!==t.Ih.pinchEvent){var n=En(i.touches[0],i.touches[1])/t.zh;t.Ih.pinchEvent(t.Bh,n),An(i)}}),{passive:!1}),this.Oh.addEventListener("touchend",(function(i){t.Gh(i.touches)})))},t.prototype.Gh=function(t){1===t.length&&(this.Vh=!1),2!==t.length||this.Vh||this.Sh?this.Qh():this.tr(t)},t.prototype.tr=function(t){var i=Tn(this.Oh);this.Bh={x:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,y:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.zh=En(t[0],t[1]),void 0!==this.Ih.pinchStartEvent&&this.Ih.pinchStartEvent(),this.Wh()},t.prototype.Qh=function(){null!==this.Bh&&(this.Bh=null,void 0!==this.Ih.pinchEndEvent&&this.Ih.pinchEndEvent())},t.prototype.$h=function(t){this.Lh&&this.Lh();var i=this.Hh(t);this.Yh(i,this.Ih.mouseLeaveEvent)},t.prototype.Zh=function(t){var i=this.Hh(t);this.Yh(i,this.Ih.longTapEvent),this.Th=!0,this.Sh=!0},t.prototype.Yh=function(t,i){i&&i.call(this.Ih,t)},t.prototype.Hh=function(t){var i;i="touches"in t&&t.touches.length?t.touches[0]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0]:t;var n=Tn(this.Oh);return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-n.left,localY:i.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,type:t.type.startsWith("mouse")?"mouse":"touch",target:i.target,view:t.view}},t}();function Tn(t){return t.getBoundingClientRect()||{left:0,top:0}}function En(t,i){var n=t.clientX-i.clientX,s=t.clientY-i.clientY;return Math.sqrt(n*n+s*s)}function Ln(t){return Boolean(t.touches)}function An(t){t.cancelable&&t.preventDefault()}var Bn,zn=function(){function t(t,i,n,s){if(this.ir=0,this.nr=0,this.sr=0,this.hr=0,this.rr=0,this.ur=0,this.er=0,this.or=t,this.ar=t.paneWidgets()[i],this.cr=t.paneWidgets()[n],this.lr=document.createElement("tr"),this.lr.style.height="1px",this.vr=document.createElement("td"),this.vr.style.padding="0",this.vr.setAttribute("colspan","3"),this.dr(),this.lr.appendChild(this.vr),s)this.wr=null,this.Mr=null;else{this.wr=document.createElement("div"),this.wr.style.position="absolute",this.wr.style.zIndex="50",this.wr.style.height="5px",this.wr.style.width="100%",this.wr.style.backgroundColor="rgba(255, 255, 255, 0.02)",this.wr.style.cursor="ns-resize",this.vr.appendChild(this.wr);var h={mouseDownEvent:this.br.bind(this),pressedMouseMoveEvent:this.mr.bind(this),mouseUpEvent:this.pr.bind(this)};this.Mr=new Cn(this.wr,h,{treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!0})}}return t.prototype.destroy=function(){null!==this.Mr&&this.Mr.destroy()},t.prototype.getElement=function(){return this.lr},t.prototype.getSize=function(){return new wn(this.ar.getSize().w,1)},t.prototype.getImage=function(){var t=this.getSize(),i=pn(document,t),n=bn(i);return n.fillStyle=this.or.options().timeScale.borderColor,n.fillRect(0,0,t.w,t.h),i},t.prototype.update=function(){this.dr()},t.prototype.dr=function(){this.vr.style.background=this.or.options().timeScale.borderColor},t.prototype.br=function(t){this.ir=t.pageY,this.nr=0,this.sr=this.ar.getSize().h+this.cr.getSize().h,this.hr=this.ar.stretchFactor()+this.cr.stretchFactor(),this.rr=30,this.ur=this.sr-this.rr,this.er=this.hr/this.sr},t.prototype.mr=function(t){this.nr=t.pageY-this.ir;var i=this.ar.getSize().h,n=et(i+this.nr,this.rr,this.ur)*this.er,s=this.hr-n;this.ar.setStretchFactor(n),this.cr.setStretchFactor(s),this.or.adjustSize(),this.ar.getSize().h!==i&&(this.ir=t.pageY)},t.prototype.pr=function(t){this.ir=0,this.nr=0,this.sr=0,this.hr=0,this.rr=0,this.ur=0,this.er=0},t}(),Vn=function(){function t(t,i,n,s){this.Kt=new Yt(200),this.Zt=0,this.gr="",this.Gt="",this.yr=[],this.kr=new Map,this.Zt=t,this.gr=i,this.Gt=Jt(t,n,s)}return t.prototype.destroy=function(){delete this.Kt,this.yr=[],this.kr.clear()},t.prototype.paintTo=function(t,i,n,s,h){var r=this.Nr(t,i);if("left"!==h){var u=Mn(t.canvas);n-=Math.floor(r.textWidth*u)}s-=Math.floor(r.height/2),t.drawImage(r.canvas,n,s,r.width,r.height)},t.prototype.Nr=function(t,i){var n,s=this;if(this.kr.has(i))n=f(this.kr.get(i));else{if(this.yr.length>=200){var h=f(this.yr.shift());this.kr.delete(h)}var r=Mn(t.canvas),u=Math.ceil(this.Zt/4.5),e=Math.round(this.Zt/10),o=Math.ceil(this.Kt.measureText(t,i)),a=at(Math.round(o+2*u)),c=at(this.Zt+2*u),l=pn(document,new wn(a,c));n={text:i,textWidth:Math.round(Math.max(1,o)),width:Math.ceil(a*r),height:Math.ceil(c*r),canvas:l},0!==o&&(this.yr.push(n.text),this.kr.set(n.text,n)),U(t=bn(n.canvas),r,(function(){t.font=s.Gt,t.fillStyle=s.gr,t.fillText(i,0,c-u-e)}))}return n},t}();!function(t){t[t.Default=0]="Default",t[t.NsResize=1]="NsResize"}(Bn||(Bn={}));var Fn,Pn,On=function(){function t(t,i,n,s){var h=this;this.B=null,this.xr=null,this.Sr=null,this.Dr=!1,this.Cr=!0,this.Tr=new Yt(50),this.Er=new Vn(11,"#000"),this.gr=null,this.Gt=null,this.Lr=0,this.Ar=function(){h.Br(h.vh.options()),h.O.chart().model().lightUpdate()},this.zr=function(){h.O.chart().model().lightUpdate()},this.O=t,this.K=i,this.vh=n,this.Vr="left"===s,this.vr=document.createElement("div"),this.vr.style.height="100%",this.vr.style.overflow="hidden",this.vr.style.width="25px",this.vr.style.left="0",this.vr.style.position="relative",this.Fr=gn(this.vr,new wn(16,16)),this.Fr.subscribeCanvasConfigured(this.Ar);var r=this.Fr.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Pr=gn(this.vr,new wn(16,16)),this.Pr.subscribeCanvasConfigured(this.zr);var u=this.Pr.canvas;u.style.position="absolute",u.style.zIndex="2",u.style.left="0",u.style.top="0";var e={mouseDownEvent:this.br.bind(this),pressedMouseMoveEvent:this.mr.bind(this),mouseDownOutsideEvent:this.Or.bind(this),mouseUpEvent:this.pr.bind(this),mouseDoubleClickEvent:this.Ir.bind(this),mouseEnterEvent:this.Rr.bind(this),mouseLeaveEvent:this.Wr.bind(this)};this.Mr=new Cn(this.Pr.canvas,e,{treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!0})}return t.prototype.destroy=function(){this.Mr.destroy(),this.Pr.unsubscribeCanvasConfigured(this.zr),this.Pr.destroy(),this.Fr.unsubscribeCanvasConfigured(this.Ar),this.Fr.destroy(),null!==this.B&&(this.B.onMarksChanged().unsubscribeAll(this),this.B.optionsChanged().unsubscribeAll(this)),this.B=null,null!==this.Sr&&(clearTimeout(this.Sr),this.Sr=null),this.Er.destroy()},t.prototype.getElement=function(){return this.vr},t.prototype.backgroundColor=function(){return this.K.backgroundColor},t.prototype.lineColor=function(){return this.O.chart().options().priceScale.borderColor},t.prototype.textColor=function(){return this.K.textColor},t.prototype.fontSize=function(){return this.K.fontSize},t.prototype.baseFont=function(){return Jt(this.fontSize(),this.K.fontFamily)},t.prototype.rendererOptions=function(){var t=this.vh.options(),i=this.gr!==t.color,n=this.Gt!==t.font;return(i||n)&&(this.Br(t),this.gr=t.color),n&&(this.Tr.reset(),this.Gt=t.font),t},t.prototype.optimalWidth=function(){if(!this.isVisible()||null===this.B)return 0;var t=34,i=this.rendererOptions(),n=bn(this.Fr.canvas),s=this.B.marks();n.font=this.baseFont(),s.length>0&&(t=Math.max(this.Tr.measureText(n,s[0].label),this.Tr.measureText(n,s[s.length-1].label)));for(var h=this.Ur(),r=h.length;r--;){var u=this.Tr.measureText(n,h[r].text());u>t&&(t=u)}var e=Math.ceil(i.borderSize+i.tickLength+i.paddingInner+i.paddingOuter+t);return e+=e%2},t.prototype.setSize=function(t){if(t.w<0||t.h<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.xr&&this.xr.equals(t)||(this.xr=t,this.Fr.resizeCanvas({width:t.w,height:t.h}),this.Pr.resizeCanvas({width:t.w,height:t.h}),this.vr.style.width=t.w+"px",this.vr.style.height=t.h+"px",this.vr.style.minWidth=t.w+"px")},t.prototype.getWidth=function(){return a(this.xr).w},t.prototype.setPriceScale=function(t){this.B!==t&&(null!==this.B&&(this.B.onMarksChanged().unsubscribeAll(this),this.B.optionsChanged().unsubscribeAll(this)),this.B=t,t.onMarksChanged().subscribe(this.vn.bind(this),this))},t.prototype.priceScale=function(){return this.B},t.prototype.isVisible=function(){return this.Cr},t.prototype.setVisible=function(t){t!==this.Cr&&(this.vr.style.display=t?"table-cell":"none",this.Cr=t)},t.prototype.setAutoScale=function(t){var i=this.O.state();this.O.chart().model().setPriceAutoScale(i,a(this.priceScale()),t)},t.prototype.reset=function(){var t=this.O.state();this.O.chart().model().resetPriceScale(t,a(this.priceScale()))},t.prototype.paint=function(t){if(this.Cr&&null!==this.xr){if(1!==t){var i=bn(this.Fr.canvas);this.jr(),this.qr(i,this.Fr.pixelRatio),this.Lt(i,this.Fr.pixelRatio),this.Hr(i,this.Fr.pixelRatio),this.Yr(i,this.Fr.pixelRatio)}var n=bn(this.Pr.canvas),s=this.xr.w,h=this.xr.h;U(n,this.Pr.pixelRatio,(function(){n.clearRect(0,0,s,h)})),this._r(n,this.Pr.pixelRatio)}},t.prototype.getImage=function(){return this.Fr.canvas},t.prototype.isLeft=function(){return this.Vr},t.prototype.br=function(t){if(null!==this.B&&!this.B.isEmpty()&&this.O.chart().options().handleScale.axisPressedMouseMove){var i=this.O.chart().model(),n=this.O.state();this.Dr=!0,i.startScalePrice(n,this.B,t.localY)}},t.prototype.mr=function(t){if(null!==this.B&&this.O.chart().options().handleScale.axisPressedMouseMove){var i=this.O.chart().model(),n=this.O.state(),s=this.B;i.scalePriceTo(n,s,t.localY)}},t.prototype.Or=function(){if(null!==this.B&&this.O.chart().options().handleScale.axisPressedMouseMove){var t=this.O.chart().model(),i=this.O.state(),n=this.B;this.Dr&&(this.Dr=!1,t.endScalePrice(i,n))}},t.prototype.pr=function(t){if(null!==this.B&&this.O.chart().options().handleScale.axisPressedMouseMove){var i=this.O.chart().model(),n=this.O.state();this.Dr=!1,i.endScalePrice(n,this.B)}},t.prototype.Ir=function(t){this.O.chart().options().handleScale.axisDoubleClickReset&&this.reset()},t.prototype.Rr=function(t){null!==this.B&&(!this.O.chart().model().options().handleScale.axisPressedMouseMove||this.B.isPercentage()||this.B.isIndexedTo100()||this.Kr(1))},t.prototype.Wr=function(t){this.Kr(0)},t.prototype.Ur=function(){var t=this,i=[],n=null===this.B?void 0:this.B;return function(s){for(var h=0;h<s.length;++h)for(var r=s[h].priceAxisViews(t.O.state(),n),u=0;u<r.length;u++)i.push(r[u])}(this.O.state().orderedSources()),i},t.prototype.qr=function(t,i){var n=this;if(null!==this.xr){var s=this.xr.w,h=this.xr.h;U(t,i,(function(){j(t,0,0,s,h,n.backgroundColor())}))}},t.prototype.Lt=function(t,i){if(null!==this.xr&&null!==this.B&&this.B.options().borderVisible){t.save(),t.fillStyle=this.lineColor();var n,s=Math.max(1,Math.floor(this.rendererOptions().borderSize*i));n=this.Vr?Math.floor(this.xr.w*i)-s:0,t.fillRect(n,0,s,Math.ceil(this.xr.h*i)),t.restore()}},t.prototype.Hr=function(t,i){if(null!==this.xr&&null!==this.B){var n=this.B.marks();t.save(),t.strokeStyle=this.lineColor(),t.font=this.baseFont(),t.fillStyle=this.lineColor();var s=this.rendererOptions(),h=this.B.options().borderVisible,r=this.Vr?Math.floor((this.xr.w-s.tickLength)*i-s.borderSize*i):Math.floor(s.borderSize*i),u=this.Vr?Math.round(r-s.paddingInner*i):Math.round(r+s.tickLength*i+s.paddingInner*i),e=this.Vr?"right":"left",o=Math.max(1,Math.floor(i)),f=Math.floor(.5*i);if(h){var a=Math.round(s.tickLength*i);t.beginPath();for(var c=0,l=n;c<l.length;c++){var v=l[c];t.rect(r,Math.round(v.coord*i)-f,a,o)}t.fill()}t.fillStyle=this.textColor();for(var d=0,w=n;d<w.length;d++){v=w[d];this.Er.paintTo(t,v.label,u,Math.round(v.coord*i),e)}t.restore()}},t.prototype.jr=function(){if(null!==this.xr&&null!==this.B){var t=this.xr.h/2,i=[],n=this.B.orderedSources().slice(),s=this.O.state(),h=this.rendererOptions();this.B===s.defaultPriceScale()&&this.O.state().orderedSources().forEach((function(t){s.isOverlay(t)&&n.push(t)}));var r=this.B.mainSource(),u=this.B;n.forEach((function(n){var h=n.priceAxisViews(s,u);h.forEach((function(t){t.setFixedCoordinate(null),t.isVisible()&&i.push(t)})),r===n&&h.length>0&&(t=h[0].coordinate())}));var e=i.filter((function(i){return i.coordinate()<=t})),o=i.filter((function(i){return i.coordinate()>t}));if(e.sort((function(t,i){return i.coordinate()-t.coordinate()})),e.length&&o.length&&o.push(e[0]),o.sort((function(t,i){return t.coordinate()-i.coordinate()})),i.forEach((function(t){return t.setFixedCoordinate(t.coordinate())})),this.B.options().alignLabels){for(var f=1;f<e.length;f++){var a=e[f],c=(v=e[f-1]).height(h,!1);a.coordinate()>(d=v.getFixedCoordinate())-c&&a.setFixedCoordinate(d-c)}for(var l=1;l<o.length;l++){var v,d;a=o[l],c=(v=o[l-1]).height(h,!0);a.coordinate()<(d=v.getFixedCoordinate())+c&&a.setFixedCoordinate(d+c)}}}},t.prototype.Yr=function(t,i){var n=this;if(null!==this.xr){t.save();var s=this.xr,h=this.Ur(),r=this.rendererOptions(),u=this.Vr?"right":"left";h.forEach((function(h){if(h.isAxisLabelVisible()){var e=h.renderer();t.save(),e.draw(t,r,n.Tr,s.w,u,i),t.restore()}})),t.restore()}},t.prototype._r=function(t,i){var n=this;if(null!==this.xr&&null!==this.B){t.save();var s=this.xr,h=this.O.chart().model(),r=[],u=this.O.state(),e=h.crosshairSource().priceAxisViews(u,this.B);e.length&&r.push(e);var o=this.rendererOptions(),f=this.Vr?"right":"left";r.forEach((function(h){h.forEach((function(h){t.save(),h.renderer().draw(t,o,n.Tr,s.w,f,i),t.restore()}))})),t.restore()}},t.prototype.Kr=function(t){this.vr.style.cursor=1===t?"ns-resize":"default"},t.prototype.vn=function(){var t=this,i=this.optimalWidth();if(this.Lr<i){var n=this.O.chart();null===this.Sr&&(this.Sr=setTimeout((function(){n&&n.model().fullUpdate(),t.Sr=null}),100))}this.Lr=i},t.prototype.Br=function(t){this.Er.destroy(),this.Er=new Vn(t.fontSize,t.color,t.fontFamily)},t}(),In=Dn,Rn=function(){function t(t,i){var n=this;this.xr=new wn(0,0),this.$r=null,this.Xr=null,this.Zr=!1,this.Jr="none",this.Gr=new ht,this.Qr=0,this.tu=!1,this.iu=null,this.nu=!1,this.su=null,this.Ar=function(){return n.hu&&n.F().lightUpdate()},this.zr=function(){return n.hu&&n.F().lightUpdate()},this.ru=t,this.hu=i,this.hu.onDestroyed().subscribe(this.uu.bind(this),this,!0),this.eu=document.createElement("td"),this.eu.style.padding="0",this.eu.style.position="relative";var s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.ou=document.createElement("td"),this.ou.style.padding="0",this.fu=document.createElement("td"),this.fu.style.padding="0",this.eu.appendChild(s),this.Fr=gn(s,new wn(16,16)),this.Fr.subscribeCanvasConfigured(this.Ar);var h=this.Fr.canvas;h.style.position="absolute",h.style.zIndex="1",h.style.left="0",h.style.top="0",this.Pr=gn(s,new wn(16,16)),this.Pr.subscribeCanvasConfigured(this.zr);var r=this.Pr.canvas;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.lr=document.createElement("tr"),this.lr.appendChild(this.ou),this.lr.appendChild(this.eu),this.lr.appendChild(this.fu),this.au(),t.model().mainPriceScaleOptionsChanged().subscribe(this.cu.bind(this),this),this.updatePriceAxisWidget();var u=this.chart().options().handleScroll;this.Mr=new Cn(this.Pr.canvas,this,{treatVertTouchDragAsPageScroll:!u.vertTouchDrag,treatHorzTouchDragAsPageScroll:!u.horzTouchDrag})}return t.prototype.destroy=function(){null!==this.$r&&this.$r.destroy(),this.Pr.unsubscribeCanvasConfigured(this.zr),this.Pr.destroy(),this.Fr.unsubscribeCanvasConfigured(this.Ar),this.Fr.destroy(),null!==this.hu&&this.hu.onDestroyed().unsubscribeAll(this),this.Mr.destroy()},t.prototype.state=function(){return a(this.hu)},t.prototype.stateOrNull=function(){return this.hu},t.prototype.setState=function(i){null!==this.hu&&this.hu.onDestroyed().unsubscribeAll(this),this.hu=i,null!==this.hu&&this.hu.onDestroyed().subscribe(t.prototype.uu.bind(this),this,!0),this.updatePriceAxisWidget()},t.prototype.chart=function(){return this.ru},t.prototype.getElement=function(){return this.lr},t.prototype.updatePriceAxisWidget=function(){if(null!==this.hu&&null!==this.$r&&0!==this.F().serieses().length){var t=this.hu.defaultPriceScale();this.$r.setPriceScale(a(t))}},t.prototype.stretchFactor=function(){return null!==this.hu?this.hu.stretchFactor():0},t.prototype.setStretchFactor=function(t){this.hu&&this.hu.setStretchFactor(t)},t.prototype.mouseEnterEvent=function(t){if(this.hu){var i=t.localX,n=t.localY;Nn||this.lu(i,n)}},t.prototype.mouseDownEvent=function(t){if(this.tu=!1,this.nu=null!==this.iu,this.hu){if(document.activeElement!==document.body&&document.activeElement!==document.documentElement)a(document.activeElement).blur();else{var i=document.getSelection();null!==i&&i.removeAllRanges()}var n=this.F();if(!this.hu.defaultPriceScale().isEmpty()&&!n.timeScale().isEmpty()){if(null!==this.iu){var s=n.crosshairSource();this.su={x:s.appliedX(),y:s.appliedY()},this.iu={x:t.localX,y:t.localY}}Nn||this.lu(t.localX,t.localY)}}},t.prototype.mouseMoveEvent=function(t){if(this.hu){var i=t.localX,n=t.localY;if(this.vu()&&this.du(),!Nn){this.lu(i,n);var s=this.hitTest(i,n);this.F().setHoveredSource(s&&{source:s.source,object:s.object}),null!==s&&void 0!==s.view.moveHandler&&s.view.moveHandler(i,n)}}},t.prototype.mouseClickEvent=function(t){if(null!==this.hu){var i=t.localX,n=t.localY,s=this.hitTest(i,n);if(null!==s&&void 0!==s.view.clickHandler&&s.view.clickHandler(i,n),this.Gr.hasListeners()){var h=this.F().crosshairSource().appliedIndex();this.Gr.fire(h,{x:i,y:n})}this.wu()}},t.prototype.pressedMouseMoveEvent=function(t){if(null!==this.hu){var i=this.F(),n=t.localX,s=t.localY;if(null!==this.iu){this.nu=!1;var h=a(this.su),r=h.x+(n-this.iu.x),u=h.y+(s-this.iu.y);this.lu(r,u)}else this.vu()||this.lu(n,s);if(!i.timeScale().isEmpty()){var e=this.ru.options().handleScroll;if(e.pressedMouseMove&&"touch"!==t.type||(e.horzTouchDrag||e.vertTouchDrag)&&"mouse"!==t.type){var o=this.hu.defaultPriceScale();null!==this.Xr||this.Mu()||(this.Xr={x:t.clientX,y:t.clientY}),null===this.Xr||this.Xr.x===t.clientX&&this.Xr.y===t.clientY||this.Zr||(o.isEmpty()||i.startScrollPrice(this.hu,o,t.localY),i.startScrollTime(t.localX),this.Zr=!0),this.Zr&&(o.isEmpty()||i.scrollPriceTo(this.hu,o,t.localY),i.scrollTimeTo(t.localX))}}}},t.prototype.mouseUpEvent=function(t){if(null!==this.hu){this.tu=!1;var i=this.F();if(this.Zr){var n=this.hu.defaultPriceScale();i.endScrollPrice(this.hu,n),i.endScrollTime(),this.Xr=null,this.Zr=!1}}},t.prototype.longTapEvent=function(t){if(this.tu=!0,null===this.iu&&In){var i={x:t.localX,y:t.localY};this.bu(i,i)}},t.prototype.mouseLeaveEvent=function(t){null!==this.hu&&(this.hu.model().setHoveredSource(null),Dn||this.du())},t.prototype.clicked=function(){return this.Gr},t.prototype.pinchStartEvent=function(){this.Qr=1},t.prototype.pinchEvent=function(t,i){if(this.ru.options().handleScale.pinch){var n=5*(i-this.Qr);this.Qr=i,this.F().zoomTime(t.x,n)}},t.prototype.hitTest=function(t,i){var n=this.hu;if(null===n)return null;for(var s=0,h=n.orderedSources();s<h.length;s++){var r=h[s],u=this.mu(r.paneViews(n),t,i);if(null!==u)return{source:r,view:u.view,object:u.object}}return null},t.prototype.setPriceAxisSize=function(t){a(this.$r).setSize(new wn(t,this.xr.h))},t.prototype.getSize=function(){return this.xr},t.prototype.setSize=function(t){if(t.w<0||t.h<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.xr.equals(t)||(this.xr=t,this.Fr.resizeCanvas({width:t.w,height:t.h}),this.Pr.resizeCanvas({width:t.w,height:t.h}),this.eu.style.width=t.w+"px",this.eu.style.height=t.h+"px")},t.prototype.recalculatePriceScale=function(){var t=a(this.hu);t.recalculatePriceScale(t.defaultPriceScale());for(var i=0,n=t.dataSources();i<n.length;i++){var s=n[i];if(t.isOverlay(s)){var h=s.priceScale();null!==h&&t.recalculatePriceScale(h),s.updateAllViews()}}},t.prototype.getImage=function(){return this.Fr.canvas},t.prototype.paint=function(t){if(0!==t&&null!==this.hu){if(t>1&&this.recalculatePriceScale(),null!==this.$r&&this.$r.paint(t),1!==t){var i=bn(this.Fr.canvas);i.save(),this.qr(i,this.pu(),this.Fr.pixelRatio),this.hu&&(this.gu(i,this.Fr.pixelRatio),this.yu(i,this.Fr.pixelRatio),this.ku(i,this.Fr.pixelRatio)),i.restore()}var n=bn(this.Pr.canvas);n.clearRect(0,0,Math.ceil(this.xr.w*this.Pr.pixelRatio),Math.ceil(this.xr.h*this.Pr.pixelRatio)),this.Nu(n,this.Pr.pixelRatio)}},t.prototype.priceAxisWidget=function(){return this.$r},t.prototype.pu=function(){return this.ru.options().layout.backgroundColor},t.prototype.uu=function(){null!==this.hu&&this.hu.onDestroyed().unsubscribeAll(this),this.hu=null},t.prototype.qr=function(t,i,n){var s=this;U(t,n,(function(){j(t,0,0,s.xr.w,s.xr.h,i)}))},t.prototype.gu=function(t,i){for(var n=a(this.hu),s=this.F().gridSource().paneViews(n),h=n.height(),r=n.width(),u=0,e=s;u<e.length;u++){var o=e[u];t.save();var f=o.renderer(h,r);null!==f&&f.draw(t,i,!1),t.restore()}},t.prototype.yu=function(t,i){var n=this.F().watermarkSource();if(null!==n){var s=a(this.hu);if(s.containsSeries())for(var h=n.paneViews(),r=s.height(),u=s.width(),e=0,o=h;e<o.length;e++){var f=o[e];t.save();var c=f.renderer(r,u);null!==c&&c.draw(t,i,!1),t.restore()}}},t.prototype.Nu=function(t,i){this.xu(this.F().crosshairSource(),t,i)},t.prototype.ku=function(t,i){for(var n=a(this.hu).orderedSources(),s=this.F().crosshairSource(),h=0,r=n;h<r.length;h++){var u=r[h];this.Su(u,t,i)}for(var e=0,o=n;e<o.length;e++){(u=o[e])!==s&&this.xu(u,t,i)}},t.prototype.xu=function(t,i,n){for(var s=a(this.hu),h=t.paneViews(s),r=s.height(),u=s.width(),e=s.model().hoveredSource(),o=null!==e&&e.source===t,f=null!==e&&o&&void 0!==e.object?e.object.hitTestData:void 0,c=0,l=h;c<l.length;c++){var v=l[c].renderer(r,u);null!==v&&(i.save(),v.draw(i,n,o,f),i.restore())}},t.prototype.Su=function(t,i,n){for(var s=a(this.hu),h=t.paneViews(s),r=s.height(),u=s.width(),e=s.model().hoveredSource(),o=null!==e&&e.source===t,f=null!==e&&o&&void 0!==e.object?e.object.hitTestData:void 0,c=0,l=h;c<l.length;c++){var v=l[c].renderer(r,u);null!==v&&void 0!==v.drawBackground&&(i.save(),v.drawBackground(i,n,o,f),i.restore())}},t.prototype.mu=function(t,i,n){for(var s=0,h=t;s<h.length;s++){var r=h[s],u=r.renderer(this.xr.h,this.xr.w);if(null!==u&&u.hitTest){var e=u.hitTest(i,n);if(null!==e)return{view:r,object:e}}}return null},t.prototype.cu=function(){this.au(),this.ru.adjustSize()},t.prototype.au=function(){if(null!==this.hu){var t=this.ru,i=this.hu.defaultPriceScale().options().position;if(this.Jr!==i){if(null!==this.$r&&(this.$r.isLeft()?this.ou.removeChild(this.$r.getElement()):this.fu.removeChild(this.$r.getElement()),this.$r.destroy(),this.$r=null),"none"!==i){var n=t.model().rendererOptionsProvider();this.$r=new On(this,t.options().layout,n,i),"left"===i&&this.ou.appendChild(this.$r.getElement()),"right"===i&&this.fu.appendChild(this.$r.getElement())}this.Jr=i}}},t.prototype.vu=function(){return In&&null===this.iu},t.prototype.Mu=function(){return In&&this.tu||null!==this.iu},t.prototype.Du=function(t){return Math.max(0,Math.min(t,this.xr.w-1))},t.prototype.Cu=function(t){return Math.max(0,Math.min(t,this.xr.h-1))},t.prototype.lu=function(t,i){this.F().setAndSaveCurrentPosition(this.Du(t),this.Cu(i),a(this.hu))},t.prototype.du=function(){this.F().clearCurrentPosition()},t.prototype.wu=function(){this.nu&&(this.iu=null,this.du())},t.prototype.bu=function(t,i){this.iu=t,this.nu=!1,this.lu(i.x,i.y);var n=this.F().crosshairSource();this.su={x:n.appliedX(),y:n.appliedY()}},t.prototype.F=function(){return this.ru.model()},t}(),Wn=function(){function t(t,i,n,s){var h=this;this.o=!0,this.xr=new wn(0,0),this.Ar=function(){return h.paint(3)},this.Vr="left"===t,this.vh=n.rendererOptionsProvider,this.K=i,this.Tu=s,this.vr=document.createElement("div"),this.vr.style.width="25px",this.vr.style.height="100%",this.vr.style.overflow="hidden",this.Fr=gn(this.vr,new wn(16,16)),this.Fr.subscribeCanvasConfigured(this.Ar)}return t.prototype.destroy=function(){this.Fr.unsubscribeCanvasConfigured(this.Ar),this.Fr.destroy()},t.prototype.update=function(){this.o=!0},t.prototype.getElement=function(){return this.vr},t.prototype.getSize=function(){return this.xr},t.prototype.setSize=function(t){if(t.w<0||t.h<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.xr.equals(t)||(this.xr=t,this.Fr.resizeCanvas({width:t.w,height:t.h}),this.vr.style.width=t.w+"px",this.vr.style.minWidth=t.w+"px",this.vr.style.height=t.h+"px",this.o=!0)},t.prototype.paint=function(t){if((!(t<3)||this.o)&&0!==this.xr.w&&0!==this.xr.h){this.o=!1;var i=bn(this.Fr.canvas);this.qr(i,this.Fr.pixelRatio),this.Lt(i,this.Fr.pixelRatio)}},t.prototype.getImage=function(){return this.Fr.canvas},t.prototype.isLeft=function(){return this.Vr},t.prototype.Lt=function(t,i){if(this.Tu()){var n=this.xr.w;t.save(),t.fillStyle=this.K.timeScale.borderColor;var s=Math.floor(this.vh.options().borderSize*i),h=this.Vr?Math.round(n*i)-s:0;t.fillRect(h,0,s,s),t.restore()}},t.prototype.qr=function(t,i){var n=this;U(t,i,(function(){j(t,0,0,n.xr.w,n.xr.h,n.K.layout.backgroundColor)}))},t}();function Un(t,i){return t.span>i.span?t:i}!function(t){t[t.BorderSize=1]="BorderSize",t[t.TickLength=3]="TickLength"}(Fn||(Fn={})),function(t){t[t.Default=0]="Default",t[t.EwResize=1]="EwResize"}(Pn||(Pn={}));var jn=function(){function t(t){var i=this;this.Eu=null,this.Lu=70,this.Ht=null,this.Au=!1,this.xr=new wn(0,0),this.Jr="none",this.Ar=function(){return i.ru.model().lightUpdate()},this.zr=function(){return i.ru.model().lightUpdate()},this.ru=t,this.K=t.options().layout,this.Bu=document.createElement("tr"),this.zu=document.createElement("td"),this.zu.style.padding="0",this.Vu=document.createElement("td"),this.Vu.style.padding="0",this.vr=document.createElement("td"),this.vr.style.height="25px",this.vr.style.padding="0",this.Fu=document.createElement("div"),this.Fu.style.width="100%",this.Fu.style.height="100%",this.Fu.style.position="relative",this.Fu.style.overflow="hidden",this.vr.appendChild(this.Fu),this.Fr=gn(this.Fu,new wn(16,16)),this.Fr.subscribeCanvasConfigured(this.Ar);var n=this.Fr.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Pr=gn(this.Fu,new wn(16,16)),this.Pr.subscribeCanvasConfigured(this.zr);var s=this.Pr.canvas;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.Bu.appendChild(this.zu),this.Bu.appendChild(this.vr),this.Bu.appendChild(this.Vu),this.Pu(),this.ru.model().mainPriceScaleOptionsChanged().subscribe(this.Pu.bind(this),this),this.Mr=new Cn(this.Pr.canvas,this,{treatVertTouchDragAsPageScroll:!0,treatHorzTouchDragAsPageScroll:!1})}return t.prototype.destroy=function(){this.Mr.destroy(),null!==this.Eu&&this.Eu.destroy(),this.Pr.unsubscribeCanvasConfigured(this.zr),this.Pr.destroy(),this.Fr.unsubscribeCanvasConfigured(this.Ar),this.Fr.destroy()},t.prototype.getElement=function(){return this.Bu},t.prototype.stub=function(){return this.Eu},t.prototype.mouseDownEvent=function(t){if(!this.Au){this.Au=!0;var i=this.ru.model();!i.timeScale().isEmpty()&&this.ru.options().handleScale.axisPressedMouseMove&&i.startScaleTime(t.localX)}},t.prototype.mouseDownOutsideEvent=function(){var t=this.ru.model();!t.timeScale().isEmpty()&&this.Au&&(this.Au=!1,this.ru.options().handleScale.axisPressedMouseMove&&t.endScaleTime())},t.prototype.pressedMouseMoveEvent=function(t){var i=this.ru.model();!i.timeScale().isEmpty()&&this.ru.options().handleScale.axisPressedMouseMove&&i.scaleTimeTo(t.localX)},t.prototype.mouseUpEvent=function(t){this.Au=!1;var i=this.ru.model();i.timeScale().isEmpty()&&!this.ru.options().handleScale.axisPressedMouseMove||i.endScaleTime()},t.prototype.mouseDoubleClickEvent=function(){this.ru.options().handleScale.axisDoubleClickReset&&this.ru.model().resetTimeScale()},t.prototype.mouseEnterEvent=function(t){this.ru.model().options().handleScale.axisPressedMouseMove&&this.Kr(1)},t.prototype.mouseLeaveEvent=function(t){this.Kr(0)},t.prototype.getSize=function(){return this.xr},t.prototype.setSizes=function(t,i){this.xr&&this.xr.equals(t)||(this.xr=t,this.Fr.resizeCanvas({width:t.w,height:t.h}),this.Pr.resizeCanvas({width:t.w,height:t.h}),this.vr.style.width=t.w+"px",this.vr.style.height=t.h+"px"),null!==this.Eu&&this.Eu.setSize(new wn(i,t.h))},t.prototype.width=function(){return this.xr.w},t.prototype.height=function(){return this.xr.h},t.prototype.optimalHeight=function(){var t=this.Ou();return Math.ceil(t.borderSize+t.tickLength+t.fontSize+t.paddingTop+t.paddingBottom)},t.prototype.update=function(){var t=this,i=this.ru.model().timeScale().marks();i&&(this.Lu=70,i.forEach((function(i){t.Lu=Math.min(i.span,t.Lu)})))},t.prototype.getImage=function(){return this.Fr.canvas},t.prototype.paint=function(t){if(0!==t){if(1!==t){var i=bn(this.Fr.canvas);this.qr(i,this.Fr.pixelRatio),this.Lt(i,this.Fr.pixelRatio),this.Hr(i,this.Fr.pixelRatio),this.Yr(i,this.Fr.pixelRatio),null!==this.Eu&&this.Eu.paint(t)}var n=bn(this.Pr.canvas);this._r(n,this.Pr.pixelRatio)}},t.prototype.qr=function(t,i){var n=this;U(t,i,(function(){j(t,0,0,n.xr.w,n.xr.h,n.pu())}))},t.prototype.Lt=function(t,i){if(this.ru.options().timeScale.borderVisible){t.save(),t.fillStyle=this.Iu();var n=Math.max(1,Math.floor(this.Ou().borderSize*i));t.fillRect(0,0,Math.ceil(this.xr.w*i),n),t.restore()}},t.prototype.Hr=function(t,i){var n=this,s=this.ru.model().timeScale().marks();if(s&&0!==s.length){var h=s.reduce(Un,s[0]).span;h>30&&h<40&&(h=30),t.save(),t.strokeStyle=this.Iu();var r=this.Ou(),u=r.borderSize+r.tickLength+r.paddingTop+r.fontSize-r.baselineOffset;t.textAlign="center",t.fillStyle=this.Iu();var e=Math.floor(this.Ou().borderSize*i),o=Math.max(1,Math.floor(i)),f=Math.floor(.5*i);if(this.ru.model().timeScale().options().borderVisible){t.beginPath();for(var a=Math.round(r.tickLength*i),c=s.length;c--;){var l=Math.round(s[c].coord*i);t.rect(l-f,e,o,a)}t.fill()}t.fillStyle=this.Vs(),U(t,i,(function(){t.font=n.Ru();for(var i=0,r=s;i<r.length;i++){(f=r[i]).span<h&&t.fillText(f.label,f.coord,u)}t.font=n.Wu();for(var e=0,o=s;e<o.length;e++){var f;(f=o[e]).span>=h&&t.fillText(f.label,f.coord,u)}}))}},t.prototype.Yr=function(t,i){t.save();var n=new Set,s=this.ru.model(),h=s.dataSources();n.add(s.crosshairSource());for(var r=this.Ou(),u=0,e=h;u<e.length;u++){var o=e[u];if(!n.has(o))for(var f=0,a=o.timeAxisViews();f<a.length;f++){a[f].renderer().draw(t,r,i)}}t.restore()},t.prototype._r=function(t,i){t.save(),t.clearRect(0,0,Math.ceil(this.xr.w*i),Math.ceil(this.xr.h*i));var n=[],s=this.ru.model().crosshairSource().timeAxisViews();n.push(s);var h=this.Ou();n.forEach((function(n){n.forEach((function(n){t.save(),n.renderer().draw(t,h,i),t.restore()}))})),t.restore()},t.prototype.pu=function(){return this.K.backgroundColor},t.prototype.Iu=function(){return this.ru.options().timeScale.borderColor},t.prototype.Vs=function(){return this.K.textColor},t.prototype.Zt=function(){return this.K.fontSize},t.prototype.Ru=function(){return Jt(this.Zt(),this.K.fontFamily)},t.prototype.Wu=function(){return Jt(this.Zt(),this.K.fontFamily,"bold")},t.prototype.Ou=function(){null===this.Ht&&(this.Ht={borderSize:1,baselineOffset:NaN,paddingTop:NaN,paddingBottom:NaN,paddingHorizontal:NaN,tickLength:3,fontSize:NaN,font:"",widthCache:new Yt});var t=this.Ht,i=this.Ru();if(t.font!==i){var n=this.Zt();t.fontSize=n,t.font=i,t.paddingTop=Math.ceil(n/2.5),t.paddingBottom=t.paddingTop,t.paddingHorizontal=Math.ceil(n/2),t.baselineOffset=Math.round(this.Zt()/5),t.widthCache.reset()}return this.Ht},t.prototype.Kr=function(t){this.vr.style.cursor=1===t?"ew-resize":"default"},t.prototype.Pu=function(){var t=this.ru.model().mainPriceScale().options().position;if(t!==this.Jr){if(null!==this.Eu&&(this.Eu.isLeft()?this.zu.removeChild(this.Eu.getElement()):this.Vu.removeChild(this.Eu.getElement()),this.Eu.destroy(),this.Eu=null),"none"!==t){var i={rendererOptionsProvider:this.ru.model().rendererOptionsProvider()},n=this.ru.model();this.Eu=new Wn(t,this.ru.options(),i,(function(){return n.mainPriceScale().options().borderVisible&&n.timeScale().options().borderVisible})),("left"===t?this.zu:this.Vu).appendChild(this.Eu.getElement())}this.Jr=t}},t}(),qn=function(){function t(t,i){var n=this;this.Uu=[],this.ju=[],this.qu=0,this.Hu=new ht,this.hn=0,this._t=0,this.Yu=0,this._u=null,this.Ku=!1,this.Gr=new ht,this.ah=new ht,this.K=i,this.Bu=document.createElement("div"),this.Bu.classList.add("tv-lightweight-charts"),this.Bu.style.overflow="hidden",this.Bu.style.width="100%",this.Bu.style.height="100%",this.$u=document.createElement("table"),this.$u.setAttribute("cellspacing","0"),this.Bu.appendChild(this.$u),this.Xu=this.Zu.bind(this),this.Bu.addEventListener("wheel",this.Xu,{passive:!1}),this.F=new ln(this.lh.bind(this),this.K),this.model().crosshairMoved().subscribe(this.Ju.bind(this),this),this.Gu=new jn(this),this.$u.appendChild(this.Gu.getElement());var s=this.K.width,h=this.K.height;if(0===s||0===h){var r=t.getBoundingClientRect();0===s&&(s=Math.floor(r.width),s-=s%2),0===h&&(h=Math.floor(r.height),h-=h%2)}s=Math.max(70,s),h=Math.max(50,h),this.resize(s,h),this.Qu(),t.appendChild(this.Bu),this.te(),this.F.timeScale().optionsApplied().subscribe((function(){n.te(),n.adjustSize()}),this)}return t.prototype.model=function(){return this.F},t.prototype.options=function(){return this.K},t.prototype.paneWidgets=function(){return this.Uu},t.prototype.destroy=function(){this.Bu.removeEventListener("wheel",this.Xu),0!==this.qu&&window.cancelAnimationFrame(this.qu),this.F.crosshairMoved().unsubscribeAll(this),this.F.timeScale().optionsApplied().unsubscribeAll(this),this.F.destroy();for(var t=0,i=this.Uu;t<i.length;t++){var n=i[t];this.$u.removeChild(n.getElement()),n.clicked().unsubscribeAll(this),n.destroy()}this.Uu=[];for(var s=0,h=this.ju;s<h.length;s++){var r=h[s];this.ie(r)}this.ju=[],a(this.Gu).destroy(),null!==this.Bu.parentElement&&this.Bu.parentElement.removeChild(this.Bu),this.ah.destroy(),this.Gr.destroy(),delete this.Bu},t.prototype.resize=function(t,i,n){if(void 0===n&&(n=!1),this.hn!==i||this._t!==t){this.hn=i,this._t=t;var s=i+"px",h=t+"px";a(this.Bu).style.height=s,a(this.Bu).style.width=h,this.$u.style.height=s,this.$u.style.width=h,n?this.ne(new un(3)):this.F.fullUpdate()}},t.prototype.paint=function(t){void 0===t&&(t=new un(3));for(var i=0;i<this.Uu.length;i++)this.Uu[i].paint(t.invalidateForPane(i).level);this.Gu.paint(t.fullInvalidation())},t.prototype.adjustSize=function(){this.se(),this.F.fullUpdate()},t.prototype.applyOptions=function(t){this.F.applyOptions(t),this.te();var i=t.width||this._t,n=t.height||this.hn;this.resize(i,n)},t.prototype.clicked=function(){return this.Gr},t.prototype.crosshairMoved=function(){return this.ah},t.prototype.takeScreenshot=function(){var t=this;null!==this._u&&(this.ne(this._u),this._u=null);var i=this.Uu[0],n=pn(document,new wn(this._t,this.hn)),s=bn(n),h=Mn(n);return U(s,h,(function(){var n=0,h=0,r=function(){for(var i=0;i<t.Uu.length;i++){var r=t.Uu[i],u=r.getSize().h,e=a(r.priceAxisWidget()),o=e.getImage();s.drawImage(o,n,h,e.getWidth(),u),h+=u,i<t.Uu.length-1&&(h+=1)}};"left"===t.K.priceScale.position&&(r(),n=a(i.priceAxisWidget()).getWidth()),h=0;for(var u=0;u<t.Uu.length;u++){var e=t.Uu[u],o=e.getSize(),f=e.getImage();if(s.drawImage(f,n,h,o.w,o.h),h+=o.h,u<t.Uu.length-1){var c=t.ju[u],l=c.getSize(),v=c.getImage();s.drawImage(v,n,h,l.w,l.h),h+=l.h}}n+=i.getSize().w,"right"===t.K.priceScale.position&&(h=0,r());var d=function(){var i=a(t.Gu.stub()),r=i.getSize(),u=i.getImage();s.drawImage(u,n,h,r.w,r.h)};if(t.K.timeScale.visible){n=0,"left"===t.K.priceScale.position&&(d(),n=a(i.priceAxisWidget()).getWidth());var w=t.Gu.getSize();f=t.Gu.getImage();s.drawImage(f,n,h,w.w,w.h),"right"===t.K.priceScale.position&&(n=i.getSize().w,d(),s.restore())}})),n},t.prototype.se=function(){for(var t=0,i=0,n=0,s=this.Uu;n<s.length;n++){var h=s[n];"none"!==this.K.priceScale.position&&(i=Math.max(i,a(h.priceAxisWidget()).optimalWidth())),t+=h.stretchFactor()}var r=this._t,u=this.hn,e=Math.max(r-i,0),o=1*this.ju.length,f=this.K.timeScale.visible?this.Gu.optimalHeight():0;f%2&&(f+=1);for(var c=o+f,l=u<c?0:u-c,v=l/t,d=0,w=0;w<this.Uu.length;++w){(h=this.Uu[w]).setState(this.F.panes()[w]);var M,b=0;b=w===this.Uu.length-1?l-d:Math.round(h.stretchFactor()*v),d+=M=Math.max(b,2),h.setSize(new wn(e,M)),"none"!==this.K.priceScale.position&&h.setPriceAxisSize(i),h.state()&&this.F.setPaneHeight(h.state(),M)}this.Gu.setSizes(new wn(e,f),i),this.F.setWidth(e),this.Yu!==i&&(this.Yu=i,this.Hu.fire(i))},t.prototype.Zu=function(t){var i=t.deltaX/100,n=-t.deltaY/100;if(0!==i&&this.K.handleScroll.mouseWheel||0!==n&&this.K.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,n*=120;break;case t.DOM_DELTA_LINE:i*=32,n*=32}if(0!==n&&this.K.handleScale.mouseWheel){var s=Math.sign(n)*Math.min(1,Math.abs(n)),h=t.clientX-this.Bu.getBoundingClientRect().left;this.model().zoomTime(h,s)}0!==i&&this.K.handleScroll.mouseWheel&&this.model().scrollChart(-80*i)}},t.prototype.ne=function(t){var i=t.fullInvalidation();if(3===i&&this.he(),3===i||2===i){for(var n=this.F.panes(),s=0;s<n.length;s++)t.invalidateForPane(s).autoScale&&n[s].momentaryAutoScale();t.getFitContent()&&this.F.timeScale().fitContent();var h=t.getTargetTimeRange();null!==h&&this.F.timeScale().setTimePointsRange(h),this.Gu.update()}this.paint(t)},t.prototype.lh=function(t){var i=this;null!==this._u?this._u.merge(t):this._u=t,this.Ku||(this.Ku=!0,this.qu=window.requestAnimationFrame((function(){i.Ku=!1,i.qu=0,null!==i._u&&(i.ne(i._u),i._u=null)})))},t.prototype.he=function(){this.Qu()},t.prototype.ie=function(t){this.$u.removeChild(t.getElement()),t.destroy()},t.prototype.Qu=function(){for(var t=this.F.panes(),i=t.length,n=this.Uu.length,s=i;s<n;s++){var h=f(this.Uu.pop());this.$u.removeChild(h.getElement()),h.clicked().unsubscribeAll(this),h.destroy(),void 0!==(r=this.ju.pop())&&this.ie(r)}for(s=n;s<i;s++){if((h=new Rn(this,t[s])).clicked().subscribe(this.ue.bind(this),this),this.Uu.push(h),s>1){var r=new zn(this,s-1,s,!0);this.ju.push(r),this.$u.insertBefore(r.getElement(),this.Gu.getElement())}this.$u.insertBefore(h.getElement(),this.Gu.getElement())}for(s=0;s<i;s++){var u=t[s];(h=this.Uu[s]).state()!==u?h.setState(u):h.updatePriceAxisWidget()}this.te(),this.se()},t.prototype.ee=function(t,i){var n,s=new Map;null!==t&&this.F.serieses().forEach((function(i){var n=i.dataAt(t);null!==n&&s.set(i,n)}));if(null!==t){var h=this.F.timeScale().indexToUserTime(t);null!==h&&(n=h)}var r=this.model().hoveredSource(),u=null!==r&&r.source instanceof Ti?r.source:void 0,e=null!==r&&void 0!==r.object?r.object.externalId:void 0;return{time:n,point:i||void 0,hoveredSeries:u,seriesPrices:s,hoveredObject:e}},t.prototype.ue=function(t,i){var n=this;this.Gr.fire((function(){return n.ee(t,i)}))},t.prototype.Ju=function(t,i){var n=this;this.ah.fire((function(){return n.ee(t,i)}))},t.prototype.te=function(){var t=this.K.timeScale.visible?"":"none";this.Gu.getElement().style.display=t},t}();function Hn(t){if(!Gi(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{timestamp:Math.round(i.getTime()/1e3),businessDay:t}}function Yn(t){if(!Qi(t))throw new Error("time must be of type isUTCTimestamp");return{timestamp:t}}function _n(t){return 0===t.length?null:Gi(t[0].time)?Hn:Yn}function Kn(t){return Qi(t)?Yn(t):Gi(t)?Hn(t):Hn(hs(t))}function $n(t,i){var n=t.value,s=null;return"color"in t&&void 0!==t.color&&(s=i.addColor(t.color)),[n,n,n,n,s]}function Xn(t,i){return[t.open,t.high,t.low,t.close,null]}var Zn={Candlestick:Xn,Bar:Xn,Area:$n,Histogram:$n,Line:$n};function Jn(t){return Zn[t]}function Gn(t){return 60*t*60*1e3}function Qn(t){return 60*t*1e3}var ts,is=[{divisor:1,span:20},{divisor:(ts=1,1e3*ts),span:19},{divisor:Qn(1),span:20},{divisor:Qn(5),span:21},{divisor:Qn(30),span:22},{divisor:Gn(1),span:30},{divisor:Gn(3),span:31},{divisor:Gn(6),span:32},{divisor:Gn(12),span:33}];function ns(t,i){if(null!==i){var n=new Date(1e3*i),s=new Date(1e3*t);if(s.getUTCFullYear()!==n.getUTCFullYear())return 70;if(s.getUTCMonth()!==n.getUTCMonth())return 60;if(s.getUTCDate()!==n.getUTCDate())return 50;for(var h=is.length-1;h>=0;--h)if(Math.floor(n.getTime()/is[h].divisor)!==Math.floor(s.getTime()/is[h].divisor))return is[h].span}return 20}function ss(t,i){return t.timestamp<i.timestamp}function hs(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string="+t+", expected format=yyyy-mm-dd");return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function rs(t){w(t.time)&&(t.time=hs(t.time))}var us=function(){function t(){this.oe=new Map,this.fe=new Map,this.ae=[]}return t.prototype.destroy=function(){this.oe.clear(),this.fe.clear(),this.ae=[]},t.prototype.setSeriesData=function(t,i){var n=this;t.clearData(),function(t){t.forEach(rs)}(i),this.oe.forEach((function(i){return i.mapping.delete(t)}));var s=_n(i);null!==s&&i.forEach((function(i){var h=s(i.time),r=n.oe.get(h.timestamp)||{index:0,mapping:new Map,timePoint:h};r.mapping.set(t,i),n.oe.set(h.timestamp,r)}));var h=new Map;return this.oe.forEach((function(t,i){t.mapping.size>0&&h.set(i,t)})),this.ce(h)},t.prototype.removeSeries=function(t){return this.setSeriesData(t,[])},t.prototype.updateSeriesData=function(t,i){rs(i);var n=t.data().bars();if(n.size()>0)if(void 0!==a(n.last()).time.businessDay){if(!Gi(i.time))throw new Error("time must be of type BusinessDay")}else if(!Qi(i.time))throw new Error("time must be of type isUTCTimestamp");var s=a(_n([i]))(i.time),h=this.oe.get(s.timestamp)||{index:0,mapping:new Map,timePoint:s},r=0===h.mapping.size;h.mapping.set(t,i);var u=!1;if(r){var e=this.oe.size;this.ae.length>0&&this.ae[this.ae.length-1].timestamp>s.timestamp?(e=Dt(this.ae,s,ss),this.ae.splice(e,0,s),this.le(e),u=!0):this.ae.push(s),h.index=e,this.fe.set(h.index,s)}this.oe.set(s.timestamp,h);var o=new Map,c=function(i){var n=f(l.fe.get(i));f(l.oe.get(n.timestamp)).mapping.forEach((function(s,h){if(u||h===t){var r=Jn(h.seriesType()),e=o.get(h)||{update:[]},f={index:i,time:n,value:r(s,h.palette())};e.update.push(f),o.set(h,e)}}))},l=this;for(e=h.index;e<this.oe.size;++e)c(e);var v=r?this.ve(h.index):[],d=r?this.ae.slice(h.index):[];return{timeScaleUpdate:{seriesUpdates:o,changes:d,index:h.index,marks:v}}},t.prototype.ce=function(t){var i=this;this.oe=t,this.ae=Array.from(this.oe.values()).map((function(t){return t.timePoint})),this.ae.sort((function(t,i){return t.timestamp-i.timestamp}));var n=new Map;this.ae.forEach((function(t,s){var h=f(i.oe.get(t.timestamp));h.index=s,h.mapping.forEach((function(i,h){var r=Jn(h.seriesType()),u=n.get(h)||{update:[]},e={index:s,time:t,value:r(i,h.palette())};u.update.push(e),n.set(h,u)}))}));var s=null,h=0,r=this.ae.map((function(t,i){h+=t.timestamp-(s||t.timestamp);var n=ns(t.timestamp,s);return s=t.timestamp,{span:n,time:t,index:i}}));if(r.length>1){var u=Math.ceil(h/(r.length-1)),e=r[0].time.timestamp-u;r[0].span=ns(r[0].time.timestamp,e)}var o={seriesUpdates:n,changes:this.ae.slice(),index:0,marks:r};return this.de(),{timeScaleUpdate:o}},t.prototype.le=function(t){for(var i=this.fe.size-1;i>=t;--i){var n=f(this.fe.get(i)),s=i+1;f(this.oe.get(n.timestamp)).index=s,this.fe.delete(i),this.fe.set(s,n)}},t.prototype.de=function(){var t=this;this.fe.clear(),this.oe.forEach((function(i,n){t.fe.set(i.index,i.timePoint)}))},t.prototype.ve=function(t){for(var i,n=[],s=(null===(i=this.fe.get(t-1))||void 0===i?void 0:i.timestamp)||null,h=t;h<this.fe.size;++h){var r=f(this.fe.get(h)),u=ns(r.timestamp,s);s=r.timestamp,n.push({span:u,time:r,index:h})}return n},t}(),es={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,axisLabelVisible:!0},os=function(){function t(t){this.si=t}return t.prototype.applyOptions=function(t){this.si.applyOptions(t)},t.prototype.options=function(){return this.si.options()},t.prototype.priceLine=function(){return this.si},t}(),fs=function(){function t(t,i){this._series=t,this._dataUpdatesConsumer=i}return t.prototype.destroy=function(){delete this._series,delete this._dataUpdatesConsumer},t.prototype.priceFormatter=function(){return this._series.formatter()},t.prototype.series=function(){return this._series},t.prototype.priceToCoordinate=function(t){var i=this._series.firstValue();return null===i?null:this._series.priceScale().priceToCoordinate(t,i.value)},t.prototype.coordinateToPrice=function(t){var i=this._series.firstValue();return null===i?null:this._series.priceScale().coordinateToPrice(t,i.value)},t.prototype.setData=function(t){this._dataUpdatesConsumer.applyNewData(this._series,t)},t.prototype.update=function(t){this._dataUpdatesConsumer.updateData(this._series,t)},t.prototype.setMarkers=function(t){var i=t.map((function(t){return u(u({},t),{time:Kn(t.time)})}));this._series.setMarkers(i)},t.prototype.applyOptions=function(t){this._series.applyOptions(t)},t.prototype.options=function(){return m(this._series.options())},t.prototype.createPriceLine=function(t){var i=l(m(es),t),n=this._series.createPriceLine(i);return new os(n)},t.prototype.removePriceLine=function(t){this._series.removePriceLine(t.priceLine())},t}(),as=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return r(i,t),i.prototype.applyOptions=function(i){Fi(i),t.prototype.applyOptions.call(this,i)},i}(fs);var cs,ls={width:0,height:0,layout:{backgroundColor:"#FFFFFF",textColor:"#191919",fontSize:11,fontFamily:"'Trebuchet MS', Roboto, Ubuntu, sans-serif"},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},priceScale:{autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,position:"right",borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,scaleMargins:{bottom:.1,top:.2}},timeScale:{rightOffset:0,barSpacing:6,fixLeftEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,tickMarkFormatter:function(t,i,n){var s={};switch(i){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}var h=void 0===t.businessDay?new Date(1e3*t.timestamp):new Date(Date.UTC(t.businessDay.year,t.businessDay.month-1,t.businessDay.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(n,s)}},watermark:{color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,text:"",horzAlign:"center",vertAlign:"center"},localization:{locale:navigator.language,dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:!0,axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0}},vs={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},ds={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},ws={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4},Ms={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4},bs={color:"#26a69a",base:0},ms={title:"",lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01},scaleGroup:""},ps=function(){function t(t){this.l=t}return t.prototype.destroy=function(){delete this.l},t.prototype.applyOptions=function(t){this.l.applyOptions({priceScale:t})},t.prototype.options=function(){return this.B().options()},t.prototype.B=function(){return this.l.mainPriceScale()},t}();!function(t){t[t.AnimationDurationMs=1e3]="AnimationDurationMs"}(cs||(cs={}));var gs=function(){function t(t){this.F=t}return t.prototype.destroy=function(){delete this.F},t.prototype.scrollPosition=function(){return this._s().rightOffset()},t.prototype.scrollToPosition=function(t,i){i?this._s().scrollToOffsetAnimated(t,1e3):this._s().setRightOffset(t)},t.prototype.scrollToRealTime=function(){this._s().scrollToRealTime()},t.prototype.getVisibleRange=function(){var t=this._s().visibleBars();if(null===t)return null;var i=this.F.timeScale().points(),n=a(i.firstIndex()),s=a(i.lastIndex());return{from:ys(a(i.valueAt(Math.max(n,t.firstBar())))),to:ys(a(i.valueAt(Math.min(s,t.lastBar()))))}},t.prototype.setVisibleRange=function(t){var i={from:Kn(t.from),to:Kn(t.to)};this.F.setTargetTimeRange(i)},t.prototype.resetTimeScale=function(){this.F.resetTimeScale()},t.prototype.fitContent=function(){this.F.fitContent()},t.prototype.applyOptions=function(t){this._s().applyOptions(t)},t.prototype.options=function(){return m(this._s().options())},t.prototype._s=function(){return this.F.timeScale()},t}();function ys(t){return t.businessDay||t.timestamp}function ks(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function Ns(t){var i=t.handleScale;b(i)&&(t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:i,mouseWheel:i,pinch:i});var n=t.handleScroll;return b(n)&&(t.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n}),t}var xs=function(){function t(t,i){var n=this;this.we=new us,this.Me=new ht,this.be=new Map,this.me=new Map,this.pe=new ht,this.ge=new ht;var s=void 0===i?m(ls):l(m(ls),Ns(i));this.or=new qn(t,s),this.or.model().timeScale().visibleBarsChanged().subscribe(this.ye.bind(this)),this.or.clicked().subscribe((function(t){n.pe.hasListeners()&&n.pe.fire(n.ke(t()))}),this),this.or.crosshairMoved().subscribe((function(t){n.ge.hasListeners()&&n.ge.fire(n.ke(t()))}),this);var h=this.or.model();this.Ne=new ps(h),this.xe=new gs(h)}return t.prototype.remove=function(){this.or.model().timeScale().visibleBarsChanged().unsubscribeAll(this),this.or.clicked().unsubscribeAll(this),this.or.crosshairMoved().unsubscribeAll(this),this.Ne.destroy(),this.xe.destroy(),this.or.destroy(),delete this.or,this.be.forEach((function(t,i){i.destroy()})),this.be.clear(),this.me.clear(),this.Me.destroy(),this.pe.destroy(),this.ge.destroy(),this.we.destroy(),delete this.we},t.prototype.resize=function(t,i,n){this.or.resize(t,i,n)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),ks(t.priceFormat);var i=l(m(ms),Ms,t),n=this.or.model().createSeries("Area",i),s=new fs(n,this);return this.be.set(s,n),this.me.set(n,s),s},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),ks(t.priceFormat);var i=l(m(ms),ds,t),n=this.or.model().createSeries("Bar",i),s=new fs(n,this);return this.be.set(s,n),this.me.set(n,s),s},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),Fi(t),ks(t.priceFormat);var i=l(m(ms),vs,t),n=this.or.model().createSeries("Candlestick",i),s=new as(n,this);return this.be.set(s,n),this.me.set(n,s),s},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),ks(t.priceFormat);var i=l(m(ms),bs,t),n=this.or.model().createSeries("Histogram",i),s=new fs(n,this);return this.be.set(s,n),this.me.set(n,s),s},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),ks(t.priceFormat);var i=l(m(ms),ws,t),n=this.or.model().createSeries("Line",i),s=new fs(n,this);return this.be.set(s,n),this.me.set(n,s),s},t.prototype.removeSeries=function(t){var i=t,n=f(this.be.get(i)),s=this.we.removeSeries(n),h=this.or.model();h.removeSeries(n);var r=s.timeScaleUpdate;h.updateTimeScale(r.index,r.changes,r.marks,!0),r.seriesUpdates.forEach((function(t,i){i.updateData(t.update)})),h.updateTimeScaleBaseIndex(0),this.be.delete(i),this.me.delete(n)},t.prototype.applyNewData=function(t,i){var n=this.we.setSeriesData(t,i),s=this.or.model(),h=n.timeScaleUpdate;s.updateTimeScale(h.index,h.changes,h.marks,!0),h.seriesUpdates.forEach((function(t,i){i.updateData(t.update,!0)})),s.updateTimeScaleBaseIndex(0)},t.prototype.updateData=function(t,i){var n=this.we.updateSeriesData(t,i),s=this.or.model(),h=n.timeScaleUpdate;s.updateTimeScale(h.index,h.changes,h.marks,!1),h.seriesUpdates.forEach((function(t,i){i.updateData(t.update)})),s.updateTimeScaleBaseIndex(0)},t.prototype.subscribeClick=function(t){this.pe.subscribe(t)},t.prototype.unsubscribeClick=function(t){this.pe.unsubscribe(t)},t.prototype.subscribeCrosshairMove=function(t){this.ge.subscribe(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.ge.unsubscribe(t)},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.Me.subscribe(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.Me.unsubscribe(t)},t.prototype.priceScale=function(){return this.Ne},t.prototype.timeScale=function(){return this.xe},t.prototype.applyOptions=function(t){this.or.applyOptions(Ns(t))},t.prototype.options=function(){return this.or.options()},t.prototype.takeScreenshot=function(){return this.or.takeScreenshot()},t.prototype.ye=function(){this.Me.hasListeners()&&this.Me.fire(this.timeScale().getVisibleRange())},t.prototype.Se=function(t){return f(this.me.get(t))},t.prototype.ke=function(t){var i=this,n=new Map;t.seriesPrices.forEach((function(t,s){n.set(i.Se(s),t)}));var s=void 0===t.hoveredSeries?void 0:this.Se(t.hoveredSeries);return{time:t.time&&(t.time.businessDay||t.time.timestamp),point:t.point,hoveredSeries:s,hoveredMarkerId:t.hoveredObject,seriesPrices:n}},t}();var Ss=Object.freeze({__proto__:null,version:function(){return"2.1.0-dev+202005021212"},get LineStyle(){return i},get LineType(){return t},get CrosshairMode(){return q},get PriceScaleMode(){return Di},get PriceLineSource(){return Ai},get TickMarkType(){return Ki},isBusinessDay:Gi,isUTCTimestamp:Qi,createChart:function(t,i){var n=a(w(t)?document.getElementById(t):t);return new xs(n,i)}});window.LightweightCharts=Ss}();
